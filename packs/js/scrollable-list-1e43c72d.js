import{R as r,a7 as ee,f as te,r as i,a as s,aB as k,Q as ne,as as O,av as W,a$ as re}from"../index-be605fd2.js";import{V as ae}from"./index-85a17314.js";import{L as oe}from"./load-more-55559f32.js";var se=["context"],le=["context"],ie=function(l){var n=l.context,a=O(l,se);return a["data-known-size"]<=12?null:r.createElement("div",W({className:n==null?void 0:n.itemClassName},a))},de=r.forwardRef(function(e,l){var n=e.context,a=O(e,le);return r.createElement("div",W({ref:l,className:n==null?void 0:n.listClassName},a))}),ve=r.forwardRef(function(e,l){var n=e.scrollKey,a=e.prepend,C=a===void 0?null:a,D=e.alwaysPrepend,F=e.children,u=e.isLoading,I=e.emptyMessage,E=e.emptyMessageCard,H=E===void 0?!0:E,h=e.showLoading;e.onRefresh;var R=e.onScroll,K=e.onScrollToTop,m=e.onLoadMore,w=e.className,z=e.itemClassName,A=e.id,v=e.hasMore,d=e.placeholderComponent,L=e.placeholderCount,N=L===void 0?0:L,P=e.initialTopMostItemIndex,g=P===void 0?0:P,T=e.style,B=T===void 0?{}:T,$=e.useWindowScroll,J=$===void 0?!0:$,V=ee(),j=te(),p=j.get("autoloadMore"),f="soapbox:scrollData:".concat(n),o=i.useMemo(function(){return JSON.parse(sessionStorage.getItem(f))},[f]),x=i.useRef(o?o.index:0),y=i.useRef(o?o.offset:0),q=Array.from(F||[]),b=h&&d&&N>0,S=b?Array(N).fill(""):q;v&&(p||u)&&d?S.push(s(d,{})):v&&(p||u)&&S.push(s(k,{}));var M=i.useCallback(ne(function(){var t=document.querySelector('[data-virtuoso-scroller] [data-item-index="'.concat(x.current,'"]'));t?y.current=t.getBoundingClientRect().top*-1:y.current=0},150,{trailing:!0}),[]);i.useEffect(function(){return document.addEventListener("scroll",M),sessionStorage.removeItem(f),function(){if(n){var t={index:x.current,offset:y.current};sessionStorage.setItem(f,JSON.stringify(t))}document.removeEventListener("scroll",M)}},[]);var Q=function(){return s("div",{className:"mt-2"},void 0,D&&C,u?s(k,{}):r.createElement(r.Fragment,null,H?s(re,{variant:"rounded",size:"lg"},void 0,I):I))},G=function(c,_){return b?s(d,{}):_},U=function(){p&&v&&m&&m()},X=function(){return p||!v||!m?null:s(oe,{visible:!u,onClick:m})},Y=function(c){x.current=Math.min(c.startIndex+1,c.endIndex),M()},Z=i.useMemo(function(){return h?0:g||(o&&V.action==="POP"?{align:"start",index:o.index,offset:o.offset}:0)},[h,g]);return r.createElement(ae,{ref:l,id:A,useWindowScroll:J,className:w,data:S,startReached:K,endReached:U,isScrolling:function(c){return c&&R&&R()},itemContent:G,initialTopMostItemIndex:Z,rangeChanged:Y,style:B,context:{listClassName:w,itemClassName:z},components:{Header:function(){return r.createElement(r.Fragment,null,C)},ScrollSeekPlaceholder:d,EmptyPlaceholder:function(){return Q()},List:de,Item:ie,Footer:X}})});export{ve as S};
