import{G as C,a as w,v as N}from"./layout-list-be309b1d.js";import{bl as k,g as y,bm as P,bn as E,bo as D,ko as A,r as f,ax as W,a as t,W as g,R as v,az as R,H as F,A as I,X as V,aw as q}from"../index-cd57e3f7.js";import{V as H,a as M}from"./index-e277719c.js";import{u as j}from"./useGroupTag-124625c4.js";import{G as z}from"./group-list-item-d2009d65.js";import"./group-header-image-5ecc2b27.js";function J(e){const i=k(),s=y(),{entities:c,...l}=P([D.GROUPS,"tags",e],()=>i.get(`/api/v1/tags/${e}/groups`),{schema:E,enabled:s.groupsDiscovery}),{relationships:u}=A(["tags",e],c.map(r=>r.id)),m=c.map(r=>({...r,relationship:u[r.id]||null}));return{...l,groups:m}}var O=["context"],n=function(e){return e.LIST="LIST",e.GRID="GRID",e}(n||{}),U=v.forwardRef(function(e,i){e.context;var s=q(e,O);return v.createElement("div",R({ref:i},s,{className:"flex flex-wrap"}))}),Z=function(i){var s=i.params.id,c=f.useState(n.LIST),l=W(c,2),u=l[0],m=l[1],r=j(s),x=r.tag,L=r.isLoading,d=J(s),G=d.groups,S=d.hasNextPage,_=d.fetchNextPage,h=function(){S&&_()},b=f.useCallback(function(a,o){return t("div",{className:g({"pt-4":o!==0})},void 0,t(z,{group:a,withJoinAction:!0}))},[]),T=f.useCallback(function(a){return t(C,{group:a})},[]);return L||!x?null:t(V,{label:"#".concat(x.name),action:t(F,{alignItems:"center"},void 0,t("button",{onClick:function(){return m(n.LIST)}},void 0,t(I,{src:w,className:g("h-5 w-5 text-gray-600",{"text-primary-600":u===n.LIST})})),t("button",{onClick:function(){return m(n.GRID)}},void 0,t(I,{src:N,className:g("h-5 w-5 text-gray-600",{"text-primary-600":u===n.GRID})})))},void 0,u===n.LIST?t(H,{useWindowScroll:!0,data:G,itemContent:function(o,p){return b(p,o)},endReached:h}):t(M,{useWindowScroll:!0,data:G,itemContent:function(o,p){return T(p)},components:{Item:function(o){return v.createElement("div",R({},o,{className:"w-1/2 flex-none pb-4 [&:nth-last-of-type(-n+2)]:pb-0"}))},List:U},endReached:h}))};export{Z as default};
