import{fz as m,bp as p,o as l,d as P,u as I,r as f,at as M,a as s,bI as U,aa as w,bF as y,y as g,bE as k,X as B}from"../index-630f29c3.js";import{F as A}from"./file-input-56dd0607.js";const x="IMPORT_FOLLOWS_REQUEST",K="IMPORT_FOLLOWS_SUCCESS",Q="IMPORT_FOLLOWS_FAIL",W="IMPORT_BLOCKS_REQUEST",D="IMPORT_BLOCKS_SUCCESS",V="IMPORT_BLOCKS_FAIL",$="IMPORT_MUTES_REQUEST",z="IMPORT_MUTES_SUCCESS",q="IMPORT_MUTES_FAIL",d=l({blocksSuccess:{id:"import_data.success.blocks",defaultMessage:"Blocks imported successfully"},followersSuccess:{id:"import_data.success.followers",defaultMessage:"Followers imported successfully"},mutesSuccess:{id:"import_data.success.mutes",defaultMessage:"Mutes imported successfully"}}),G=o=>(t,a)=>(t({type:x}),m(a).post("/api/v1/pleroma/follow_import",o).then(e=>{p.success(d.followersSuccess),t({type:K,config:e.data})}).catch(e=>{t({type:Q,error:e})})),X=o=>(t,a)=>(t({type:W}),m(a).post("/api/v1/pleroma/blocks_import",o).then(e=>{p.success(d.blocksSuccess),t({type:D,config:e.data})}).catch(e=>{t({type:V,error:e})})),j=o=>(t,a)=>(t({type:$}),m(a).post("/api/v1/pleroma/mutes_import",o).then(e=>{p.success(d.mutesSuccess),t({type:z,config:e.data})}).catch(e=>{t({type:q,error:e})}));var c=function(t){var a=t.messages,e=t.action,O=P(),n=I(),b=f.useState(!1),_=M(b,2),T=_[0],r=_[1],v=f.useState(null),S=M(v,2),C=S[0],E=S[1],L=function(u){var i=new FormData;i.append("list",C),r(!0),O(e(i)).then(function(){r(!1)}).catch(function(){r(!1)}),u.preventDefault()},R=function(u){var i,h=(i=u.target.files)===null||i===void 0?void 0:i.item(0);E(h)};return s(k,{onSubmit:L},void 0,s(g,{size:"xl",weight:"bold",tag:"label"},void 0,n.formatMessage(a.input_label)),s(y,{hintText:s(g,{theme:"muted"},void 0,n.formatMessage(a.input_hint))},void 0,s(A,{accept:".csv,text/csv",onChange:R,required:!0})),s(U,{},void 0,s(w,{type:"submit",theme:"primary",disabled:T},void 0,n.formatMessage(a.submit))))},H=l({heading:{id:"column.import_data",defaultMessage:"Import data"},submit:{id:"import_data.actions.import",defaultMessage:"Import"}}),J=l({input_label:{id:"import_data.follows_label",defaultMessage:"Follows"},input_hint:{id:"import_data.hints.follows",defaultMessage:"CSV file containing a list of followed accounts"},submit:{id:"import_data.actions.import_follows",defaultMessage:"Import follows"}}),N=l({input_label:{id:"import_data.blocks_label",defaultMessage:"Blocks"},input_hint:{id:"import_data.hints.blocks",defaultMessage:"CSV file containing a list of blocked accounts"},submit:{id:"import_data.actions.import_blocks",defaultMessage:"Import blocks"}}),Y=l({input_label:{id:"import_data.mutes_label",defaultMessage:"Mutes"},input_hint:{id:"import_data.hints.mutes",defaultMessage:"CSV file containing a list of muted accounts"},submit:{id:"import_data.actions.import_mutes",defaultMessage:"Import mutes"}}),et=function(){var t=I();return s(B,{label:t.formatMessage(H.heading)},void 0,s(c,{action:G,messages:J}),s(c,{action:X,messages:N}),s(c,{action:j,messages:Y}))};export{et as default};
