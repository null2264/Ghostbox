import{u as V,d as $,b8 as ee,r as b,at as g,a as e,bE as C,bF as c,F as n,bG as h,bI as T,aa as j,X as k,o as te,a2 as ae,y as R,bZ as E,je as F,jf as re,jg as se,_ as U}from"../index-5dcc55da.js";function L(o,t){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(o);t&&(r=r.filter(function(p){return Object.getOwnPropertyDescriptor(o,p).enumerable})),a.push.apply(a,r)}return a}function D(o){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?L(Object(a),!0).forEach(function(r){U(o,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach(function(r){Object.defineProperty(o,r,Object.getOwnPropertyDescriptor(a,r))})}return o}var m=te({heading:{id:"column.app_create",defaultMessage:"Create app"},namePlaceholder:{id:"app_create.name_placeholder",defaultMessage:"e.g. 'Soapbox'"},scopesPlaceholder:{id:"app_create.scopes_placeholder",defaultMessage:"e.g. 'read write follow'"}}),I={client_name:"",redirect_uris:"urn:ietf:wg:oauth:2.0:oob",scopes:"",website:""},oe=function(){var t=V(),a=$(),r=ee(),p=r.account,q=b.useState(null),v=g(q,2),_=v[0],y=v[1],B=b.useState(null),w=g(B,2),S=w[0],O=w[1],N=b.useState(!1),P=g(N,2),G=P[0],d=P[1],H=b.useState(I),x=g(H,2),l=x[0],M=x[1],J=function(){var s=F(p);return a(re(l,s)).then(function(u){return y(u),u})},K=function(s){var u=F(p),Q={client_id:s.client_id,client_secret:s.client_secret,redirect_uri:l.redirect_uris,grant_type:"client_credentials",scope:l.scopes};return a(se(Q,u)).then(O)},z=function(){d(!0),J().then(K).then(function(){A(),d(!1)}).catch(function(s){console.error(s),d(!1)})},W=function(s,u){M(D(D({},l),{},U({},s,u)))},f=function(s){return function(u){W(s,u.target.value)}},X=function(){y(null),O(null),d(!1),M(I)},Y=function(){X(),A()},A=function(){window.scrollTo({top:0,behavior:"smooth"})},Z=function(){return e(k,{label:t.formatMessage(m.heading),backHref:"/developers"},void 0,e(C,{},void 0,e(ae,{},void 0,e(R,{size:"lg",weight:"medium"},void 0,e(n,{id:"app_create.results.explanation_title",defaultMessage:"App created successfully"})),e(R,{theme:"muted"},void 0,e(n,{id:"app_create.results.explanation_text",defaultMessage:"You created a new app and token! Please copy the credentials somewhere; you will not see them again after navigating away from this page."}))),e(c,{labelText:e(n,{id:"app_create.results.app_label",defaultMessage:"App"})},void 0,e(E,{value:JSON.stringify(_,null,2),rows:10,readOnly:!0,isCodeEditor:!0})),e(c,{labelText:e(n,{id:"app_create.results.token_label",defaultMessage:"OAuth token"})},void 0,e(E,{value:JSON.stringify(S,null,2),rows:10,readOnly:!0,isCodeEditor:!0})),e(T,{},void 0,e(j,{theme:"primary",type:"button",onClick:Y},void 0,e(n,{id:"app_create.restart",defaultMessage:"Create another"})))))};return _&&S?Z():e(k,{label:t.formatMessage(m.heading),backHref:"/developers"},void 0,e(C,{onSubmit:z},void 0,e(c,{labelText:e(n,{id:"app_create.name_label",defaultMessage:"App name"})},void 0,e(h,{type:"text",placeholder:t.formatMessage(m.namePlaceholder),onChange:f("client_name"),value:l.client_name,required:!0})),e(c,{labelText:e(n,{id:"app_create.website_label",defaultMessage:"Website"})},void 0,e(h,{type:"text",placeholder:"https://soapbox.pub",onChange:f("website"),value:l.website})),e(c,{labelText:e(n,{id:"app_create.redirect_uri_label",defaultMessage:"Redirect URIs"})},void 0,e(h,{type:"text",placeholder:"https://example.com",onChange:f("redirect_uris"),value:l.redirect_uris,required:!0})),e(c,{labelText:e(n,{id:"app_create.scopes_label",defaultMessage:"Scopes"})},void 0,e(h,{type:"text",placeholder:t.formatMessage(m.scopesPlaceholder),onChange:f("scopes"),value:l.scopes,required:!0})),e(T,{},void 0,e(j,{theme:"primary",type:"submit",disabled:G},void 0,e(n,{id:"app_create.submit",defaultMessage:"Create app"})))))};export{oe as default};
