import{v as C}from"./hash-746ab8b6.js";import{kv as R,bo as w,d as I,u as E,kz as L,a as t,H as S,fO as T,aK as M,kE as F,dm as A,L as U,a3 as N,y as f,d6 as q,o as D,kF as G,br as k,A as j,ad as H,_ as z,eb as K,F as $}from"../index-191ddf5f.js";import{u as V}from"./useGroupTags-16c0e6c2.js";import{S as B}from"./scrollable-list-1f3f3185.js";import{P as W}from"./placeholder-account-5e6e6a7e.js";import"./index-7e893778.js";import"./load-more-8e09f882.js";function J(r,i){const{updateEntity:s,...a}=R([w.GROUP_TAGS,r,i],{patch:`/api/v1/groups/${r}/tags/${i}`});return{updateGroupTag:s,...a}}const _="/packs/assets/pin-filled-c783b6dd.svg";function x(r,i){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);i&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),s.push.apply(s,a)}return s}function v(r){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?x(Object(s),!0).forEach(function(a){z(r,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):x(Object(s)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(s,a))})}return r}var o=D({hideTag:{id:"group.tags.hide",defaultMessage:"Hide topic"},showTag:{id:"group.tags.show",defaultMessage:"Show topic"},total:{id:"group.tags.total",defaultMessage:"Total Posts"},pinTag:{id:"group.tags.pin",defaultMessage:"Pin topic"},unpinTag:{id:"group.tags.unpin",defaultMessage:"Unpin topic"},pinSuccess:{id:"group.tags.pin.success",defaultMessage:"Pinned!"},unpinSuccess:{id:"group.tags.unpin.success",defaultMessage:"Unpinned!"},visibleSuccess:{id:"group.tags.visible.success",defaultMessage:"Topic marked as visible"},hiddenSuccess:{id:"group.tags.hidden.success",defaultMessage:"Topic marked as hidden"}}),Q=function(i){var s,a=i.group,e=i.tag,p=i.isPinnable,u=I(),n=E(),h=J(a.id,e.id),d=h.updateGroupTag,g=((s=a.relationship)===null||s===void 0?void 0:s.role)===L.OWNER,l=function(){var y=e.visible;d({group_tag_type:y?"hidden":"normal"},{onSuccess:function(){var O=v(v({},e),{},{visible:!e.visible,pinned:y?!1:e.pinned});u(G([O],w.GROUP_TAGS)),k.success(O.visible?n.formatMessage(o.visibleSuccess):n.formatMessage(o.hiddenSuccess))}})},m=function(){d({group_tag_type:e.pinned?"normal":"pinned"},{onSuccess:function(){var P=v(v({},e),{},{pinned:!e.pinned});u(G([P],w.GROUP_TAGS)),k.success(P.pinned?n.formatMessage(o.pinSuccess):n.formatMessage(o.unpinSuccess))}})},b=function(){if(!g&&e.pinned)return t(j,{src:_,className:"h-5 w-5 text-gray-600","data-testid":"pin-icon"});if(!g)return null;if(p)return t(T,{text:e.pinned?n.formatMessage(o.unpinTag):n.formatMessage(o.pinTag)},void 0,t(M,{onClick:m,theme:"transparent",src:e.pinned?_:H,iconClassName:"h-5 w-5 text-primary-500 dark:text-accent-blue","data-testid":"pin-icon"}));if(!p&&e.pinned)return t(T,{text:n.formatMessage(o.unpinTag)},void 0,t(M,{onClick:m,theme:"transparent",src:_,iconClassName:"h-5 w-5 text-primary-500 dark:text-accent-blue"}))};return t(S,{alignItems:"center",justifyContent:"between","data-testid":"group-tag-list-item"},void 0,t(U,{to:"/group/".concat(a.slug,"/tag/").concat(e.id),className:"group grow"},void 0,t(N,{},void 0,t(f,{weight:"bold",theme:e.visible||!g?"default":"subtle",className:"group-hover:underline","data-testid":"group-tag-name"},void 0,"#",e.name),t(f,{size:"sm",theme:e.visible||!g?"muted":"subtle"},void 0,n.formatMessage(o.total),":"," ",t(f,{size:"sm",theme:"inherit",weight:"semibold",tag:"span"},void 0,q(e.uses))))),t(S,{alignItems:"center",space:2},void 0,e.visible?b():null,g?t(T,{text:e.visible?n.formatMessage(o.hideTag):n.formatMessage(o.showTag)},void 0,t(M,{onClick:l,theme:"transparent",src:e.visible?F:A,iconClassName:"h-5 w-5 text-primary-500 dark:text-accent-blue"})):null))},ie=function(i){var s=i.params.groupId,a=K(s),e=a.group,p=a.isFetching,u=V(s),n=u.tags,h=u.isFetching,d=u.hasNextPage,g=u.fetchNextPage,l=p||h,m=n.filter(function(c){return c.pinned}),b=m.length<3;return t(B,{scrollKey:"group-tags",hasMore:d,onLoadMore:g,isLoading:l||!e,showLoading:!e||l&&n.length===0,placeholderComponent:W,placeholderCount:3,className:"divide-y divide-solid divide-gray-300 dark:divide-gray-800",itemClassName:"py-3 last:pb-0",emptyMessage:t(N,{space:4,className:"pt-6",justifyContent:"center",alignItems:"center"},void 0,t("div",{className:"rounded-full bg-gray-200 p-4 dark:bg-gray-800"},void 0,t(j,{src:C,className:"h-6 w-6 text-gray-600"})),t(f,{theme:"muted"},void 0,t($,{id:"group.tags.empty",defaultMessage:"There are no topics in this group yet."}))),emptyMessageCard:!1},void 0,n.map(function(c){return t(Q,{group:e,isPinnable:b,tag:c},c.id)}))};export{ie as default};
