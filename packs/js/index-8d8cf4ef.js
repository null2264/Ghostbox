import{u as _,d as M,g as x,q as m,b6 as R,a as e,bX as E,ab as O,b5 as q,H as I,o as y,iV as D,ae as K,I as T,W as U,iW as H,iX as N,iY as P,bb as X,bN as j,r as B,iZ as V,y as b,F as f,a6 as W,eM as k,cy as S,X as Y,i_ as z}from"../index-c4c40436.js";import{S as L}from"./scrollable-list-01deb2c5.js";import{v as Z}from"./backspace-c284aa0a.js";import"./index-881f2658.js";import"./load-more-59f56571.js";var G=y({add:{id:"aliases.account.add",defaultMessage:"Create alias"}}),J=function(t){var i,n=t.accountId,v=t.aliases,o=_(),d=M(),c=x(),u=m(function(w){return w.me}),r=R(n),a=r.account,s=a==null||(i=a.pleroma)===null||i===void 0?void 0:i.ap_id,l=c.accountMoving?a==null?void 0:a.acct:s,g=l?v.includes(l):!1,F=function(){return d(D(a))};if(!a)return null;var C;return!g&&n!==u&&(C=e(O,{src:E,iconClassName:"h-5 w-5",title:o.formatMessage(G.add),onClick:F})),e(I,{space:1,alignItems:"center",justifyContent:"between",className:"p-2.5"},void 0,e("div",{className:"w-full"},void 0,e(q,{account:a,withRelationship:!1})),C)},h=y({search:{id:"aliases.search",defaultMessage:"Search your old account"},searchTitle:{id:"tabs_bar.search",defaultMessage:"Search"}}),Q=function(){var t=M(),i=_(),n=m(function(r){return r.aliases.suggestions.value}),v=function(a){t(H(a.target.value))},o=function(a){a.keyCode===13&&t(N(n))},d=function(){t(N(n))},c=function(){t(P())},u=n.length>0;return e("div",{className:"flex items-center gap-1"},void 0,e("label",{className:"relative grow"},void 0,e("span",{style:{display:"none"}},void 0,i.formatMessage(h.search)),e("input",{className:"block w-full rounded-full focus:border-primary-500 focus:ring-primary-500 dark:bg-gray-800 dark:text-white dark:placeholder:text-gray-500 sm:text-sm",type:"text",value:n,onChange:v,onKeyUp:o,placeholder:i.formatMessage(h.search)}),e("div",{role:"button",tabIndex:u?0:-1,className:"search__icon",onClick:c},void 0,e(T,{src:Z,"aria-label":i.formatMessage(h.search),className:U("svg-icon--backspace",{active:u})}))),e(K,{onClick:d},void 0,i.formatMessage(h.searchTitle)))},p=y({heading:{id:"column.aliases",defaultMessage:"Account aliases"},subheading_add_new:{id:"column.aliases.subheading_add_new",defaultMessage:"Add New Alias"},create_error:{id:"column.aliases.create_error",defaultMessage:"Error creating alias"},delete_error:{id:"column.aliases.delete_error",defaultMessage:"Error deleting alias"},subheading_aliases:{id:"column.aliases.subheading_aliases",defaultMessage:"Current aliases"},delete:{id:"column.aliases.delete",defaultMessage:"Delete"}}),ie=function(){var t=_(),i=M(),n=x(),v=X(),o=v.account,d=m(function(s){if(n.accountMoving)return j(s.aliases.aliases.items);var l,g;return(l=o==null||(g=o.pleroma)===null||g===void 0?void 0:g.also_known_as)!==null&&l!==void 0?l:[]}),c=m(function(s){return s.aliases.suggestions.items}),u=m(function(s){return s.aliases.suggestions.loaded});B.useEffect(function(){i(V)},[]);var r=function(l){i(z(l.currentTarget.dataset.value))},a=e(f,{id:"empty_column.aliases",defaultMessage:"You haven't created any account alias yet."});return e(Y,{className:"aliases-settings-panel",label:t.formatMessage(p.heading)},void 0,e(k,{},void 0,e(S,{title:t.formatMessage(p.subheading_add_new)})),e(Q,{}),u&&c.size===0?e("div",{className:"aliases__accounts empty-column-indicator"},void 0,e(f,{id:"empty_column.aliases.suggestions",defaultMessage:"There are no account suggestions available for the provided term."})):e("div",{className:"aliases__accounts mb-4"},void 0,c.map(function(s){return e(J,{accountId:s,aliases:d},s)})),e(k,{},void 0,e(S,{title:t.formatMessage(p.subheading_aliases)})),e("div",{className:"aliases-settings-panel"},void 0,e(L,{scrollKey:"aliases",emptyMessage:a},void 0,d.map(function(s,l){return e(I,{alignItems:"center",justifyContent:"between",space:1,className:"p-2"},l,e("div",{},void 0,e(b,{tag:"span",theme:"muted"},void 0,e(f,{id:"aliases.account_label",defaultMessage:"Old account:"}))," ",e(b,{tag:"span"},void 0,s)),e("div",{className:"flex items-center",role:"button",tabIndex:0,onClick:r,"data-value":s,"aria-label":t.formatMessage(p.delete)},void 0,e(T,{className:"mr-1.5",src:W}),e(b,{weight:"bold",theme:"muted"},void 0,e(f,{id:"aliases.aliases_list_delete",defaultMessage:"Unlink alias"}))))}))))};export{ie as default};
