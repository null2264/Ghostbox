import{u as h,d as A,g as w,R as s,au as i,fk as M,bp as f,a as e,a$ as S,a3 as T,y as x,bE as D,bF as F,bG as C,bI as R,ab as _,eL as k,cy as I,a2 as L,o as $}from"../index-4238fef4.js";import"./es.promise.finally-2ef7572a.js";var a=$({passwordFieldLabel:{id:"security.fields.password.label",defaultMessage:"Password"},deleteHeader:{id:"security.headers.delete",defaultMessage:"Delete Account"},deleteText:{id:"security.text.delete",defaultMessage:"To delete your account, enter your password then click Delete Account. This is a permanent action that cannot be undone. Your account will be destroyed from this server, and a deletion request will be sent to other servers. It's not guaranteed that all servers will purge your account."},localDeleteText:{id:"security.text.delete.local",defaultMessage:"To delete your account, enter your password then click Delete Account. This is a permanent action that cannot be undone."},deleteSubmit:{id:"security.submit.delete",defaultMessage:"Delete Account"},deleteAccountSuccess:{id:"security.delete_account.success",defaultMessage:"Account successfully deleted."},deleteAccountFail:{id:"security.delete_account.fail",defaultMessage:"Account deletion failed."}}),G=function(){var t=h(),d=A(),m=w(),g=s.useState(""),l=i(g,2),o=l[0],c=l[1],p=s.useState(!1),r=i(p,2),b=r[0],u=r[1],v=s.useCallback(function(n){n.persist(),c(n.target.value)},[]),y=s.useCallback(function(){u(!0),d(M(o)).then(function(){c(""),f.success(t.formatMessage(a.deleteAccountSuccess))}).finally(function(){u(!1)}).catch(function(){c(""),f.error(t.formatMessage(a.deleteAccountFail))})},[o,d,t]);return e(L,{variant:"rounded"},void 0,e(k,{backHref:"/settings"},void 0,e(I,{title:t.formatMessage(a.deleteHeader)})),e(S,{},void 0,e(T,{space:4},void 0,e(x,{theme:"muted"},void 0,t.formatMessage(m.federating?a.deleteText:a.localDeleteText)),e(D,{onSubmit:y},void 0,e(F,{labelText:t.formatMessage(a.passwordFieldLabel)},void 0,e(C,{type:"password",name:"password",onChange:v,value:o})),e(R,{},void 0,e(_,{type:"submit",theme:"danger",disabled:b},void 0,t.formatMessage(a.deleteSubmit)))))))};export{G as default};
