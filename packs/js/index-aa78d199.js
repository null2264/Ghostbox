import{u as _,d as R,g as T,t as x,r as s,q as l,Z as w,$ as A,a0 as u,a1 as $,a as t,a2 as b,y as m,F as c,L as P,X as k,o as E}from"../index-be605fd2.js";import{P as F}from"./pull-to-refresh-a7e092ab.js";import{T as H}from"./timeline-456dace7.js";import"./scroll-top-button-73ec9889.js";import"./status-list-c10445e1.js";import"./scrollable-list-1e43c72d.js";import"./index-85a17314.js";import"./load-more-55559f32.js";import"./status-container-e53698d2.js";import"./pending-status-959f7aeb.js";import"./poll-preview-ddaf662b.js";import"./noop-3f99ae3e.js";var L=E({title:{id:"column.home",defaultMessage:"Home"}}),G=function(){var v=_(),a=R(),h=T(),d=x(),o=s.useRef(null),f=l(function(i){var e;return((e=i.timelines.get("home"))===null||e===void 0?void 0:e.isPartial)===!0}),n=l(function(i){var e;return(e=i.timelines.get("home"))===null||e===void 0?void 0:e.feedAccountId}),r=l(function(i){return n?i.relationships.get(n):null}),g=l(function(i){var e;return(e=i.timelines.get("home"))===null||e===void 0?void 0:e.next}),y=function(e){a(u({url:g,maxId:e,accountId:n}))},I=function(){f?o.current=setInterval(function(){a(u())},3e3):p()},p=function(){o.current&&(clearInterval(o.current),o.current=null)},M=function(){return a(u({accountId:n}))};return s.useEffect(function(){return I(),function(){p()}},[f]),s.useEffect(function(){n&&a(w([n]))},[]),s.useEffect(function(){r&&!(r!=null&&r.following)&&(a(A()),a(u({},function(){a($())})))},[n]),t(k,{label:v.formatMessage(L.title),transparent:!0,withHeader:!1},void 0,t(F,{onRefresh:M},void 0,t(H,{scrollKey:"home_timeline",onLoadMore:y,timelineId:"home",divideType:"space",showAds:!0,emptyMessage:t(b,{space:1},void 0,t(m,{size:"xl",weight:"medium",align:"center"},void 0,t(c,{id:"empty_column.home.title",defaultMessage:"You're not following anyone yet"})),t(m,{theme:"muted",align:"center"},void 0,t(c,{id:"empty_column.home.subtitle",defaultMessage:"{siteTitle} gets more interesting once you follow other users.",values:{siteTitle:d.title}})),h.federating&&t(m,{theme:"muted",align:"center"},void 0,t(c,{id:"empty_column.home",defaultMessage:"Or you can visit {public} to get started and meet other users.",values:{public:t(P,{to:"/timeline/local",className:"text-primary-600 hover:underline dark:text-primary-400"},void 0,t(c,{id:"empty_column.home.local_tab",defaultMessage:"the {site_title} tab",values:{site_title:d.title}}))}})))})))};export{G as default};
