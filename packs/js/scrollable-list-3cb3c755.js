import{R as n,a8 as ee,f as te,r as i,a as o,aC as O,Q as re,at as W,aw as k,a2 as ne}from"../index-180a7f7a.js";import{V as ae}from"./index-874a9625.js";import{L as oe}from"./load-more-8fb7bc47.js";var se=["context"],le=["context"],ie=function(s){var r=s.context,l=W(s,se);return n.createElement("div",k({className:r==null?void 0:r.itemClassName},l))},de=n.forwardRef(function(e,s){var r=e.context,l=W(e,le);return n.createElement("div",k({ref:s,className:r==null?void 0:r.listClassName},l))}),ve=n.forwardRef(function(e,s){var r=e.scrollKey,l=e.prepend,M=l===void 0?null:l,D=e.alwaysPrepend,F=e.children,u=e.isLoading,I=e.emptyMessage,E=e.emptyMessageCard,H=E===void 0?!0:E,h=e.showLoading;e.onRefresh;var R=e.onScroll,K=e.onScrollToTop,m=e.onLoadMore,w=e.className,A=e.itemClassName,J=e.id,v=e.hasMore,d=e.placeholderComponent,L=e.placeholderCount,N=L===void 0?0:L,P=e.initialTopMostItemIndex,g=P===void 0?0:P,T=e.style,V=T===void 0?{}:T,b=e.useWindowScroll,j=b===void 0?!0:b,q=ee(),z=te(),p=z.get("autoloadMore"),f="soapbox:scrollData:".concat(r),a=i.useMemo(function(){return JSON.parse(sessionStorage.getItem(f))},[f]),x=i.useRef(a?a.index:0),y=i.useRef(a?a.offset:0),B=Array.from(F||[]),$=h&&d&&N>0,S=$?Array(N).fill(""):B;v&&(p||u)&&d?S.push(o(d,{})):v&&(p||u)&&S.push(o(O,{}));var C=i.useCallback(re(function(){var t=document.querySelector('[data-virtuoso-scroller] [data-item-index="'.concat(x.current,'"]'));t?y.current=t.getBoundingClientRect().top*-1:y.current=0},150,{trailing:!0}),[]);i.useEffect(function(){return document.addEventListener("scroll",C),sessionStorage.removeItem(f),function(){if(r){var t={index:x.current,offset:y.current};sessionStorage.setItem(f,JSON.stringify(t))}document.removeEventListener("scroll",C)}},[]);var Q=function(){return o("div",{className:"mt-2"},void 0,D&&M,u?o(O,{}):n.createElement(n.Fragment,null,H?o(ne,{variant:"rounded",size:"lg"},void 0,I):I))},G=function(c,_){return $?o(d,{}):_},U=function(){p&&v&&m&&m()},X=function(){return p||!v||!m?null:o(oe,{visible:!u,onClick:m})},Y=function(c){x.current=Math.min(c.startIndex+1,c.endIndex),C()},Z=i.useMemo(function(){return h?0:g||(a&&q.action==="POP"?{align:"start",index:a.index,offset:a.offset}:0)},[h,g]);return n.createElement(ae,{ref:s,id:J,useWindowScroll:j,className:w,data:S,startReached:K,endReached:U,isScrolling:function(c){return c&&R&&R()},itemContent:G,initialTopMostItemIndex:Z,rangeChanged:Y,style:V,context:{listClassName:w,itemClassName:A},components:{Header:function(){return n.createElement(n.Fragment,null,M)},ScrollSeekPlaceholder:d,EmptyPlaceholder:function(){return Q()},List:de,Item:ie,Footer:X}})});export{ve as S};
