import{u as de,a as l,I as be,cs as Se,o as le,bO as Ie,ct as te,d as Ce,cu as fe,cv as Ae,cw as Me,cx as _e,t as je,r as T,ax as ke,aT as ze,cy as Le,R as ve,a2 as V,a3 as N,y as F,F as U,H as B,c9 as Oe,A as Pe,aK as Ee,c8 as De,cz as Te,q as ne,b2 as Ne,cA as Re,L as pe,b6 as $e,cB as qe,cC as Ge,cD as q,cE as Xe,cF as Fe,aw as Be,aY as Ue,cG as Ve,cH as He,Q as We,az as Ke,aS as Qe,W as re,_ as Ye}from"../index-3657f38e.js";import{S as Je}from"./scrollable-list-c79273c7.js";import{S as ae}from"./status-container-b5879347.js";import{P as Ze}from"./pending-status-6c49ad6a.js";var et=le({load_more:{id:"status.load_more",defaultMessage:"Load more"}}),tt=function(d){var a=d.disabled,u=d.maxId,c=d.onClick,g=de(),p=function(){return c(u)};return l("button",{className:"load-more load-gap",disabled:a,onClick:p,"aria-label":g.formatMessage(et.load_more)},void 0,l(be,{src:Se}))};const nt="/packs/assets/timeline-72a32d57.svg",oe={soapbox:async()=>(await te(()=>import("./soapbox-config-3230dc4e.js"),["packs/js/soapbox-config-3230dc4e.js","packs/index-3657f38e.js","packs/assets/index-09eb95bf.css"])).default,truth:async()=>(await te(()=>import("./truth-00a7ed84.js"),["packs/js/truth-00a7ed84.js","packs/index-3657f38e.js","packs/assets/index-09eb95bf.css"])).default},rt=async v=>{const d=v(),a=Ie(d),u=a.extensions.getIn(["ads","enabled"],!1)===!0,c=a.extensions.getIn(["ads","provider"],"soapbox");if(u&&oe[c])return oe[c]()},at=5*60*1e3,ot=(v,d=at)=>v.expires_at?new Date().getTime()>new Date(v.expires_at).getTime()-d:!1,ge={ads:["ads"]};function it(){const v=Ce(),d=async()=>v(async(c,g)=>{const p=await rt(g);return p?p.getAds(g):[]}),a=fe(ge.ads,d,{placeholderData:[]}),u=Ae(Me).parse(a.data).filter(c=>!ot(c));return{...a,data:u}}var st=function(d){var a=d.ad,u=_e(),c=je(),g=T.useRef(void 0),p=T.useRef(null),i=T.useState(!1),e=ke(i,2),n=e[0],o=e[1];fe(["ads","impression",a.impression],ze(regeneratorRuntime.mark(function f(){return regeneratorRuntime.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!a.impression){I.next=4;break}return I.next=3,Le.get(a.impression);case 3:return I.abrupt("return",I.sent);case 4:case"end":return I.stop()}},f)})),{cacheTime:1/0,staleTime:1/0});var t=function(){u.invalidateQueries(ge.ads)},r=function(){o(!n)},s=function(S){S.target&&p.current&&!p.current.contains(S.target)&&o(!1)};return T.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[p]),T.useEffect(function(){if(a.expires_at){var f=new Date(a.expires_at).getTime()-new Date().getTime();g.current=setTimeout(t,f)}return function(){g.current&&clearTimeout(g.current)}},[a.expires_at]),l("div",{className:"relative"},void 0,l(V,{className:"py-4",variant:"rounded"},void 0,l(N,{space:4},void 0,l(B,{alignItems:"center",space:3},void 0,l(Oe,{src:c.thumbnail,size:42}),l(N,{grow:!0},void 0,l(B,{space:1},void 0,l(F,{size:"sm",weight:"semibold",truncate:!0},void 0,c.title),l(Pe,{className:"h-4 w-4 stroke-accent-500",src:nt})),l(N,{},void 0,l(B,{alignItems:"center",space:1},void 0,l(F,{theme:"muted",size:"sm",truncate:!0},void 0,l(U,{id:"sponsored.subtitle",defaultMessage:"Sponsored post"}))))),l(N,{justifyContent:"center"},void 0,l(Ee,{iconClassName:"h-6 w-6 stroke-gray-600",src:De,onClick:r}))),l(Te,{card:a.card,onOpenMedia:function(){},horizontal:!0}))),n&&ve.createElement("div",{ref:p,className:"absolute right-5 top-5 max-w-[234px]"},l(V,{variant:"rounded"},void 0,l(N,{space:2},void 0,l(F,{size:"sm",weight:"bold"},void 0,l(U,{id:"sponsored.info.title",defaultMessage:"Why am I seeing this ad?"})),l(F,{size:"sm",theme:"muted"},void 0,a.reason?a.reason:l(U,{id:"sponsored.info.message",defaultMessage:"{siteTitle} displays ads to help fund our service.",values:{siteTitle:c.title}}))))))},ie=le({heading:{id:"feed_suggestions.heading",defaultMessage:"Suggested Profiles"},viewAll:{id:"feed_suggestions.view_all",defaultMessage:"View all"}}),ut=function(d){var a=d.accountId,u=$e(a),c=u.account;return c?l(N,{space:3,className:"w-52 shrink-0 rounded-md border border-solid border-gray-300 p-4 dark:border-gray-800 md:w-full md:shrink md:border-transparent md:p-0 dark:md:border-transparent"},void 0,l(pe,{to:"/@".concat(c.acct),title:c.acct},void 0,l(N,{space:3,className:"mx-auto w-40 md:w-24"},void 0,l("img",{src:c.avatar,className:"mx-auto block h-16 w-16 min-w-[56px] rounded-full object-cover",alt:c.acct}),l(N,{},void 0,l(B,{alignItems:"center",justifyContent:"center",space:1},void 0,l(F,{weight:"semibold",dangerouslySetInnerHTML:{__html:c.display_name_html},truncate:!0,align:"center",size:"sm",className:"max-w-[95%]"}),c.verified&&l(qe,{})),l(F,{theme:"muted",align:"center",size:"sm",truncate:!0},void 0,"@",c.acct)))),l("div",{className:"text-center"},void 0,l(Ge,{account:c}))):null},ct=function(d){d.statusId,d.onMoveUp,d.onMoveDown;var a=de(),u=ne(function(g){return g.suggestions.items}),c=ne(function(g){return g.suggestions.isLoading});return!c&&u.size===0?null:l(V,{size:"lg",variant:"rounded",className:"focusable space-y-6",tabIndex:0},void 0,l(B,{justifyContent:"between",alignItems:"center"},void 0,l(Re,{title:a.formatMessage(ie.heading)}),l(pe,{to:"/suggestions",className:"text-primary-600 hover:underline dark:text-accent-blue"},void 0,a.formatMessage(ie.viewAll))),l(Ne,{},void 0,l(B,{space:4,alignItems:"center",className:"overflow-x-auto md:space-x-0 lg:overflow-x-hidden"},void 0,u.slice(0,4).map(function(g){return l(ut,{accountId:g.account},g.account)}))))},H={exports:{}};H.exports;(function(v){(function(d,a,u){function c(e){var n=this,o=i();n.next=function(){var t=2091639*n.s0+n.c*23283064365386963e-26;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=t|0)},n.c=1,n.s0=o(" "),n.s1=o(" "),n.s2=o(" "),n.s0-=o(e),n.s0<0&&(n.s0+=1),n.s1-=o(e),n.s1<0&&(n.s1+=1),n.s2-=o(e),n.s2<0&&(n.s2+=1),o=null}function g(e,n){return n.c=e.c,n.s0=e.s0,n.s1=e.s1,n.s2=e.s2,n}function p(e,n){var o=new c(e),t=n&&n.state,r=o.next;return r.int32=function(){return o.next()*4294967296|0},r.double=function(){return r()+(r()*2097152|0)*11102230246251565e-32},r.quick=r,t&&(typeof t=="object"&&g(t,o),r.state=function(){return g(o,{})}),r}function i(){var e=4022871197,n=function(o){o=String(o);for(var t=0;t<o.length;t++){e+=o.charCodeAt(t);var r=.02519603282416938*e;e=r>>>0,r-=e,r*=e,e=r>>>0,r-=e,e+=r*4294967296}return(e>>>0)*23283064365386963e-26};return n}a&&a.exports?a.exports=p:u&&u.amd?u(function(){return p}):this.alea=p})(q,v,!1)})(H);var dt=H.exports,W={exports:{}};W.exports;(function(v){(function(d,a,u){function c(i){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},i===(i|0)?e.x=i:n+=i;for(var o=0;o<n.length+64;o++)e.x^=n.charCodeAt(o)|0,e.next()}function g(i,e){return e.x=i.x,e.y=i.y,e.z=i.z,e.w=i.w,e}function p(i,e){var n=new c(i),o=e&&e.state,t=function(){return(n.next()>>>0)/4294967296};return t.double=function(){do var r=n.next()>>>11,s=(n.next()>>>0)/4294967296,f=(r+s)/(1<<21);while(f===0);return f},t.int32=n.next,t.quick=t,o&&(typeof o=="object"&&g(o,n),t.state=function(){return g(n,{})}),t}a&&a.exports?a.exports=p:u&&u.amd?u(function(){return p}):this.xor128=p})(q,v,!1)})(W);var lt=W.exports,K={exports:{}};K.exports;(function(v){(function(d,a,u){function c(i){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^(t^t<<1))|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,i===(i|0)?e.x=i:n+=i;for(var o=0;o<n.length+64;o++)e.x^=n.charCodeAt(o)|0,o==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function g(i,e){return e.x=i.x,e.y=i.y,e.z=i.z,e.w=i.w,e.v=i.v,e.d=i.d,e}function p(i,e){var n=new c(i),o=e&&e.state,t=function(){return(n.next()>>>0)/4294967296};return t.double=function(){do var r=n.next()>>>11,s=(n.next()>>>0)/4294967296,f=(r+s)/(1<<21);while(f===0);return f},t.int32=n.next,t.quick=t,o&&(typeof o=="object"&&g(o,n),t.state=function(){return g(n,{})}),t}a&&a.exports?a.exports=p:u&&u.amd?u(function(){return p}):this.xorwow=p})(q,v,!1)})(K);var ft=K.exports,Q={exports:{}};Q.exports;(function(v){(function(d,a,u){function c(i){var e=this;e.next=function(){var o=e.x,t=e.i,r,s;return r=o[t],r^=r>>>7,s=r^r<<24,r=o[t+1&7],s^=r^r>>>10,r=o[t+3&7],s^=r^r>>>3,r=o[t+4&7],s^=r^r<<7,r=o[t+7&7],r=r^r<<13,s^=r^r<<9,o[t]=s,e.i=t+1&7,s};function n(o,t){var r,s=[];if(t===(t|0))s[0]=t;else for(t=""+t,r=0;r<t.length;++r)s[r&7]=s[r&7]<<15^t.charCodeAt(r)+s[r+1&7]<<13;for(;s.length<8;)s.push(0);for(r=0;r<8&&s[r]===0;++r);for(r==8?s[7]=-1:s[r],o.x=s,o.i=0,r=256;r>0;--r)o.next()}n(e,i)}function g(i,e){return e.x=i.x.slice(),e.i=i.i,e}function p(i,e){i==null&&(i=+new Date);var n=new c(i),o=e&&e.state,t=function(){return(n.next()>>>0)/4294967296};return t.double=function(){do var r=n.next()>>>11,s=(n.next()>>>0)/4294967296,f=(r+s)/(1<<21);while(f===0);return f},t.int32=n.next,t.quick=t,o&&(o.x&&g(o,n),t.state=function(){return g(n,{})}),t}a&&a.exports?a.exports=p:u&&u.amd?u(function(){return p}):this.xorshift7=p})(q,v,!1)})(Q);var vt=Q.exports,Y={exports:{}};Y.exports;(function(v){(function(d,a,u){function c(i){var e=this;e.next=function(){var o=e.w,t=e.X,r=e.i,s,f;return e.w=o=o+1640531527|0,f=t[r+34&127],s=t[r=r+1&127],f^=f<<13,s^=s<<17,f^=f>>>15,s^=s>>>12,f=t[r]=f^s,e.i=r,f+(o^o>>>16)|0};function n(o,t){var r,s,f,S,I,z=[],D=128;for(t===(t|0)?(s=t,t=null):(t=t+"\0",s=0,D=Math.max(D,t.length)),f=0,S=-32;S<D;++S)t&&(s^=t.charCodeAt((S+32)%t.length)),S===0&&(I=s),s^=s<<10,s^=s>>>15,s^=s<<4,s^=s>>>13,S>=0&&(I=I+1640531527|0,r=z[S&127]^=s+I,f=r==0?f+1:0);for(f>=128&&(z[(t&&t.length||0)&127]=-1),f=127,S=4*128;S>0;--S)s=z[f+34&127],r=z[f=f+1&127],s^=s<<13,r^=r<<17,s^=s>>>15,r^=r>>>12,z[f]=s^r;o.w=I,o.X=z,o.i=f}n(e,i)}function g(i,e){return e.i=i.i,e.w=i.w,e.X=i.X.slice(),e}function p(i,e){i==null&&(i=+new Date);var n=new c(i),o=e&&e.state,t=function(){return(n.next()>>>0)/4294967296};return t.double=function(){do var r=n.next()>>>11,s=(n.next()>>>0)/4294967296,f=(r+s)/(1<<21);while(f===0);return f},t.int32=n.next,t.quick=t,o&&(o.X&&g(o,n),t.state=function(){return g(n,{})}),t}a&&a.exports?a.exports=p:u&&u.amd?u(function(){return p}):this.xor4096=p})(q,v,!1)})(Y);var pt=Y.exports,J={exports:{}};J.exports;(function(v){(function(d,a,u){function c(i){var e=this,n="";e.next=function(){var t=e.b,r=e.c,s=e.d,f=e.a;return t=t<<25^t>>>7^r,r=r-s|0,s=s<<24^s>>>8^f,f=f-t|0,e.b=t=t<<20^t>>>12^r,e.c=r=r-s|0,e.d=s<<16^r>>>16^f,e.a=f-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,i===Math.floor(i)?(e.a=i/4294967296|0,e.b=i|0):n+=i;for(var o=0;o<n.length+20;o++)e.b^=n.charCodeAt(o)|0,e.next()}function g(i,e){return e.a=i.a,e.b=i.b,e.c=i.c,e.d=i.d,e}function p(i,e){var n=new c(i),o=e&&e.state,t=function(){return(n.next()>>>0)/4294967296};return t.double=function(){do var r=n.next()>>>11,s=(n.next()>>>0)/4294967296,f=(r+s)/(1<<21);while(f===0);return f},t.int32=n.next,t.quick=t,o&&(typeof o=="object"&&g(o,n),t.state=function(){return g(n,{})}),t}a&&a.exports?a.exports=p:u&&u.amd?u(function(){return p}):this.tychei=p})(q,v,!1)})(J);var gt=J.exports,xe={exports:{}};(function(v){(function(d,a,u){var c=256,g=6,p=52,i="random",e=u.pow(c,g),n=u.pow(2,p),o=n*2,t=c-1,r;function s(m,h,C){var b=[];h=h==!0?{entropy:!0}:h||{};var y=z(I(h.entropy?[m,R(a)]:m??D(),3),b),A=new f(b),_=function(){for(var k=A.g(g),L=e,O=0;k<n;)k=(k+O)*c,L*=c,O=A.g(1);for(;k>=o;)k/=2,L/=2,O>>>=1;return(k+O)/L};return _.int32=function(){return A.g(4)|0},_.quick=function(){return A.g(4)/4294967296},_.double=_,z(R(A.S),a),(h.pass||C||function(k,L,O,P){return P&&(P.S&&S(P,A),k.state=function(){return S(A,{})}),O?(u[i]=k,L):k})(_,y,"global"in h?h.global:this==u,h.state)}function f(m){var h,C=m.length,b=this,y=0,A=b.i=b.j=0,_=b.S=[];for(C||(m=[C++]);y<c;)_[y]=y++;for(y=0;y<c;y++)_[y]=_[A=t&A+m[y%C]+(h=_[y])],_[A]=h;(b.g=function(k){for(var L,O=0,P=b.i,X=b.j,$=b.S;k--;)L=$[P=t&P+1],O=O*c+$[t&($[P]=$[X=t&X+L])+($[X]=L)];return b.i=P,b.j=X,O})(c)}function S(m,h){return h.i=m.i,h.j=m.j,h.S=m.S.slice(),h}function I(m,h){var C=[],b=typeof m,y;if(h&&b=="object")for(y in m)try{C.push(I(m[y],h-1))}catch{}return C.length?C:b=="string"?m:m+"\0"}function z(m,h){for(var C=m+"",b,y=0;y<C.length;)h[t&y]=t&(b^=h[t&y]*19)+C.charCodeAt(y++);return R(h)}function D(){try{var m;return r&&(m=r.randomBytes)?m=m(c):(m=new Uint8Array(c),(d.crypto||d.msCrypto).getRandomValues(m)),R(m)}catch{var h=d.navigator,C=h&&h.plugins;return[+new Date,d,C,d.screen,R(a)]}}function R(m){return String.fromCharCode.apply(0,m)}if(z(u.random(),a),v.exports){v.exports=s;try{r=Xe}catch{}}else u["seed"+i]=s})(typeof self<"u"?self:q,[],Math)})(xe);var xt=xe.exports,mt=dt,ht=lt,wt=ft,yt=vt,bt=pt,St=gt,G=xt;G.alea=mt;G.xor128=ht;G.xorwow=wt;G.xorshift7=yt;G.xor4096=bt;G.tychei=St;var It=G;const Ct=Fe(It),At=(v,d,a)=>{const u=Mt(a),c=Math.floor(d/u.pageSize),g=d%u.pageSize,p=Ct(`${u.seed}-page-${c}`),i=Math.floor(p()*(u.range[1]-u.range[0]))+u.range[0];if(g===i)return v[c%v.length]},Mt=v=>{const{seed:d,range:a,pageSize:u}=v&&typeof v=="object"?v:{};return{seed:typeof d=="string"?d:"",range:Array.isArray(a)?[Number(a[0]),Number(a[1])]:[2,6],pageSize:typeof u=="number"?u:20}},_t=(v,d,a)=>{const u=jt(a),c=v?Math.floor(d/u.interval)%v.length:0,g=v?v[c]:void 0;return(d+1)%u.interval===0?g:void 0},jt=v=>{const{interval:d}=v&&typeof v=="object"?v:{};return{interval:typeof d=="number"?d:20}},se={linear:_t,abovefold:At};var kt=["statusIds","lastStatusId","featuredStatusIds","divideType","onLoadMore","timelineId","isLoading","isPartial","showAds","showGroup"];function ue(v,d){var a=Object.keys(v);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(v);d&&(u=u.filter(function(c){return Object.getOwnPropertyDescriptor(v,c).enumerable})),a.push.apply(a,u)}return a}function ce(v){for(var d=1;d<arguments.length;d++){var a=arguments[d]!=null?arguments[d]:{};d%2?ue(Object(a),!0).forEach(function(u){Ye(v,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(a)):ue(Object(a)).forEach(function(u){Object.defineProperty(v,u,Object.getOwnPropertyDescriptor(a,u))})}return v}var Et=function(d){var a=d.statusIds,u=d.lastStatusId,c=d.featuredStatusIds,g=d.divideType,p=g===void 0?"border":g,i=d.onLoadMore,e=d.timelineId,n=d.isLoading,o=d.isPartial,t=d.showAds,r=t===void 0?!1:t,s=d.showGroup,f=s===void 0?!0:s,S=Be(d,kt),I=it(),z=I.data,D=Ue(),R=String(D.extensions.getIn(["ads","algorithm",0])),m=D.extensions.getIn(["ads","algorithm",1],Ve()).toJS(),h=T.useRef(null),C=T.useRef(He()),b=function(){return(c==null?void 0:c.size)||0},y=function(x,w){return w?(c==null?void 0:c.keySeq().findIndex(function(j){return j===x}))||0:a.keySeq().findIndex(function(j){return j===x})+b()},A=function(x){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,j=y(x,w)-1;L(j)},_=function(x){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,j=y(x,w)+1;L(j)},k=T.useCallback(We(function(){var M=u||a.last();i&&M&&i(M.replace("末suggestions-",""))},300,{leading:!0}),[i,u,a.last()]),L=function(x){var w;(w=h.current)===null||w===void 0||w.scrollIntoView({index:x,behavior:"smooth",done:function(){var E=document.querySelector('#status-list [data-index="'.concat(x,'"] .focusable'));E==null||E.focus()}})},O=function(x){var w=a.toList(),j=w.get(x+1),E=w.get(x-1);return x<1||!j||!E||!i?null:l(tt,{disabled:n,maxId:E,onClick:i},"gap:"+j)},P=function(x){return l(ae,{id:x,onMoveUp:A,onMoveDown:_,contextType:e,showGroup:f,variant:p==="border"?"slim":"rounded"},x)},X=function(x,w){return l(st,{ad:x},"ad-".concat(w))},$=function(x){var w=x.replace(/^末pending-/,"");return l(Ze,{idempotencyKey:w},x)},me=function(){return c?c.toArray().map(function(x){return l(ae,{id:x,featured:!0,onMoveUp:A,onMoveDown:_,contextType:e,showGroup:f,variant:p==="border"?"slim":"default"},"f-".concat(x))}):[]},he=function(x){return l(ct,{statusId:x,onMoveUp:A,onMoveDown:_},"suggestions")},we=function(){return n||a.size>0?a.toList().reduce(function(x,w,j){if(r&&z){var E,Z=(E=se[R])===null||E===void 0?void 0:E.call(se,z,j,ce(ce({},m),{},{seed:C.current}));Z&&x.push(X(Z,j))}if(w===null){var ee=O(j);ee&&x.push(ee)}else w.startsWith("末suggestions-")?D.feedInjection&&x.push(he(w)):w.startsWith("末pending-")?x.push($(w)):x.push(P(w));return x},[]):[]},ye=function(){var x=me(),w=we();return x&&w?x.concat(w):w};return o?l("div",{className:"regeneration-indicator"},void 0,l("div",{},void 0,l("div",{className:"regeneration-indicator__label"},void 0,l(U,{id:"regeneration_indicator.label",tagName:"strong",defaultMessage:"Loading…"}),l(U,{id:"regeneration_indicator.sublabel",defaultMessage:"Your home feed is being prepared!"})))):ve.createElement(Je,Ke({id:"status-list",key:"scrollable-list",isLoading:n,showLoading:n&&a.size===0,onLoadMore:k,placeholderComponent:function(){return l(Qe,{showPrivacyIndicator:!0,variant:p==="border"?"slim":"rounded"})},placeholderCount:20,ref:h,className:re("divide-y divide-solid divide-gray-200 dark:divide-gray-800",{"divide-none":p!=="border"}),itemClassName:re({"pb-3":p!=="border"})},S),ye())};export{Et as S};
