import{d as C,u as P,r as i,aP as T,q as E,ax as M,Q as G,aQ as L,a as t,aR as y,aG as B,aS as H,X as w,w as N,o as Q,aT as $,aU as j}from"../index-a37c6344.js";import{P as q}from"./pull-to-refresh-7223c3f5.js";import{T as F}from"./thread-d01cb089.js";import"./scrollable-list-4cc1a2a0.js";import"./index-cf9b12ae.js";import"./load-more-96db1369.js";import"./pending-status-499f7b34.js";import"./poll-preview-e73cac36.js";import"./noop-cbb68591.js";import"./status-container-5491258f.js";var S=Q({title:{id:"status.title",defaultMessage:"Post Details"},titleDirect:{id:"status.title_direct",defaultMessage:"Direct message"},deleteConfirm:{id:"confirmations.delete.confirm",defaultMessage:"Delete"},deleteHeading:{id:"confirmations.delete.heading",defaultMessage:"Delete post"},deleteMessage:{id:"confirmations.delete.message",defaultMessage:"Are you sure you want to delete this post?"},redraftConfirm:{id:"confirmations.redraft.confirm",defaultMessage:"Delete & redraft"},redraftHeading:{id:"confirmations.redraft.heading",defaultMessage:"Delete & redraft"},redraftMessage:{id:"confirmations.redraft.message",defaultMessage:"Are you sure you want to delete this post and re-draft it? Favorites and reposts will be lost, and replies to the original post will be orphaned."},blockConfirm:{id:"confirmations.block.confirm",defaultMessage:"Block"},revealAll:{id:"status.show_more_all",defaultMessage:"Show more for all"},hideAll:{id:"status.show_less_all",defaultMessage:"Show less for all"},detailedStatus:{id:"status.detailed_status",defaultMessage:"Detailed conversation view"},replyConfirm:{id:"confirmations.reply.confirm",defaultMessage:"Reply"},replyMessage:{id:"confirmations.reply.message",defaultMessage:"Replying now will overwrite the message you are currently composing. Are you sure you want to proceed?"},blockAndReport:{id:"confirmations.block.block_and_report",defaultMessage:"Block & Report"}}),ae=function(s){var l=C(),_=P(),D=i.useCallback(T(),[]),e=E(function(a){return D(a,{id:s.params.statusId})}),R=i.useState(!!e),u=M(R,2),b=u[0],d=u[1],k=i.useState(),c=M(k,2),o=c[0],f=c[1],m=function(){var a=$(regeneratorRuntime.mark(function n(){var g,p,h,v;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return g=s.params,p=g.statusId,r.next=4,l(j(p));case 4:h=r.sent,v=h.next,f(v);case 7:case"end":return r.stop()}},n)}));return function(){return a.apply(this,arguments)}}();i.useEffect(function(){m().then(function(){d(!0)}).catch(function(){d(!0)})},[s.params.statusId]);var I=i.useCallback(G(function(){o&&e&&l(L(e.id,o)).then(function(a){var n=a.next;f(n)}).catch(function(){})},300,{leading:!0}),[o,e]),x=function(){return m()};if(e!=null&&e.event)return t(y,{to:"/@".concat(e.getIn(["account","acct"]),"/events/").concat(e.id)});if(!e&&b)return t(B,{});if(!e)return t(w,{},void 0,t(H,{showPrivacyIndicator:!0}));if(e.group&&N(e.group)==="object"&&e.group.slug&&!s.params.groupSlug)return t(y,{to:"/group/".concat(e.group.slug,"/posts/").concat(s.params.statusId)});var A=function(){return e.visibility==="direct"?S.titleDirect:S.title};return t(w,{label:_.formatMessage(A())},void 0,t(q,{onRefresh:x},void 0,t(F,{status:e,next:o,handleLoadMore:I})))};export{ae as default};
