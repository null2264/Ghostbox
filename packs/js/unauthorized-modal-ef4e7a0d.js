import{u as P,a9 as T,d as k,t as F,el as z,q as N,aq as U,g as D,r as H,ax as j,a as e,a3 as q,y as c,F as t,b5 as d,bx as y,bH as J,bJ as V,ae as B,o as Y,em as Z,bs as G}from"../index-ce2327d9.js";var A=Y({close:{id:"lightbox.close",defaultMessage:"Close"},accountPlaceholder:{id:"remote_interaction.account_placeholder",defaultMessage:"Enter your username@domain you want to act from"},userNotFoundError:{id:"remote_interaction.user_not_found_error",defaultMessage:"Couldn't find given user"}}),Q=function(s){var a=s.action,u=s.onClose,C=s.account,S=s.ap_id,m=P(),f=T(),I=k(),v=F(),R=z(),r=R.isOpen,b=N(function(n){var o;return(o=U(n,C))===null||o===void 0?void 0:o.display_name}),g=D(),E=H.useState(""),_=j(E,2),p=_[0],w=_[1],x=function(o){w(o.target.value)},l=function(){u("UNAUTHORIZED")},L=function(o){o.preventDefault(),I(Z(S,p)).then(function(i){window.open(i,"_new","noopener,noreferrer"),u("UNAUTHORIZED")}).catch(function(i){i.message==="Couldn't find user"&&G.error(m.formatMessage(A.userNotFoundError))})},M=function(){f.push("/login"),l()},h=function(){f.push("/signup"),l()},O=function(){var o,i;return a==="FOLLOW"?(o=e(t,{id:"remote_interaction.follow_title",defaultMessage:"Follow {user} remotely",values:{user:b}}),i=e(t,{id:"remote_interaction.follow",defaultMessage:"Proceed to follow"})):a==="REPLY"?(o=e(t,{id:"remote_interaction.reply_title",defaultMessage:"Reply to a post remotely"}),i=e(t,{id:"remote_interaction.reply",defaultMessage:"Proceed to reply"})):a==="REBLOG"?(o=e(t,{id:"remote_interaction.reblog_title",defaultMessage:"Reblog a post remotely"}),i=e(t,{id:"remote_interaction.reblog",defaultMessage:"Proceed to repost"})):a==="FAVOURITE"?(o=e(t,{id:"remote_interaction.favourite_title",defaultMessage:"Like a post remotely"}),i=e(t,{id:"remote_interaction.favourite",defaultMessage:"Proceed to like"})):a==="DISLIKE"?(o=e(t,{id:"remote_interaction.dislike_title",defaultMessage:"Dislike a post remotely"}),i=e(t,{id:"remote_interaction.dislike",defaultMessage:"Proceed to dislike"})):a==="POLL_VOTE"?(o=e(t,{id:"remote_interaction.poll_vote_title",defaultMessage:"Vote in a poll remotely"}),i=e(t,{id:"remote_interaction.poll_vote",defaultMessage:"Proceed to vote"})):a==="JOIN"&&(o=e(t,{id:"remote_interaction.event_join_title",defaultMessage:"Join an event remotely"}),i=e(t,{id:"remote_interaction.event_join",defaultMessage:"Proceed to join"})),e(y,{title:o,onClose:l,confirmationAction:M,confirmationText:e(d,{id:"account-Action--login"},void 0,e("span",{},void 0,"Sign in")),secondaryAction:r?h:void 0,secondaryText:r?e(d,{id:"account-Action--register"},void 0,e("span",{},void 0,"Sign up")):void 0},void 0,e("div",{className:"remote-interaction-modal__content"},void 0,e(J,{className:"remote-interaction-modal__fields",onSubmit:L},void 0,e(V,{placeholder:m.formatMessage(A.accountPlaceholder),name:"remote_follow[acct]",value:p,autoCorrect:"off",autoCapitalize:"off",onChange:x,required:!0}),e(B,{type:"submit",theme:"primary"},void 0,i)),e("div",{className:"remote-interaction-modal__divider"},void 0,e(c,{align:"center"},void 0,e(t,{id:"remote_interaction.divider",defaultMessage:"or"}))),r&&e(c,{size:"lg",weight:"medium"},void 0,e(t,{id:"unauthorized_modal.title",defaultMessage:"Sign up for {site_title}",values:{site_title:v.title}}))))};return a&&g.remoteInteractions&&g.federating?O():e(y,{title:e(t,{id:"unauthorized_modal.title",defaultMessage:"Sign up for {site_title}",values:{site_title:v.title}}),onClose:l,confirmationAction:M,confirmationText:e(d,{id:"account-Action--login"},void 0,e("span",{},void 0,"Sign in")),secondaryAction:r?h:void 0,secondaryText:r?e(d,{id:"account-Action--register"},void 0,e("span",{},void 0,"Sign up")):void 0},void 0,e(q,{},void 0,e(c,{},void 0,e(t,{id:"unauthorized_modal.text",defaultMessage:"You need to be logged in to do that."}))))};export{Q as default};
