import{r as g,at as k,a,a5 as M,H as $,dp as C,F as S,y as F,W as I,aG as G,aP as p}from"../index-be605fd2.js";const H="/packs/assets/player-stop-filled-f2e06734.svg";var W=function(r){var u=r.onAuthorize,m=r.onReject,l=r.countdown,f=g.useState("pending"),v=k(f,2),i=v[0],h=v[1],d=g.useRef(),c=g.useRef(),B=g.useState(0),b=k(B,2),R=b[0],j=b[1],E=function(){var e=1;c.current=setInterval(function(){e++;var o=e*3.6;j(o),o>=360&&(clearInterval(c.current),j(0))},l/100)};function w(s,e,o){if(i===s)c.current&&clearInterval(c.current),d.current&&clearTimeout(d.current),h("pending");else{var t=function(){var q=p(regeneratorRuntime.mark(function A(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o();case 3:h(e),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),n.t0&&console.error(n.t0);case 9:case"end":return n.stop()}},A,null,[[0,6]])}));return function(){return q.apply(this,arguments)}}();typeof l=="number"?(h(s),d.current=setTimeout(t,l),E()):t()}}var N=function(){var s=p(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w("authorizing","authorized",u));case 1:case"end":return t.stop()}},e)}));return function(){return s.apply(this,arguments)}}(),L=function(){var s=p(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",w("rejecting","rejected",m));case 1:case"end":return t.stop()}},e)}));return function(){return s.apply(this,arguments)}}(),z=function(e){return i==="authorizing"&&e==="authorizing"?{background:"conic-gradient(rgb(var(--color-primary-500)) ".concat(R,"deg, rgb(var(--color-primary-500) / 0.1) 0deg)")}:i==="rejecting"&&e==="rejecting"?{background:"conic-gradient(rgb(var(--color-danger-600)) ".concat(R,"deg, rgb(var(--color-danger-600) / 0.1) 0deg)")}:{}};switch(g.useEffect(function(){return function(){d.current&&clearTimeout(d.current),c.current&&clearInterval(c.current)}},[]),i){case"authorized":return a(P,{text:a(S,{id:"authorize.success",defaultMessage:"Approved"})});case"rejected":return a(P,{text:a(S,{id:"reject.success",defaultMessage:"Rejected"})});default:return a($,{space:3,alignItems:"center"},void 0,a(T,{theme:"danger",icon:M,action:L,isLoading:i==="rejecting",disabled:i==="authorizing",style:z("rejecting")}),a(T,{theme:"primary",icon:C,action:N,isLoading:i==="authorizing",disabled:i==="rejecting",style:z("authorizing")}))}},P=function(r){var u=r.text;return a("div",{className:"rounded-full bg-gray-100 px-4 py-2 dark:bg-gray-800"},void 0,a(F,{theme:"muted",size:"sm"},void 0,u))},T=function(r){var u=r.theme,m=r.icon,l=r.action,f=r.isLoading,v=r.style,i=r.disabled;return a("div",{className:"relative"},void 0,a("div",{style:v,className:I({"flex h-11 w-11 items-center justify-center rounded-full":!0,"bg-danger-600/10":u==="danger","bg-primary-500/10":u==="primary"})},void 0,a(G,{src:f?H:m,onClick:l,theme:"seamless",className:"h-10 w-10 items-center justify-center bg-white focus:!ring-0 dark:!bg-gray-900",iconClassName:I("h-6 w-6",{"text-primary-500":u==="primary","text-danger-600":u==="danger"}),disabled:i})))};export{W as A};
