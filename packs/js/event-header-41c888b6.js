import{a as e,a3 as M,eW as k,eX as h,u as ie,d as se,a9 as oe,g as re,f as le,bc as ce,R as v,di as de,H as m,I as C,F as f,L as S,cA as ue,jW as ge,d5 as ve,jX as me,hF as fe,y as pe,fP as ke,fQ as he,aK as Me,cr as _e,fR as be,jY as Ce,fT as Re,jZ as xe,az as Se,aA as Pe,ae as ye,j_ as qe,o as Ne,aH as g,O as Ae,hG as Ee,ci as we,j$ as De,hT as Ie,k as Te,k0 as Be,ac as He,ad as Oe,aL as R,v as Le,D as Fe,dc as je,hY as Ue,fU as P,gs as ze,k1 as Qe,J as Ve,jr as We,k2 as Xe,k3 as Ye,k4 as Ze,k5 as Ge,k6 as Je,k7 as Ke,k8 as $e,k9 as ea,ka as aa,kb as ta,kc as na,c7 as y,gr as q,bQ as N,kd as ia,gQ as sa,ke as oa}from"../index-5c94650a.js";import{d as ra}from"./download-2e3dfb39.js";const la="/packs/assets/flag-3-9139db0c.svg",ca="/packs/assets/calendar-plus-57e48219.svg";var da=function(){var _=h(5,25),a=h(5,30),n=h(5,30),o=h(5,30);return e(M,{className:"animate-pulse text-primary-50 dark:text-primary-800",space:2},void 0,e("p",{className:"text-lg"},void 0,k(_)),e(M,{space:1},void 0,e("p",{},void 0,k(a)),e("p",{},void 0,k(n)),e("p",{},void 0,k(o))))},s=Ne({bannerHeader:{id:"event.banner",defaultMessage:"Event banner"},exportIcs:{id:"event.export_ics",defaultMessage:"Export to your calendar"},copy:{id:"event.copy",defaultMessage:"Copy link to event"},external:{id:"event.external",defaultMessage:"View event on {domain}"},bookmark:{id:"status.bookmark",defaultMessage:"Bookmark"},unbookmark:{id:"status.unbookmark",defaultMessage:"Remove bookmark"},quotePost:{id:"event.quote",defaultMessage:"Quote event"},reblog:{id:"event.reblog",defaultMessage:"Repost event"},unreblog:{id:"event.unreblog",defaultMessage:"Un-repost event"},pin:{id:"status.pin",defaultMessage:"Pin on profile"},unpin:{id:"status.unpin",defaultMessage:"Unpin from profile"},delete:{id:"status.delete",defaultMessage:"Delete"},mention:{id:"status.mention",defaultMessage:"Mention @{name}"},chat:{id:"status.chat",defaultMessage:"Chat with @{name}"},direct:{id:"status.direct",defaultMessage:"Direct message @{name}"},mute:{id:"account.mute",defaultMessage:"Mute @{name}"},report:{id:"status.report",defaultMessage:"Report @{name}"},adminAccount:{id:"status.admin_account",defaultMessage:"Moderate @{name}"},adminStatus:{id:"status.admin_status",defaultMessage:"Open this post in the moderation interface"},markStatusSensitive:{id:"admin.statuses.actions.mark_status_sensitive",defaultMessage:"Mark post sensitive"},markStatusNotSensitive:{id:"admin.statuses.actions.mark_status_not_sensitive",defaultMessage:"Mark post not sensitive"},deleteStatus:{id:"admin.statuses.actions.delete_status",defaultMessage:"Delete post"},blockConfirm:{id:"confirmations.block.confirm",defaultMessage:"Block"},blockAndReport:{id:"confirmations.block.block_and_report",defaultMessage:"Block & Report"},deleteConfirm:{id:"confirmations.delete_event.confirm",defaultMessage:"Delete"},deleteHeading:{id:"confirmations.delete_event.heading",defaultMessage:"Delete event"},deleteMessage:{id:"confirmations.delete_event.message",defaultMessage:"Are you sure you want to delete this event?"}}),va=function(_){var a=_.status,n=ie(),o=se(),E=oe(),p=re(),w=le(),D=ce(),c=D.account,I=c?c.staff:!1,T=c?c.admin:!1;if(!a||!a.event)return v.createElement(v.Fragment,null,e("div",{className:"-mx-4 -mt-4"},void 0,e("div",{className:"relative h-32 w-full bg-gray-200 dark:bg-gray-900/50 md:rounded-t-xl lg:h-48"})),e(da,{}));var l=a.account,d=a.event,b=d.banner,u=l.username,B=function(r){r.preventDefault(),r.stopPropagation(),o(g("MEDIA",{media:Ae([d.banner])}))},H=function(){o(Ye(a.id)).then(function(r){var i=r.data;ra(i,"calendar.ics")}).catch(function(){})},O=function(){var r=a.uri;Ze(r)},L=function(){window.open(a.uri,"_blank")},F=function(){o(Ge(a))},j=function(){var r=function(){return o(oa(a))},i=w.get("boostModal");i?o(g("BOOST",{status:a,onReblog:r})):r()},U=function(){o(Je(a))},z=function(){o(Ke(a))},Q=function(){o(g("CONFIRM",{icon:R,heading:n.formatMessage(s.deleteHeading),message:n.formatMessage(s.deleteMessage),confirm:n.formatMessage(s.deleteConfirm),onConfirm:function(){return o($e(a.id))}}))},V=function(){o(ea(l))},W=function(){o(aa(l.id,E))},X=function(){o(ta(l))},Y=function(){o(na(l))},Z=function(){o(g("CONFIRM",{icon:P,heading:e(f,{id:"confirmations.block.heading",defaultMessage:"Block @{name}",values:{name:l.acct}}),message:e(f,{id:"confirmations.block.message",defaultMessage:"Are you sure you want to block {name}?",values:{name:e("strong",{},void 0,"@",l.acct)}}),confirm:n.formatMessage(s.blockConfirm),onConfirm:function(){return o(y(l.id))},secondary:n.formatMessage(s.blockAndReport),onSecondary:function(){o(y(l.id)),o(q(N.STATUS,l,{status:a}))}}))},G=function(){o(q(N.STATUS,l,{status:a}))},J=function(){o(g("ACCOUNT_MODERATION",{accountId:l.id}))},K=function(){window.open("/pleroma/admin/#/statuses/".concat(a.id,"/"),"_blank")},$=function(){o(ia(n,a.id,a.sensitive))},ee=function(){o(sa(n,a.id))},ae=function(){var r=l.fqn.split("@")[1],i=[{text:n.formatMessage(s.exportIcs),action:H,icon:ca},{text:n.formatMessage(s.copy),action:O,icon:Ee}];return p.federating&&!l.local&&i.push({text:n.formatMessage(s.external,{domain:r}),action:L,icon:we}),c&&(p.bookmarks&&i.push({text:n.formatMessage(a.bookmarked?s.unbookmark:s.bookmark),action:F,icon:a.bookmarked?De:Ie}),["public","unlisted"].includes(a.visibility)&&(i.push({text:n.formatMessage(a.reblogged?s.unreblog:s.reblog),action:j,icon:Te}),p.quotePosts&&i.push({text:n.formatMessage(s.quotePost),action:U,icon:Be})),i.push(null),c.id===l.id?(["public","unlisted"].includes(a.visibility)&&i.push({text:n.formatMessage(a.pinned?s.unpin:s.pin),action:z,icon:a.pinned?He:Oe}),i.push({text:n.formatMessage(s.delete),action:Q,icon:R,destructive:!0})):(i.push({text:n.formatMessage(s.mention,{name:u}),action:V,icon:Le}),a.getIn(["account","pleroma","accepts_chat_messages"])===!0?i.push({text:n.formatMessage(s.chat,{name:u}),action:W,icon:Fe}):p.privacyScopes&&i.push({text:n.formatMessage(s.direct,{name:u}),action:X,icon:je}),i.push(null),i.push({text:n.formatMessage(s.mute,{name:u}),action:Y,icon:Ue}),i.push({fluent:{id:"account-StatusAction--block--MenuItem",vars:{name:u}},text:"Block @".concat(u),action:Z,icon:P}),i.push({text:n.formatMessage(s.report,{name:u}),action:G,icon:ze})),I&&(i.push(null),i.push({text:n.formatMessage(s.adminAccount,{name:l.username}),action:J,icon:Qe}),T&&i.push({text:n.formatMessage(s.adminStatus),action:K,icon:Ve}),i.push({text:n.formatMessage(a.sensitive===!1?s.markStatusSensitive:s.markStatusNotSensitive),action:$,icon:We}),l.id!==(c==null?void 0:c.id)&&i.push({text:n.formatMessage(s.deleteStatus),action:ee,icon:R,destructive:!0}))),i},te=function(r){r.stopPropagation(),o(Xe(a.id))},ne=function(r){r.preventDefault(),r.stopPropagation(),o(c?g("EVENT_PARTICIPANTS",{statusId:a.id}):g("UNAUTHORIZED"))};return v.createElement(v.Fragment,null,e("div",{className:"-mx-4 -mt-4"},void 0,e("div",{className:"relative h-32 w-full bg-gray-200 dark:bg-gray-900/50 md:rounded-t-xl lg:h-48"},void 0,b&&e("a",{href:b.url,onClick:B,target:"_blank"},void 0,e(de,{src:b.url,alt:n.formatMessage(s.bannerHeader),className:"absolute inset-0 h-full object-cover md:rounded-t-xl"})))),e(M,{space:2},void 0,e(m,{className:"w-full",alignItems:"start",space:2},void 0,e(pe,{className:"grow",size:"lg",weight:"bold"},void 0,d.name),e(ke,{},void 0,e(he,{as:Me,src:_e,theme:"outlined",className:"h-[30px] px-2",iconClassName:"h-4 w-4",children:null}),e(be,{},void 0,ae().map(function(t,r){if(typeof(t==null?void 0:t.text)>"u")return e(Ce,{},r);var i=t.action?Re:xe,x=t.action?{onSelect:t.action}:{to:t.to,as:S,target:t.target||"_self"};return v.createElement(i,Se({key:r},x,{className:"group"}),e("div",{className:"flex items-center"},void 0,t.icon&&e(Pe,{src:t.icon,className:"mr-3 h-5 w-5 flex-none text-gray-400 group-hover:text-gray-500"}),e("div",{className:"truncate"},void 0,t.text)))}))),l.id===(c==null?void 0:c.id)?e(ye,{size:"sm",theme:"secondary",onClick:te},void 0,e(f,{id:"event.manage",defaultMessage:"Manage"})):e(qe,{status:a})),e(M,{space:1},void 0,e(m,{alignItems:"center",space:2},void 0,e(C,{src:la}),e("span",{},void 0,e(f,{id:"event.organized_by",defaultMessage:"Organized by {name}",values:{name:e(S,{className:"mention inline-block",to:"/@".concat(l.acct)},void 0,e(m,{space:1,alignItems:"center",grow:!0},void 0,e("span",{dangerouslySetInnerHTML:{__html:l.display_name_html}}),l.verified&&e(ue,{})))}}))),e(m,{alignItems:"center",space:2},void 0,e(C,{src:ge}),e("a",{href:"#",className:"hover:underline",onClick:ne},void 0,e("span",{},void 0,e(f,{id:"event.participants",defaultMessage:"{count} {rawCount, plural, one {person} other {people}} going",values:{rawCount:d.participants_count||0,count:ve(d.participants_count||0)}})))),e(me,{status:a}),d.location&&e(m,{alignItems:"center",space:2},void 0,e(C,{src:fe}),e("span",{},void 0,d.location.get("name"))))))};export{va as default};
