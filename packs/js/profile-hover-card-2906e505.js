import{d as L,a9 as N,r as c,ax as F,q as v,b7 as k,Z as q,iE as T,iF as y,R as U,az as $,W as D,a as e,b2 as j,a3 as G,hN as J,iG as W,cB as Z,H as K,A as O,hE as Q,b5 as h,y as g,hC as u,a2 as V,F as p,iH as X}from"../index-8f099bc3.js";import{u as Y}from"./usePopper-b1c614f8.js";import{u as ee}from"./usePatronUser-6730173f.js";var ae=function(t,r){var s=[];return t!=null&&t.admin?s.push(e(u,{slug:"admin",title:e(p,{id:"account_moderation_modal.roles.admin",defaultMessage:"Admin"})},"admin")):t!=null&&t.moderator&&s.push(e(u,{slug:"moderator",title:e(p,{id:"account_moderation_modal.roles.moderator",defaultMessage:"Moderator"})},"moderator")),r!=null&&r.is_patron&&s.push(e(u,{slug:"patron",title:e(p,{id:"account.patron",defaultMessage:"Patron"})},"patron")),s},te=function(t){return function(){t(X())}},oe=function(t){return function(){t(y(!0))}},ne=function(t){var r,s=t.visible,f=s===void 0?!0:s,i=L(),b=N(),P=c.useState(null),m=F(P,2),E=m[0],M=m[1],w=v(function(o){return o.me}),n=v(function(o){return o.profile_hover_card.accountId||void 0}),C=k(n,{withRelationship:!0}),a=C.account,H=ee(a==null?void 0:a.url),x=H.patronUser,B=v(function(o){var d;return(d=o.profile_hover_card.ref)===null||d===void 0?void 0:d.current}),S=ae(a,x);c.useEffect(function(){n&&i(q([n]))},[i,n]),c.useEffect(function(){var o=b.listen(function(){T.cancel(),i(y())});return function(){o()}},[]);var _=Y(B,E),A=_.styles,R=_.attributes;if(!a)return null;var I={__html:a.note_emojified},z=w!==a.id&&((r=a.relationship)===null||r===void 0?void 0:r.followed_by)===!0;return U.createElement("div",$({className:D({"absolute transition-opacity w-[320px] z-[101] top-0 left-0":!0,"opacity-100":f,"opacity-0 pointer-events-none":!f}),ref:M,style:A.popper},R.popper,{onMouseEnter:te(i),onMouseLeave:oe(i)}),e(V,{variant:"rounded",className:"relative isolate overflow-hidden"},void 0,e(j,{},void 0,e(G,{space:2},void 0,e(J,{fetchComponent:W},void 0,function(o){return e(o,{accountId:a.id,action:e(Z,{account:a,small:!0}),badges:S})}),a.local&&e(K,{alignItems:"center",space:.5},void 0,e(O,{src:Q,className:"h-4 w-4 text-gray-800 dark:text-gray-200"}),e(h,{id:"account-Status--member-since",vars:{date:new Date(a.created_at)}},void 0,e(g,{size:"sm"},void 0,"Joined ",a.created_at))),a.note.length>0&&e(g,{size:"sm",dangerouslySetInnerHTML:I})),z&&e("div",{className:"absolute left-2 top-2"},void 0,e(u,{slug:"opaque",title:e(h,{id:"account-Status--follows-you"},void 0,e("span",{},void 0,"Follows you"))})))))};export{ne as ProfileHoverCard,ne as default};
