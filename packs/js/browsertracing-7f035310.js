const se=Object.prototype.toString;function De(e){switch(se.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return P(e,Error)}}function L(e,t){return se.call(e)===`[object ${t}]`}function fi(e){return L(e,"ErrorEvent")}function hi(e){return L(e,"DOMError")}function li(e){return L(e,"DOMException")}function C(e){return L(e,"String")}function pi(e){return e===null||typeof e!="object"&&typeof e!="function"}function kt(e){return L(e,"Object")}function ve(e){return typeof Event<"u"&&P(e,Event)}function Ie(e){return typeof Element<"u"&&P(e,Element)}function Be(e){return L(e,"RegExp")}function W(e){return!!(e&&e.then&&typeof e.then=="function")}function gi(e){return kt(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function ke(e){return typeof e=="number"&&e!==e}function P(e,t){try{return e instanceof t}catch{return!1}}function Ge(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function xt(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function mi(e,t){if(!Array.isArray(e))return"";const n=[];for(let i=0;i<e.length;i++){const s=e[i];try{Ge(s)?n.push("[VueViewModel]"):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function Ue(e,t,n=!1){return C(e)?Be(t)?t.test(e):C(t)?n?e===t:e.includes(t):!1:!1}function we(e,t=[],n=!1){return t.some(i=>Ue(e,i,n))}function Q(e){return e&&e.Math==Math?e:void 0}const y=typeof globalThis=="object"&&Q(globalThis)||typeof window=="object"&&Q(window)||typeof self=="object"&&Q(self)||typeof global=="object"&&Q(global)||function(){return this}()||{};function X(){return y}function re(e,t,n){const i=n||y,s=i.__SENTRY__=i.__SENTRY__||{};return s[e]||(s[e]=t())}const at=X(),Oe=80;function dt(e,t={}){try{let n=e;const i=5,s=[];let r=0,a=0;const o=" > ",c=o.length;let u;const d=Array.isArray(t)?t:t.keyAttrs,f=!Array.isArray(t)&&t.maxStringLength||Oe;for(;n&&r++<i&&(u=Ye(n,d),!(u==="html"||r>1&&a+s.length*c+u.length>=f));)s.push(u),a+=u.length,n=n.parentNode;return s.reverse().join(o)}catch{return"<unknown>"}}function Ye(e,t){const n=e,i=[];let s,r,a,o,c;if(!n||!n.tagName)return"";i.push(n.tagName.toLowerCase());const u=t&&t.length?t.filter(f=>n.getAttribute(f)).map(f=>[f,n.getAttribute(f)]):null;if(u&&u.length)u.forEach(f=>{i.push(`[${f[0]}="${f[1]}"]`)});else if(n.id&&i.push(`#${n.id}`),s=n.className,s&&C(s))for(r=s.split(/\s+/),c=0;c<r.length;c++)i.push(`.${r[c]}`);const d=["aria-label","type","name","title","alt"];for(c=0;c<d.length;c++)a=d[c],o=n.getAttribute(a),o&&i.push(`[${a}="${o}"]`);return i.join("")}function Ti(){try{return at.document.location.href}catch{return""}}function Ae(e){return at.document&&at.document.querySelector?at.document.querySelector(e):null}const Ce="Sentry Logger ",mt=["debug","info","warn","error","log","assert","trace"],_t={};function ae(e){if(!("console"in y))return e();const t=y.console,n={},i=Object.keys(_t);i.forEach(s=>{const r=_t[s];n[s]=t[s],t[s]=r});try{return e()}finally{i.forEach(s=>{t[s]=n[s]})}}function Pe(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1}};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?mt.forEach(n=>{t[n]=(...i)=>{e&&ae(()=>{y.console[n](`${Ce}[${n}]:`,...i)})}}):mt.forEach(n=>{t[n]=()=>{}}),t}const _=Pe();function k(e,t,n){if(!(t in e))return;const i=e[t],s=n(i);typeof s=="function"&&xe(s,i),e[t]=s}function oe(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function xe(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,oe(e,"__sentry_original__",t)}catch{}}function Si(e){return e.__sentry_original__}function Ei(e){return Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function Le(e){if(De(e))return{message:e.message,name:e.name,stack:e.stack,...Ht(e)};if(ve(e)){const t={type:e.type,target:Lt(e.target),currentTarget:Lt(e.currentTarget),...Ht(e)};return typeof CustomEvent<"u"&&P(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function Lt(e){try{return Ie(e)?dt(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Ht(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function yi(e,t=40){const n=Object.keys(Le(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return xt(n[0],t);for(let i=n.length;i>0;i--){const s=n.slice(0,i).join(", ");if(!(s.length>t))return i===n.length?s:xt(s,t)}return""}function Y(e){return Tt(e,new Map)}function Tt(e,t){if(kt(e)){const n=t.get(e);if(n!==void 0)return n;const i={};t.set(e,i);for(const s of Object.keys(e))typeof e[s]<"u"&&(i[s]=Tt(e[s],t));return i}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const i=[];return t.set(e,i),e.forEach(s=>{i.push(Tt(s,t))}),i}return e}const ce=50,Mt=/\(error: (.*)\)/,$t=/captureMessage|captureException/;function He(...e){const t=e.sort((n,i)=>n[0]-i[0]).map(n=>n[1]);return(n,i=0)=>{const s=[],r=n.split(`
`);for(let a=i;a<r.length;a++){const o=r[a];if(o.length>1024)continue;const c=Mt.test(o)?o.replace(Mt,"$1"):o;if(!c.match(/\S*Error: /)){for(const u of t){const d=u(c);if(d){s.push(d);break}}if(s.length>=ce)break}}return Me(s)}}function bi(e){return Array.isArray(e)?He(...e):e}function Me(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),$t.test(t[t.length-1].function||"")&&(t.pop(),$t.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,ce).map(n=>({...n,filename:n.filename||t[t.length-1].filename,function:n.function||"?"}))}const lt="<anonymous>";function $e(e){try{return!e||typeof e!="function"?lt:e.name||lt}catch{return lt}}const St=X();function Fe(){if(!("fetch"in St))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function Ft(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function je(){if(!Fe())return!1;if(Ft(St.fetch))return!0;let e=!1;const t=St.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Ft(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}const Z=X();function qe(){const e=Z.chrome,t=e&&e.app&&e.app.runtime,n="history"in Z&&!!Z.history.pushState&&!!Z.history.replaceState;return!t&&n}const E=X(),$="__sentry_xhr_v2__",F={},jt={};function We(e){if(!jt[e])switch(jt[e]=!0,e){case"console":Xe();break;case"dom":en();break;case"xhr":Je();break;case"fetch":Ve();break;case"history":Ke();break;case"error":nn();break;case"unhandledrejection":sn();break;default:(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn("unknown instrumentation type:",e);return}}function q(e,t){F[e]=F[e]||[],F[e].push(t),We(e)}function N(e,t){if(!(!e||!F[e]))for(const n of F[e]||[])try{n(t)}catch(i){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${$e(n)}
Error:`,i)}}function Xe(){"console"in y&&mt.forEach(function(e){e in y.console&&k(y.console,e,function(t){return _t[e]=t,function(...n){N("console",{args:n,level:e});const i=_t[e];i&&i.apply(y.console,n)}})})}function Ve(){je()&&k(y,"fetch",function(e){return function(...t){const{method:n,url:i}=ze(t),s={args:t,fetchData:{method:n,url:i},startTimestamp:Date.now()};return N("fetch",{...s}),e.apply(y,t).then(r=>(N("fetch",{...s,endTimestamp:Date.now(),response:r}),r),r=>{throw N("fetch",{...s,endTimestamp:Date.now(),error:r}),r})}})}function Et(e,t){return!!e&&typeof e=="object"&&!!e[t]}function qt(e){return typeof e=="string"?e:e?Et(e,"url")?e.url:e.toString?e.toString():"":""}function ze(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,i]=e;return{url:qt(n),method:Et(i,"method")?String(i.method).toUpperCase():"GET"}}const t=e[0];return{url:qt(t),method:Et(t,"method")?String(t.method).toUpperCase():"GET"}}function Je(){if(!E.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;k(e,"open",function(t){return function(...n){const i=n[1],s=this[$]={method:C(n[0])?n[0].toUpperCase():n[0],url:n[1],request_headers:{}};C(i)&&s.method==="POST"&&i.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const r=()=>{const a=this[$];if(a&&this.readyState===4){try{a.status_code=this.status}catch{}N("xhr",{args:n,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:this})}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?k(this,"onreadystatechange",function(a){return function(...o){return r(),a.apply(this,o)}}):this.addEventListener("readystatechange",r),k(this,"setRequestHeader",function(a){return function(...o){const[c,u]=o,d=this[$];return d&&(d.request_headers[c.toLowerCase()]=u),a.apply(this,o)}}),t.apply(this,n)}}),k(e,"send",function(t){return function(...n){const i=this[$];return i&&n[0]!==void 0&&(i.body=n[0]),N("xhr",{args:n,startTimestamp:Date.now(),xhr:this}),t.apply(this,n)}})}let tt;function Ke(){if(!qe())return;const e=E.onpopstate;E.onpopstate=function(...n){const i=E.location.href,s=tt;if(tt=i,N("history",{from:s,to:i}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...i){const s=i.length>2?i[2]:void 0;if(s){const r=tt,a=String(s);tt=a,N("history",{from:r,to:a})}return n.apply(this,i)}}k(E.history,"pushState",t),k(E.history,"replaceState",t)}const Qe=1e3;let et,nt;function Ze(e,t){if(!e||e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch{}return!1}function tn(e){if(e.type!=="keypress")return!1;try{const t=e.target;if(!t||!t.tagName)return!0;if(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)return!1}catch{}return!0}function Wt(e,t=!1){return n=>{if(!n||nt===n||tn(n))return;const i=n.type==="keypress"?"input":n.type;et===void 0?(e({event:n,name:i,global:t}),nt=n):Ze(nt,n)&&(e({event:n,name:i,global:t}),nt=n),clearTimeout(et),et=E.setTimeout(()=>{et=void 0},Qe)}}function en(){if(!E.document)return;const e=N.bind(null,"dom"),t=Wt(e,!0);E.document.addEventListener("click",t,!1),E.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const i=E[n]&&E[n].prototype;!i||!i.hasOwnProperty||!i.hasOwnProperty("addEventListener")||(k(i,"addEventListener",function(s){return function(r,a,o){if(r==="click"||r=="keypress")try{const c=this,u=c.__sentry_instrumentation_handlers__=c.__sentry_instrumentation_handlers__||{},d=u[r]=u[r]||{refCount:0};if(!d.handler){const f=Wt(e);d.handler=f,s.call(this,r,f,o)}d.refCount++}catch{}return s.call(this,r,a,o)}}),k(i,"removeEventListener",function(s){return function(r,a,o){if(r==="click"||r=="keypress")try{const c=this,u=c.__sentry_instrumentation_handlers__||{},d=u[r];d&&(d.refCount--,d.refCount<=0&&(s.call(this,r,d.handler,o),d.handler=void 0,delete u[r]),Object.keys(u).length===0&&delete c.__sentry_instrumentation_handlers__)}catch{}return s.call(this,r,a,o)}}))})}let it=null;function nn(){it=E.onerror,E.onerror=function(e,t,n,i,s){return N("error",{column:i,error:s,line:n,msg:e,url:t}),it&&!it.__SENTRY_LOADER__?it.apply(this,arguments):!1},E.onerror.__SENTRY_INSTRUMENTED__=!0}let st=null;function sn(){st=E.onunhandledrejection,E.onunhandledrejection=function(e){return N("unhandledrejection",e),st&&!st.__SENTRY_LOADER__?st.apply(this,arguments):!0},E.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function b(){const e=y,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>t.getRandomValues(new Uint8Array(1))[0])}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,i=>(i^(n()&15)>>i/4).toString(16))}function ue(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function Ri(e){const{message:t,event_id:n}=e;if(t)return t;const i=ue(e);return i?i.type&&i.value?`${i.type}: ${i.value}`:i.type||i.value||n||"<unknown>":n||"<unknown>"}function Ni(e,t,n){const i=e.exception=e.exception||{},s=i.values=i.values||[],r=s[0]=s[0]||{};r.value||(r.value=t||""),r.type||(r.type=n||"Error")}function Di(e,t){const n=ue(e);if(!n)return;const i={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...i,...s,...t},t&&"data"in t){const r={...s&&s.data,...t.data};n.mechanism.data=r}}function vi(e){if(e&&e.__sentry_captured__)return!0;try{oe(e,"__sentry_captured__",!0)}catch{}return!1}function rn(e){return Array.isArray(e)?e:[e]}function an(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Ii(){return"npm"}function on(){return!an()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function ot(e,t){return e.require(t)}function Bi(e){let t;try{t=ot(module,e)}catch{}try{const{cwd:n}=ot(module,"process");t=ot(module,`${n()}/node_modules/${e}`)}catch{}return t}var U;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const i=2;e[e.REJECTED=i]="REJECTED"})(U||(U={}));function ki(e){return new B(t=>{t(e)})}function Gi(e){return new B((t,n)=>{n(e)})}class B{constructor(t){B.prototype.__init.call(this),B.prototype.__init2.call(this),B.prototype.__init3.call(this),B.prototype.__init4.call(this),this._state=U.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new B((i,s)=>{this._handlers.push([!1,r=>{if(!t)i(r);else try{i(t(r))}catch(a){s(a)}},r=>{if(!n)s(r);else try{i(n(r))}catch(a){s(a)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new B((n,i)=>{let s,r;return this.then(a=>{r=!1,s=a,t&&t()},a=>{r=!0,s=a,t&&t()}).then(()=>{if(r){i(s);return}n(s)})})}__init(){this._resolve=t=>{this._setResult(U.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(U.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===U.PENDING){if(W(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===U.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===U.RESOLVED&&n[1](this._value),this._state===U.REJECTED&&n[2](this._value),n[0]=!0)})}}}function Ui(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",i=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:i,relative:t[5]+n+i}}function wi(e){return e.split(/[\?#]/,1)[0]}function Oi(e){return e.split(/\\?\//).filter(t=>t.length>0&&t!==",").length}const de=X(),yt={nowSeconds:()=>Date.now()/1e3};function cn(){const{performance:e}=de;if(!e||!e.now)return;const t=Date.now()-e.now();return{now:()=>e.now(),timeOrigin:t}}function un(){try{return ot(module,"perf_hooks").performance}catch{return}}const pt=on()?un():cn(),Xt=pt===void 0?yt:{nowSeconds:()=>(pt.timeOrigin+pt.now())/1e3},_e=yt.nowSeconds.bind(yt),w=Xt.nowSeconds.bind(Xt),G=(()=>{const{performance:e}=de;if(!e||!e.now)return;const t=3600*1e3,n=e.now(),i=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+n-i):t,r=s<t,a=e.timing&&e.timing.navigationStart,c=typeof a=="number"?Math.abs(a+n-i):t,u=c<t;return r||u?s<=c?e.timeOrigin:a:i})(),bt="baggage",fe="sentry-",dn=/^sentry-/,_n=8192;function fn(e){if(!C(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce((i,s)=>{const r=Vt(s);return{...i,...r}},{});else{if(!e)return;t=Vt(e)}const n=Object.entries(t).reduce((i,[s,r])=>{if(s.match(dn)){const a=s.slice(fe.length);i[a]=r}return i},{});if(Object.keys(n).length>0)return n}function Rt(e){if(!e)return;const t=Object.entries(e).reduce((n,[i,s])=>(s&&(n[`${fe}${i}`]=s),n),{});return hn(t)}function Vt(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,i])=>(t[n]=i,t),{})}function hn(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,i],s)=>{const r=`${encodeURIComponent(n)}=${encodeURIComponent(i)}`,a=s===0?r:`${t},${r}`;return a.length>_n?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn(`Not adding key: ${n} with val: ${i} to baggage header due to exceeding baggage size limits.`),t):a},"")}const ln=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function pn(e){if(!e)return;const t=e.match(ln);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function gn(e,t){const n=pn(e),i=fn(t),{traceId:s,parentSpanId:r,parentSampled:a}=n||{},o={traceId:s||b(),spanId:b().substring(16),sampled:a};return r&&(o.parentSpanId=r),i&&(o.dsc=i),{traceparentData:n,dynamicSamplingContext:i,propagationContext:o}}function Gt(e=b(),t=b().substring(16),n){let i="";return n!==void 0&&(i=n?"-1":"-0"),`${e}-${t}${i}`}const he="production";function le(){return re("globalEventProcessors",()=>[])}function Yi(e){le().push(e)}function Nt(e,t,n,i=0){return new B((s,r)=>{const a=e[i];if(t===null||typeof a!="function")s(t);else{const o=a({...t},n);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&a.id&&o===null&&_.log(`Event processor "${a.id}" dropped event`),W(o)?o.then(c=>Nt(e,c,n,i+1).then(s)).then(null,r):Nt(e,o,n,i+1).then(s).then(null,r)}})}function mn(e){const t=w(),n={sid:b(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Sn(n)};return e&&ft(n,e),n}function ft(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||w(),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:b()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Tn(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),ft(e,n)}function Sn(e){return Y({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}const En=100;class A{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=zt()}static clone(t){const n=new A;return t&&(n._breadcrumbs=[...t._breadcrumbs],n._tags={...t._tags},n._extra={...t._extra},n._contexts={...t._contexts},n._user=t._user,n._level=t._level,n._span=t._span,n._session=t._session,n._transactionName=t._transactionName,n._fingerprint=t._fingerprint,n._eventProcessors=[...t._eventProcessors],n._requestSession=t._requestSession,n._attachments=[...t._attachments],n._sdkProcessingMetadata={...t._sdkProcessingMetadata},n._propagationContext={...t._propagationContext}),n}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{},this._session&&ft(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this.getSpan();return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;if(typeof t=="function"){const n=t(this);return n instanceof A?n:this}return t instanceof A?(this._tags={...this._tags,...t._tags},this._extra={...this._extra,...t._extra},this._contexts={...this._contexts,...t._contexts},t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession),t._propagationContext&&(this._propagationContext=t._propagationContext)):kt(t)&&(t=t,this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=zt(),this}addBreadcrumb(t,n){const i=typeof n=="number"?n:En;if(i<=0)return this;const s={timestamp:_e(),...t},r=this._breadcrumbs;return r.push(s),this._breadcrumbs=r.length>i?r.slice(-i):r,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(t,n={}){if(this._extra&&Object.keys(this._extra).length&&(t.extra={...this._extra,...t.extra}),this._tags&&Object.keys(this._tags).length&&(t.tags={...this._tags,...t.tags}),this._user&&Object.keys(this._user).length&&(t.user={...this._user,...t.user}),this._contexts&&Object.keys(this._contexts).length&&(t.contexts={...this._contexts,...t.contexts}),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts={trace:this._span.getTraceContext(),...t.contexts};const r=this._span.transaction;if(r){t.sdkProcessingMetadata={dynamicSamplingContext:r.getDynamicSamplingContext(),...t.sdkProcessingMetadata};const a=r.name;a&&(t.tags={transaction:a,...t.tags})}}this._applyFingerprint(t);const i=this._getBreadcrumbs(),s=[...t.breadcrumbs||[],...i];return t.breadcrumbs=s.length>0?s:void 0,t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},Nt([...le(),...this._eventProcessors],t,n)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}_getBreadcrumbs(){return this._breadcrumbs}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}_applyFingerprint(t){t.fingerprint=t.fingerprint?rn(t.fingerprint):[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}}function zt(){return{traceId:b(),spanId:b().substring(16)}}const pe=4,yn=100;class ge{constructor(t,n=new A,i=pe){this._version=i,this._stack=[{scope:n}],t&&this.bindClient(t)}isOlderThan(t){return this._version<t}bindClient(t){const n=this.getStackTop();n.client=t,t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=A.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){const n=this.pushScope();try{t(n)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,n){const i=this._lastEventId=n&&n.event_id?n.event_id:b(),s=new Error("Sentry syntheticException");return this._withClient((r,a)=>{r.captureException(t,{originalException:t,syntheticException:s,...n,event_id:i},a)}),i}captureMessage(t,n,i){const s=this._lastEventId=i&&i.event_id?i.event_id:b(),r=new Error(t);return this._withClient((a,o)=>{a.captureMessage(t,n,{originalException:t,syntheticException:r,...i,event_id:s},o)}),s}captureEvent(t,n){const i=n&&n.event_id?n.event_id:b();return t.type||(this._lastEventId=i),this._withClient((s,r)=>{s.captureEvent(t,{...n,event_id:i},r)}),i}lastEventId(){return this._lastEventId}addBreadcrumb(t,n){const{scope:i,client:s}=this.getStackTop();if(!s)return;const{beforeBreadcrumb:r=null,maxBreadcrumbs:a=yn}=s.getOptions&&s.getOptions()||{};if(a<=0)return;const c={timestamp:_e(),...t},u=r?ae(()=>r(c,n)):c;u!==null&&(s.emit&&s.emit("beforeAddBreadcrumb",u,n),i.addBreadcrumb(u,a))}setUser(t){this.getScope().setUser(t)}setTags(t){this.getScope().setTags(t)}setExtras(t){this.getScope().setExtras(t)}setTag(t,n){this.getScope().setTag(t,n)}setExtra(t,n){this.getScope().setExtra(t,n)}setContext(t,n){this.getScope().setContext(t,n)}configureScope(t){const{scope:n,client:i}=this.getStackTop();i&&t(n)}run(t){const n=Jt(this);try{t(this)}finally{Jt(n)}}getIntegration(t){const n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,n){const i=this._callExtensionMethod("startTransaction",t,n);if((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&!i){const s=this.getClient();console.warn(s?`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`:"Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return i}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,i=n.getSession();i&&Tn(i),this._sendSessionUpdate(),n.setSession()}startSession(t){const{scope:n,client:i}=this.getStackTop(),{release:s,environment:r=he}=i&&i.getOptions()||{},{userAgent:a}=y.navigator||{},o=mn({release:s,environment:r,user:n.getUser(),...a&&{userAgent:a},...t}),c=n.getSession&&n.getSession();return c&&c.status==="ok"&&ft(c,{status:"exited"}),this.endSession(),n.setSession(o),o}shouldSendDefaultPii(){const t=this.getClient(),n=t&&t.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:n}=this.getStackTop(),i=t.getSession();i&&n&&n.captureSession&&n.captureSession(i)}_withClient(t){const{scope:n,client:i}=this.getStackTop();i&&t(i,n)}_callExtensionMethod(t,...n){const s=V().__SENTRY__;if(s&&s.extensions&&typeof s.extensions[t]=="function")return s.extensions[t].apply(this,n);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function V(){return y.__SENTRY__=y.__SENTRY__||{extensions:{},hub:void 0},y}function Jt(e){const t=V(),n=Dt(t);return me(t,e),n}function D(){const e=V();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return bn(e)}function bn(e=V()){return(!Rn(e)||Dt(e).isOlderThan(pe))&&me(e,new ge),Dt(e)}function Rn(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function Dt(e){return re("hub",()=>new ge,e)}function me(e,t){if(!e)return!1;const n=e.__SENTRY__=e.__SENTRY__||{};return n.hub=t,!0}function z(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=D().getClient(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function J(e){return(e||D()).getScope().getTransaction()}let Kt=!1;function Nn(){Kt||(Kt=!0,q("error",vt),q("unhandledrejection",vt))}function vt(){const e=J();if(e){const t="internal_error";(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}vt.tag="sentry_tracingErrorCallback";class Te{constructor(t=1e3){this._maxlen=t,this.spans=[]}add(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}}class Ut{constructor(t={}){this.traceId=t.traceId||b(),this.spanId=t.spanId||b().substring(16),this.startTimestamp=t.startTimestamp||w(),this.tags=t.tags||{},this.data=t.data||{},this.instrumenter=t.instrumenter||"sentry",this.origin=t.origin||"manual",t.parentSpanId&&(this.parentSpanId=t.parentSpanId),"sampled"in t&&(this.sampled=t.sampled),t.op&&(this.op=t.op),t.description&&(this.description=t.description),t.name&&(this.description=t.name),t.status&&(this.status=t.status),t.endTimestamp&&(this.endTimestamp=t.endTimestamp)}get name(){return this.description||""}set name(t){this.setName(t)}startChild(t){const n=new Ut({...t,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n),n.transaction=this.transaction,(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&n.transaction){const i=t&&t.op||"< unknown op >",s=n.transaction.name||"< unknown name >",r=n.transaction.spanId,a=`[Tracing] Starting '${i}' span on transaction '${s}' (${r}).`;n.transaction.metadata.spanMetadata[n.spanId]={logMessage:a},_.log(a)}return n}setTag(t,n){return this.tags={...this.tags,[t]:n},this}setData(t,n){return this.data={...this.data,[t]:n},this}setStatus(t){return this.status=t,this}setHttpStatus(t){this.setTag("http.status_code",String(t)),this.setData("http.response.status_code",t);const n=Dn(t);return n!=="unknown_error"&&this.setStatus(n),this}setName(t){this.description=t}isSuccess(){return this.status==="ok"}finish(t){if((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage:n}=this.transaction.metadata.spanMetadata[this.spanId];n&&_.log(n.replace("Starting","Finishing"))}this.endTimestamp=typeof t=="number"?t:w()}toTraceparent(){return Gt(this.traceId,this.spanId,this.sampled)}toContext(){return Y({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(t){return this.data=t.data||{},this.description=t.description,this.endTimestamp=t.endTimestamp,this.op=t.op,this.parentSpanId=t.parentSpanId,this.sampled=t.sampled,this.spanId=t.spanId||this.spanId,this.startTimestamp=t.startTimestamp||this.startTimestamp,this.status=t.status,this.tags=t.tags||{},this.traceId=t.traceId||this.traceId,this}getTraceContext(){return Y({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})}toJSON(){return Y({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId,origin:this.origin})}}function Dn(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}function wt(e,t,n){const i=t.getOptions(),{publicKey:s}=t.getDsn()||{},{segment:r}=n&&n.getUser()||{},a=Y({environment:i.environment||he,release:i.release,user_segment:r,public_key:s,trace_id:e});return t.emit&&t.emit("createDsc",a),a}class Se extends Ut{constructor(t,n){super(t),delete this.description,this._measurements={},this._contexts={},this._hub=n||D(),this._name=t.name||"",this.metadata={source:"custom",...t.metadata,spanMetadata:{}},this._trimEnd=t.trimEnd,this.transaction=this;const i=this.metadata.dynamicSamplingContext;i&&(this._frozenDynamicSamplingContext={...i})}get name(){return this._name}set name(t){this.setName(t)}setName(t,n="custom"){this._name=t,this.metadata.source=n}initSpanRecorder(t=1e3){this.spanRecorder||(this.spanRecorder=new Te(t)),this.spanRecorder.add(this)}setContext(t,n){n===null?delete this._contexts[t]:this._contexts[t]=n}setMeasurement(t,n,i=""){this._measurements[t]={value:n,unit:i}}setMetadata(t){this.metadata={...this.metadata,...t}}finish(t){if(this.endTimestamp!==void 0)return;this.name||((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),super.finish(t);const n=this._hub.getClient();if(n&&n.emit&&n.emit("finishTransaction",this),this.sampled!==!0){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","transaction");return}const i=this.spanRecorder?this.spanRecorder.spans.filter(o=>o!==this&&o.endTimestamp):[];this._trimEnd&&i.length>0&&(this.endTimestamp=i.reduce((o,c)=>o.endTimestamp&&c.endTimestamp?o.endTimestamp>c.endTimestamp?o:c:o).endTimestamp);const s=this.metadata,r={contexts:{...this._contexts,trace:this.getTraceContext()},spans:i,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...s,dynamicSamplingContext:this.getDynamicSamplingContext()},...s.source&&{transaction_info:{source:s.source}}};return Object.keys(this._measurements).length>0&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),r.measurements=this._measurements),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),this._hub.captureEvent(r)}toContext(){const t=super.toContext();return Y({...t,name:this.name,trimEnd:this._trimEnd})}updateWithContext(t){return super.updateWithContext(t),this.name=t.name||"",this._trimEnd=t.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;const t=this._hub||D(),n=t.getClient();if(!n)return{};const i=t.getScope(),s=wt(this.traceId,n,i),r=this.metadata.sampleRate;r!==void 0&&(s.sample_rate=`${r}`);const a=this.metadata.source;return a&&a!=="url"&&(s.transaction=this.name),this.sampled!==void 0&&(s.sampled=String(this.sampled)),s}setHub(t){this._hub=t}}const ct={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},vn="finishReason",O=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class In extends Te{constructor(t,n,i,s){super(s),this._pushActivity=t,this._popActivity=n,this.transactionSpanId=i}add(t){t.spanId!==this.transactionSpanId&&(t.finish=n=>{t.endTimestamp=typeof n=="number"?n:w(),this._popActivity(t.spanId)},t.endTimestamp===void 0&&this._pushActivity(t.spanId)),super.add(t)}}class Bn extends Se{constructor(t,n,i=ct.idleTimeout,s=ct.finalTimeout,r=ct.heartbeatInterval,a=!1){super(t,n),this._idleHub=n,this._idleTimeout=i,this._finalTimeout=s,this._heartbeatInterval=r,this._onScope=a,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=O[4],a&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`Setting idle transaction on scope. Span ID: ${this.spanId}`),n.configureScope(o=>o.setSpan(this))),this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=O[3],this.finish())},this._finalTimeout)}finish(t=w()){if(this._finished=!0,this.activities={},this.op==="ui.action.click"&&this.setTag(vn,this._finishReason),this.spanRecorder){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Tracing] finishing IdleTransaction",new Date(t*1e3).toISOString(),this.op);for(const n of this._beforeFinishCallbacks)n(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter(n=>{if(n.spanId===this.spanId)return!0;n.endTimestamp||(n.endTimestamp=t,n.setStatus("cancelled"),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(n,void 0,2)));const i=n.startTimestamp<t,s=(this._finalTimeout+this._idleTimeout)/1e3,r=n.endTimestamp-this.startTimestamp<s;if(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__){const a=JSON.stringify(n,void 0,2);i?r||_.log("[Tracing] discarding Span since it finished after Transaction final timeout",a):_.log("[Tracing] discarding Span since it happened after Transaction was finished",a)}return i&&r}),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Tracing] flushing IdleTransaction")}else(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Tracing] No active IdleTransaction");if(this._onScope){const n=this._idleHub.getScope();n.getTransaction()===this&&n.setSpan(void 0)}return super.finish(t)}registerBeforeFinishCallback(t){this._beforeFinishCallbacks.push(t)}initSpanRecorder(t){if(!this.spanRecorder){const n=s=>{this._finished||this._pushActivity(s)},i=s=>{this._finished||this._popActivity(s)};this.spanRecorder=new In(n,i,this.spanId,t),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(t,{restartOnChildSpanChange:n}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=n===!1,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,Object.keys(this.activities).length===0&&this._idleTimeoutCanceledPermanently&&(this._finishReason=O[5],this.finish(t)))}setFinishReason(t){this._finishReason=t}_restartIdleTimeout(t){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{!this._finished&&Object.keys(this.activities).length===0&&(this._finishReason=O[1],this.finish(t))},this._idleTimeout)}_pushActivity(t){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] pushActivity: ${t}`),this.activities[t]=!0,(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(t){if(this.activities[t]&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] popActivity ${t}`),delete this.activities[t],(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){const n=w();this._idleTimeoutCanceledPermanently?(this._finishReason=O[5],this.finish(n)):this._restartIdleTimeout(n+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const t=Object.keys(this.activities).join("");t===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=t,this._heartbeatCounter>=3?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=O[0],this.finish()):this._pingHeartbeat()}_pingHeartbeat(){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}}function kn(){const t=this.getScope().getSpan();return t?{"sentry-trace":t.toTraceparent()}:{}}function Ee(e,t,n){if(!z(t))return e.sampled=!1,e;if(e.sampled!==void 0)return e.setMetadata({sampleRate:Number(e.sampled)}),e;let i;return typeof t.tracesSampler=="function"?(i=t.tracesSampler(n),e.setMetadata({sampleRate:Number(i)})):n.parentSampled!==void 0?i=n.parentSampled:typeof t.tracesSampleRate<"u"?(i=t.tracesSampleRate,e.setMetadata({sampleRate:Number(i)})):(i=1,e.setMetadata({sampleRate:i})),Gn(i)?i?(e.sampled=Math.random()<i,e.sampled?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] starting ${e.op} transaction - ${e.name}`),e):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(i)})`),e)):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),e.sampled=!1,e):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function Gn(e){return ke(e)||!(typeof e=="number"||typeof e=="boolean")?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e<0||e>1?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function Un(e,t){const n=this.getClient(),i=n&&n.getOptions()||{},s=i.instrumenter||"sentry",r=e.instrumenter||"sentry";s!==r&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.error(`A transaction was started with instrumenter=\`${r}\`, but the SDK is configured with the \`${s}\` instrumenter.
The transaction will not be sampled. Please use the ${s} instrumentation to start transactions.`),e.sampled=!1);let a=new Se(e,this);return a=Ee(a,i,{parentSampled:e.parentSampled,transactionContext:e,...t}),a.sampled&&a.initSpanRecorder(i._experiments&&i._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",a),a}function Qt(e,t,n,i,s,r,a){const o=e.getClient(),c=o&&o.getOptions()||{};let u=new Bn(t,e,n,i,a,s);return u=Ee(u,c,{parentSampled:t.parentSampled,transactionContext:t,...r}),u.sampled&&u.initSpanRecorder(c._experiments&&c._experiments.maxSpans),o&&o.emit&&o.emit("startTransaction",u),u}function wn(){const e=V();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=Un),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=kn),Nn())}function Ai(e,t,n=()=>{}){const i=Yt(e),s=D(),r=s.getScope(),a=r.getSpan(),o=Ot(s,a,i);r.setSpan(o);function c(){o&&o.finish(),s.getScope().setSpan(a)}let u;try{u=t(o)}catch(d){throw o&&o.setStatus("internal_error"),n(d),c(),d}return W(u)?Promise.resolve(u).then(()=>{c()},d=>{o&&o.setStatus("internal_error"),n(d),c()}):c(),u}function Ci(e,t){const n=Yt(e),i=D(),s=i.getScope(),r=s.getSpan(),a=Ot(i,r,n);s.setSpan(a);function o(){a&&a.finish(),i.getScope().setSpan(r)}let c;try{c=t(a)}catch(u){throw a&&a.setStatus("internal_error"),o(),u}return W(c)?Promise.resolve(c).then(()=>{o()},()=>{a&&a.setStatus("internal_error"),o()}):o(),c}function Pi(e,t){const n=Yt(e),i=D(),s=i.getScope(),r=s.getSpan(),a=Ot(i,r,n);s.setSpan(a);function o(){a&&a.finish(),i.getScope().setSpan(r)}let c;try{c=t(a,o)}catch(u){throw a&&a.setStatus("internal_error"),u}return W(c)&&Promise.resolve(c).then(void 0,()=>{a&&a.setStatus("internal_error")}),c}function xi(e){if(!z())return;const t={...e};t.name!==void 0&&t.description===void 0&&(t.description=t.name);const n=D(),i=On();return i?i.startChild(t):n.startTransaction(t)}function On(){return D().getScope().getSpan()}function Ot(e,t,n){if(z())return t?t.startChild(n):e.startTransaction(n)}function Yt(e){const t={...e};return t.name!==void 0&&t.description===void 0&&(t.description=t.name),t}const l=y;function Yn(){l&&l.document?l.document.addEventListener("visibilitychange",()=>{const e=J();if(l.document.hidden&&e){const t="cancelled";(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${e.op}`),e.status||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.finish()}}):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const At=(e,t,n)=>{let i,s;return r=>{t.value>=0&&(r||n)&&(s=t.value-(i||0),(s||i===void 0)&&(i=t.value,t.delta=s,e(t)))}},An=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Cn=()=>{const e=l.performance.timing,t=l.performance.navigation.type,n={entryType:"navigation",startTime:0,type:t==2?"back_forward":t===1?"reload":"navigate"};for(const i in e)i!=="navigationStart"&&i!=="toJSON"&&(n[i]=Math.max(e[i]-e.navigationStart,0));return n},ye=()=>l.__WEB_VITALS_POLYFILL__?l.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||Cn()):l.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],be=()=>{const e=ye();return e&&e.activationStart||0},Ct=(e,t)=>{const n=ye();let i="navigate";return n&&(l.document.prerendering||be()>0?i="prerender":i=n.type.replace(/_/g,"-")),{name:e,value:typeof t>"u"?-1:t,rating:"good",delta:0,entries:[],id:An(),navigationType:i}},K=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const i=new PerformanceObserver(s=>{t(s.getEntries())});return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch{}},ht=(e,t)=>{const n=i=>{(i.type==="pagehide"||l.document.visibilityState==="hidden")&&(e(i),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},Pn=e=>{const t=Ct("CLS",0);let n,i=0,s=[];const r=o=>{o.forEach(c=>{if(!c.hadRecentInput){const u=s[0],d=s[s.length-1];i&&s.length!==0&&c.startTime-d.startTime<1e3&&c.startTime-u.startTime<5e3?(i+=c.value,s.push(c)):(i=c.value,s=[c]),i>t.value&&(t.value=i,t.entries=s,n&&n())}})},a=K("layout-shift",r);if(a){n=At(e,t);const o=()=>{r(a.takeRecords()),n(!0)};return ht(o),o}};let ut=-1;const xn=()=>l.document.visibilityState==="hidden"&&!l.document.prerendering?0:1/0,Ln=()=>{ht(({timeStamp:e})=>{ut=e},!0)},Pt=()=>(ut<0&&(ut=xn(),Ln()),{get firstHiddenTime(){return ut}}),Hn=e=>{const t=Pt(),n=Ct("FID");let i;const s=o=>{o.startTime<t.firstHiddenTime&&(n.value=o.processingStart-o.startTime,n.entries.push(o),i(!0))},r=o=>{o.forEach(s)},a=K("first-input",r);i=At(e,n),a&&ht(()=>{r(a.takeRecords()),a.disconnect()},!0)},Zt={},Mn=e=>{const t=Pt(),n=Ct("LCP");let i;const s=a=>{const o=a[a.length-1];if(o){const c=Math.max(o.startTime-be(),0);c<t.firstHiddenTime&&(n.value=c,n.entries=[o],i())}},r=K("largest-contentful-paint",s);if(r){i=At(e,n);const a=()=>{Zt[n.id]||(s(r.takeRecords()),r.disconnect(),Zt[n.id]=!0,i(!0))};return["keydown","click"].forEach(o=>{addEventListener(o,a,{once:!0,capture:!0})}),ht(a,!0),a}};function gt(e){return typeof e=="number"&&isFinite(e)}function x(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}function S(e){return e/1e3}function Re(){return l&&l.addEventListener&&l.performance}let te=0,m={},I,j;function $n(){const e=Re();if(e&&G){e.mark&&l.performance.mark("sentry-tracing-init"),Xn();const t=qn(),n=Wn();return()=>{t&&t(),n&&n()}}return()=>{}}function Fn(){K("longtask",t=>{for(const n of t){const i=J();if(!i)return;const s=S(G+n.startTime),r=S(n.duration);i.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:s,endTimestamp:s+r})}})}function jn(){K("event",t=>{for(const n of t){const i=J();if(!i)return;if(n.name==="click"){const s=S(G+n.startTime),r=S(n.duration);i.startChild({description:dt(n.target),op:`ui.interaction.${n.name}`,origin:"auto.ui.browser.metrics",startTimestamp:s,endTimestamp:s+r})}}},{durationThreshold:0})}function qn(){return Pn(e=>{const t=e.entries.pop();t&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Measurements] Adding CLS"),m.cls={value:e.value,unit:""},j=t)})}function Wn(){return Mn(e=>{const t=e.entries.pop();t&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Measurements] Adding LCP"),m.lcp={value:e.value,unit:"millisecond"},I=t)})}function Xn(){Hn(e=>{const t=e.entries.pop();if(!t)return;const n=S(G),i=S(t.startTime);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Measurements] Adding FID"),m.fid={value:e.value,unit:"millisecond"},m["mark.fid"]={value:n+i,unit:"second"}})}function Vn(e){const t=Re();if(!t||!l.performance.getEntries||!G)return;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Tracing] Adding & adjusting spans using Performance API");const n=S(G),i=t.getEntries();let s,r;if(i.slice(te).forEach(a=>{const o=S(a.startTime),c=S(a.duration);if(!(e.op==="navigation"&&n+o<e.startTimestamp))switch(a.entryType){case"navigation":{Jn(e,a,n),s=n+S(a.responseStart),r=n+S(a.requestStart);break}case"mark":case"paint":case"measure":{zn(e,a,o,c,n);const u=Pt(),d=a.startTime<u.firstHiddenTime;a.name==="first-paint"&&d&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Measurements] Adding FP"),m.fp={value:a.startTime,unit:"millisecond"}),a.name==="first-contentful-paint"&&d&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Measurements] Adding FCP"),m.fcp={value:a.startTime,unit:"millisecond"});break}case"resource":{const u=a.name.replace(l.location.origin,"");Qn(e,a,u,o,c,n);break}}}),te=Math.max(i.length-1,0),Zn(e),e.op==="pageload"){typeof s=="number"&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Measurements] Adding TTFB"),m.ttfb={value:(s-e.startTimestamp)*1e3,unit:"millisecond"},typeof r=="number"&&r<=s&&(m["ttfb.requestTime"]={value:(s-r)*1e3,unit:"millisecond"})),["fcp","fp","lcp"].forEach(o=>{if(!m[o]||n>=e.startTimestamp)return;const c=m[o].value,u=n+S(c),d=Math.abs((u-e.startTimestamp)*1e3),f=d-c;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Measurements] Normalized ${o} from ${c} to ${d} (${f})`),m[o].value=d});const a=m["mark.fid"];a&&m.fid&&(x(e,{description:"first input delay",endTimestamp:a.value+S(m.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:a.value}),delete m["mark.fid"]),"fcp"in m||delete m.cls,Object.keys(m).forEach(o=>{e.setMeasurement(o,m[o].value,m[o].unit)}),ti(e)}I=void 0,j=void 0,m={}}function zn(e,t,n,i,s){const r=s+n,a=r+i;return x(e,{description:t.name,endTimestamp:a,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:r}),r}function Jn(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(i=>{rt(e,t,i,n)}),rt(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),rt(e,t,"fetch",n,"cache","domainLookupStart"),rt(e,t,"domainLookup",n,"DNS"),Kn(e,t,n)}function rt(e,t,n,i,s,r){const a=r?t[r]:t[`${n}End`],o=t[`${n}Start`];!o||!a||x(e,{op:"browser",origin:"auto.browser.browser.metrics",description:s||n,startTimestamp:i+S(o),endTimestamp:i+S(a)})}function Kn(e,t,n){x(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+S(t.requestStart),endTimestamp:n+S(t.responseEnd)}),x(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+S(t.responseStart),endTimestamp:n+S(t.responseEnd)})}function Qn(e,t,n,i,s,r){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const a={};"transferSize"in t&&(a["http.response_transfer_size"]=t.transferSize),"encodedBodySize"in t&&(a["http.response_content_length"]=t.encodedBodySize),"decodedBodySize"in t&&(a["http.decoded_response_content_length"]=t.decodedBodySize),"renderBlockingStatus"in t&&(a["resource.render_blocking_status"]=t.renderBlockingStatus);const o=r+i,c=o+s;x(e,{description:n,endTimestamp:c,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:o,data:a})}function Zn(e){const t=l.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),gt(n.rtt)&&(m["connection.rtt"]={value:n.rtt,unit:"millisecond"})),gt(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`),gt(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}function ti(e){I&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Measurements] Adding LCP Data"),I.element&&e.setTag("lcp.element",dt(I.element)),I.id&&e.setTag("lcp.id",I.id),I.url&&e.setTag("lcp.url",I.url.trim().slice(0,200)),e.setTag("lcp.size",I.size)),j&&j.sources&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Measurements] Adding CLS Data"),j.sources.forEach((t,n)=>e.setTag(`cls.source.${n+1}`,dt(t.node))))}const It=["localhost",/^\/(?!\/)/],Bt={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:It,tracePropagationTargets:It};function ei(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:i,tracingOrigins:s,shouldCreateSpanForRequest:r,enableHTTPTimings:a}={traceFetch:Bt.traceFetch,traceXHR:Bt.traceXHR,...e},o=typeof r=="function"?r:d=>!0,c=d=>ri(d,i||s),u={};t&&q("fetch",d=>{const f=ai(d,o,c,u);a&&f&&ee(f)}),n&&q("xhr",d=>{const f=ci(d,o,c,u);a&&f&&ee(f)})}function ni(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function ee(e){const t=e.data.url,n=new PerformanceObserver(i=>{i.getEntries().forEach(r=>{ni(r)&&r.name.endsWith(t)&&(si(r).forEach(o=>e.setData(...o)),n.disconnect())})});n.observe({entryTypes:["resource"]})}function ii(e){let t="unknown",n="unknown",i="";for(const s of e){if(s==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(s))){t=i==="h"?"http":i,n=e.split(i)[1];break}i+=s}return i===e&&(t=i),{name:t,version:n}}function v(e=0){return((G||performance.timeOrigin)+e)/1e3}function si(e){const{name:t,version:n}=ii(e.nextHopProtocol),i=[];return i.push(["network.protocol.version",n],["network.protocol.name",t]),G?[...i,["http.request.redirect_start",v(e.redirectStart)],["http.request.fetch_start",v(e.fetchStart)],["http.request.domain_lookup_start",v(e.domainLookupStart)],["http.request.domain_lookup_end",v(e.domainLookupEnd)],["http.request.connect_start",v(e.connectStart)],["http.request.secure_connection_start",v(e.secureConnectionStart)],["http.request.connection_end",v(e.connectEnd)],["http.request.request_start",v(e.requestStart)],["http.request.response_start",v(e.responseStart)],["http.request.response_end",v(e.responseEnd)]]:i}function ri(e,t){return we(e,t||It)}function ai(e,t,n,i){if(!z()||!e.fetchData)return;const s=t(e.fetchData.url);if(e.endTimestamp&&s){const p=e.fetchData.__span;if(!p)return;const h=i[p];if(h){if(e.response){h.setHttpStatus(e.response.status);const T=e.response&&e.response.headers&&e.response.headers.get("content-length"),g=parseInt(T);g>0&&h.setData("http.response_content_length",g)}else e.error&&h.setStatus("internal_error");h.finish(),delete i[p]}return}const r=D(),a=r.getScope(),o=r.getClient(),c=a.getSpan(),{method:u,url:d}=e.fetchData,f=s&&c?c.startChild({data:{url:d,type:"fetch","http.method":u},description:`${u} ${d}`,op:"http.client",origin:"auto.http.browser"}):void 0;if(f&&(e.fetchData.__span=f.spanId,i[f.spanId]=f),n(e.fetchData.url)&&o){const p=e.args[0];e.args[1]=e.args[1]||{};const h=e.args[1];h.headers=oi(p,o,a,h,f)}return f}function oi(e,t,n,i,s){const r=s||n.getSpan(),a=r&&r.transaction,{traceId:o,sampled:c,dsc:u}=n.getPropagationContext(),d=r?r.toTraceparent():Gt(o,void 0,c),f=a?a.getDynamicSamplingContext():u||wt(o,t,n),p=Rt(f),h=typeof Request<"u"&&P(e,Request)?e.headers:i.headers;if(h)if(typeof Headers<"u"&&P(h,Headers)){const T=new Headers(h);return T.append("sentry-trace",d),p&&T.append(bt,p),T}else if(Array.isArray(h)){const T=[...h,["sentry-trace",d]];return p&&T.push([bt,p]),T}else{const T="baggage"in h?h.baggage:void 0,g=[];return Array.isArray(T)?g.push(...T):T&&g.push(T),p&&g.push(p),{...h,"sentry-trace":d,baggage:g.length>0?g.join(","):void 0}}else return{"sentry-trace":d,baggage:p}}function ci(e,t,n,i){const s=e.xhr,r=s&&s[$];if(!z()||s&&s.__sentry_own_request__||!s||!r)return;const a=t(r.url);if(e.endTimestamp&&a){const f=s.__sentry_xhr_span_id__;if(!f)return;const p=i[f];p&&(p.setHttpStatus(r.status_code),p.finish(),delete i[f]);return}const o=D(),c=o.getScope(),u=c.getSpan(),d=a&&u?u.startChild({data:{...r.data,type:"xhr","http.method":r.method,url:r.url},description:`${r.method} ${r.url}`,op:"http.client",origin:"auto.http.browser"}):void 0;if(d&&(s.__sentry_xhr_span_id__=d.spanId,i[s.__sentry_xhr_span_id__]=d),s.setRequestHeader&&n(r.url))if(d){const f=d&&d.transaction,p=f&&f.getDynamicSamplingContext(),h=Rt(p);ne(s,d.toTraceparent(),h)}else{const f=o.getClient(),{traceId:p,sampled:h,dsc:T}=c.getPropagationContext(),g=Gt(p,void 0,h),H=T||(f?wt(p,f,c):void 0),R=Rt(H);ne(s,g,R)}return d}function ne(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(bt,n)}catch{}}function ui(e,t=!0,n=!0){if(!l||!l.location){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn("Could not initialize routing instrumentation due to invalid location");return}let i=l.location.href,s;t&&(s=e({name:l.location.pathname,startTimestamp:G?G/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&q("history",({to:r,from:a})=>{if(a===void 0&&i&&i.indexOf(r)!==-1){i=void 0;return}a!==r&&(i=void 0,s&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] Finishing current transaction with op: ${s.op}`),s.finish()),s=e({name:l.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))})}const di="BrowserTracing",_i={...ct,markBackgroundTransactions:!0,routingInstrumentation:ui,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,_experiments:{},...Bt};class Li{constructor(t){this.name=di,this._hasSetTracePropagationTargets=!1,wn(),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&(this._hasSetTracePropagationTargets=!!(t&&(t.tracePropagationTargets||t.tracingOrigins))),this.options={..._i,...t},this.options._experiments.enableLongTask!==void 0&&(this.options.enableLongTask=this.options._experiments.enableLongTask),t&&!t.tracePropagationTargets&&t.tracingOrigins&&(this.options.tracePropagationTargets=t.tracingOrigins),this._collectWebVitals=$n(),this.options.enableLongTask&&Fn(),this.options._experiments.enableInteractions&&jn()}setupOnce(t,n){this._getCurrentHub=n;const s=n().getClient(),r=s&&s.getOptions(),{routingInstrumentation:a,startTransactionOnLocationChange:o,startTransactionOnPageLoad:c,markBackgroundTransactions:u,traceFetch:d,traceXHR:f,shouldCreateSpanForRequest:p,enableHTTPTimings:h,_experiments:T}=this.options,g=r&&r.tracePropagationTargets,H=g||this.options.tracePropagationTargets;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&this._hasSetTracePropagationTargets&&g&&_.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),a(R=>{const M=this._createRouteTransaction(R);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(M,R,n),M},c,o),u&&Yn(),T.enableInteractions&&this._registerInteractionListener(),ei({traceFetch:d,traceXHR:f,tracePropagationTargets:H,shouldCreateSpanForRequest:p,enableHTTPTimings:h})}_createRouteTransaction(t){if(!this._getCurrentHub){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn(`[Tracing] Did not create ${t.op} transaction because _getCurrentHub is invalid.`);return}const n=this._getCurrentHub(),{beforeNavigate:i,idleTimeout:s,finalTimeout:r,heartbeatInterval:a}=this.options,o=t.op==="pageload",c=o?ie("sentry-trace"):"",u=o?ie("baggage"):"",{traceparentData:d,dynamicSamplingContext:f,propagationContext:p}=gn(c,u),h={...t,...d,metadata:{...t.metadata,dynamicSamplingContext:d&&!f?{}:f},trimEnd:!0},T=typeof i=="function"?i(h):h,g=T===void 0?{...h,sampled:!1}:T;g.metadata=g.name!==h.name?{...g.metadata,source:"custom"}:g.metadata,this._latestRouteName=g.name,this._latestRouteSource=g.metadata&&g.metadata.source,g.sampled===!1&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] Will not send ${g.op} transaction because of beforeNavigate.`),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] Starting ${g.op} transaction on scope`);const{location:H}=l,R=Qt(n,g,s,r,!0,{location:H},a),M=n.getScope();return o&&d?M.setPropagationContext(p):M.setPropagationContext({traceId:R.traceId,spanId:R.spanId,parentSpanId:R.parentSpanId,sampled:R.sampled}),R.registerBeforeFinishCallback(Ne=>{this._collectWebVitals(),Vn(Ne)}),R}_registerInteractionListener(){let t;const n=()=>{const{idleTimeout:i,finalTimeout:s,heartbeatInterval:r}=this.options,a="ui.action.click",o=J();if(o&&o.op&&["navigation","pageload"].includes(o.op)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn(`[Tracing] Did not create ${a} transaction because a pageload or navigation transaction is in progress.`);return}if(t&&(t.setFinishReason("interactionInterrupted"),t.finish(),t=void 0),!this._getCurrentHub){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn(`[Tracing] Did not create ${a} transaction because _getCurrentHub is invalid.`);return}if(!this._latestRouteName){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn(`[Tracing] Did not create ${a} transaction because _latestRouteName is missing.`);return}const c=this._getCurrentHub(),{location:u}=l,d={name:this._latestRouteName,op:a,trimEnd:!0,metadata:{source:this._latestRouteSource||"url"}};t=Qt(c,d,i,s,!0,{location:u},r)};["click"].forEach(i=>{addEventListener(i,n,{once:!1,capture:!0})})}}function ie(e){const t=Ae(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}export{bi as $,Si as A,Ri as B,we as C,he as D,xe as E,oe as F,y as G,Ni as H,Di as I,fi as J,hi as K,li as L,De as M,ve as N,yi as O,Ii as P,Ft as Q,He as R,B as S,q as T,C as U,Ti as V,k as W,dt as X,mi as Y,$ as Z,Ui as _,ke as a,Fe as a0,on as a1,G as a2,w as a3,Oi as a4,ge as a5,wn as a6,pn as a7,On as a8,Dt as a9,Jt as aa,Dn as ab,xi as ac,Ci as ad,Pi as ae,Ai as af,Li as ag,Bt as ah,ei as ai,wi as aj,Be as ak,Bi as al,V as am,ot as an,Se as ao,Ut as ap,di as aq,z as ar,ln as as,Bn as at,Qt as au,Ge as b,Le as c,gi as d,ki as e,Y as f,$e as g,_e as h,P as i,J as j,D as k,_ as l,rn as m,Yi as n,b as o,A as p,Nt as q,Gi as r,vi as s,xt as t,Ei as u,pi as v,ft as w,wt as x,W as y,kt as z};
