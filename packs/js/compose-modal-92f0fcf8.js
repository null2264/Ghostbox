import{u as R,d as C,r as T,e6 as F,e7 as w,R as E,bu as O,W as k,a as e,e8 as x,e9 as q,q as A,y as G,F as o,H as S,ah as H,ea as N,aD as P,aH as $,bv as z,eb as V,ec as Q,o as W}from"../index-22864ca1.js";import{c as j}from"./modal-root-9233d306.js";var _=W({close:{id:"lightbox.close",defaultMessage:"Close"},confirm:{id:"confirmations.cancel.confirm",defaultMessage:"Discard"},cancelEditing:{id:"confirmations.cancel_editing.confirm",defaultMessage:"Cancel editing"}}),U=function(t){var n=t.onClose,d=t.composeId,r=d===void 0?"compose-modal":d,g=R(),s=C(),l=T.useRef(null),u=F(r),a=u,i=a.id,c=a.privacy,f=a.in_reply_to,h=a.quote,p=a.group_id,v=w(l,function(m){s(N(r,m,g))}),b=v.isDragging,y=v.isDraggedOver,I=function(){j(u)?s(P("CONFIRM",{icon:$,heading:i?e(o,{id:"confirmations.cancel_editing.heading",defaultMessage:"Cancel post editing"}):e(o,{id:"confirmations.cancel.heading",defaultMessage:"Discard post"}),message:i?e(o,{id:"confirmations.cancel_editing.message",defaultMessage:"Are you sure you want to cancel editing this post? All changes will be lost."}):e(o,{id:"confirmations.cancel.message",defaultMessage:"Are you sure you want to cancel creating this post?"}),confirm:g.formatMessage(i?_.cancelEditing:_.confirm),onConfirm:function(){s(z("COMPOSE")),s(V())}})):n("COMPOSE")},D=function(){return i?e(o,{id:"navigation_bar.compose_edit",defaultMessage:"Edit post"}):c==="direct"?e(o,{id:"navigation_bar.compose_direct",defaultMessage:"Direct message"}):f&&p?e(o,{id:"navigation_bar.compose_group_reply",defaultMessage:"Reply to group post"}):p?e(o,{id:"navigation_bar.compose_group",defaultMessage:"Compose to group"}):f?e(o,{id:"navigation_bar.compose_reply",defaultMessage:"Reply to post"}):h?e(o,{id:"navigation_bar.compose_quote",defaultMessage:"Quote post"}):e(o,{id:"navigation_bar.compose",defaultMessage:"Compose new post"})};return E.createElement(O,{ref:l,title:D(),onClose:I,className:k({"border-2 border-primary-600 border-dashed !z-[99]":b,"ring-2 ring-offset-2 ring-primary-600":y})},e(x,{id:r,extra:e(B,{composeId:r,groupId:p})}))},B=function(t){var n=t.composeId,d=t.groupId,r=C(),g=q(d||"",!1),s=g.group,l=A(function(i){var c;return!!((c=i.compose.get(n))!==null&&c!==void 0&&c.group_timeline_visible)}),u=function(){r(Q(n,!l))},a="group-timeline-visible+".concat(n);return!s||s.locked?null:e(S,{alignItems:"center",space:4},void 0,e("label",{className:"ml-auto cursor-pointer",htmlFor:a},void 0,e(G,{theme:"muted"},void 0,e(o,{id:"compose_group.share_to_followers",defaultMessage:"Share with my followers"}))),e(H,{id:a,checked:l,onChange:u,size:"sm"}))};export{U as default};
