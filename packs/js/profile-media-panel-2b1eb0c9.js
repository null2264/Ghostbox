import{d as _,r as l,at as y,q as I,b0 as h,O as x,b1 as E,a,aB as b,F as c,y as O,aD as p}from"../index-7380452a.js";import{W as S}from"./widget-2ac720e4.js";import{M as D}from"./media-item-9b67131c.js";import"./arrow-right-b75290c7.js";import"./volume-08f8a8f1.js";import"./es.array.last-index-of-ca8fdd84.js";var W=function(f){var e=f.account,n=_(),m=l.useState(!0),d=y(m,2),v=d[0],o=d[1],g=I(function(r){return e?h(r,e==null?void 0:e.id):x()}),M=function(t){if(t.type==="video")n(p("VIDEO",{media:t,status:t.status}));else{var s=t.getIn(["status","media_attachments"]),i=s.findIndex(function(u){return u.id===t.id});n(p("MEDIA",{media:s,index:i,status:t.status}))}};l.useEffect(function(){o(!0),e&&n(E(e.id)).then(function(){return o(!1)}).catch(function(){})},[e==null?void 0:e.id]);var A=function(){var t=g.filter(function(i){return i.getIn(["status","visibility"])==="public"}),s=t.slice(0,9);return s.isEmpty()?a(O,{size:"sm",theme:"muted"},void 0,a(c,{id:"media_panel.empty_message",defaultMessage:"No media found."})):a("div",{className:"grid grid-cols-3 gap-1"},void 0,s.map(function(i,u){return a(D,{attachment:i,onOpenMedia:M},"".concat(i.getIn(["status","id"]),"+").concat(i.id))}))};return a(S,{title:a(c,{id:"media_panel.title",defaultMessage:"Media"})},void 0,e&&a("div",{className:"w-full"},void 0,v?a(b,{}):A()))};export{W as default};
