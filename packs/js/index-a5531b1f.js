import{u as _,d as R,g as T,t as x,r as s,q as l,Z as w,$ as A,a0 as u,a1 as $,a as t,a2 as b,y as m,F as c,L as P,X as k,o as E}from"../index-630f29c3.js";import{P as F}from"./pull-to-refresh-f3623232.js";import{T as H}from"./timeline-893701e2.js";import"./scroll-top-button-5c60d429.js";import"./status-list-9c2f5976.js";import"./scrollable-list-4a32fea3.js";import"./index-f7d044ca.js";import"./load-more-756702b9.js";import"./status-container-1ee16156.js";import"./pending-status-acd636fd.js";import"./poll-preview-b5d248b2.js";import"./noop-10ec6735.js";var L=E({title:{id:"column.home",defaultMessage:"Home"}}),G=function(){var v=_(),a=R(),h=T(),d=x(),o=s.useRef(null),f=l(function(i){var e;return((e=i.timelines.get("home"))===null||e===void 0?void 0:e.isPartial)===!0}),n=l(function(i){var e;return(e=i.timelines.get("home"))===null||e===void 0?void 0:e.feedAccountId}),r=l(function(i){return n?i.relationships.get(n):null}),g=l(function(i){var e;return(e=i.timelines.get("home"))===null||e===void 0?void 0:e.next}),y=function(e){a(u({url:g,maxId:e,accountId:n}))},I=function(){f?o.current=setInterval(function(){a(u())},3e3):p()},p=function(){o.current&&(clearInterval(o.current),o.current=null)},M=function(){return a(u({accountId:n}))};return s.useEffect(function(){return I(),function(){p()}},[f]),s.useEffect(function(){n&&a(w([n]))},[]),s.useEffect(function(){r&&!(r!=null&&r.following)&&(a(A()),a(u({},function(){a($())})))},[n]),t(k,{label:v.formatMessage(L.title),transparent:!0,withHeader:!1},void 0,t(F,{onRefresh:M},void 0,t(H,{scrollKey:"home_timeline",onLoadMore:y,timelineId:"home",divideType:"space",showAds:!0,emptyMessage:t(b,{space:1},void 0,t(m,{size:"xl",weight:"medium",align:"center"},void 0,t(c,{id:"empty_column.home.title",defaultMessage:"You're not following anyone yet"})),t(m,{theme:"muted",align:"center"},void 0,t(c,{id:"empty_column.home.subtitle",defaultMessage:"{siteTitle} gets more interesting once you follow other users.",values:{siteTitle:d.title}})),h.federating&&t(m,{theme:"muted",align:"center"},void 0,t(c,{id:"empty_column.home",defaultMessage:"Or you can visit {public} to get started and meet other users.",values:{public:t(P,{to:"/timeline/local",className:"text-primary-600 hover:underline dark:text-primary-400"},void 0,t(c,{id:"empty_column.home.local_tab",defaultMessage:"the {site_title} tab",values:{site_title:d.title}}))}})))})))};export{G as default};
