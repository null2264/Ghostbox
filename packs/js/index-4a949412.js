import{u as E,d as q,t as G,r as s,ax as i,a as e,bG as H,y as N,F as n,L as Y,R as y,bH as F,bI as _,bK as $,ae as B,X as D,o as K,i$ as X,br as A}from"../index-c9399634.js";var t=K({heading:{id:"column.migration",defaultMessage:"Account migration"},submit:{id:"migration.submit",defaultMessage:"Move followers"},moveAccountSuccess:{id:"migration.move_account.success",defaultMessage:"Account successfully moved."},moveAccountFail:{id:"migration.move_account.fail",defaultMessage:"Account migration failed."},moveAccountFailCooldownPeriod:{id:"migration.move_account.fail.cooldown_period",defaultMessage:"You have moved your account too recently. Please try again later."},acctFieldLabel:{id:"migration.fields.acct.label",defaultMessage:"Handle of the new account"},acctFieldPlaceholder:{id:"migration.fields.acct.placeholder",defaultMessage:"username@domain"},currentPasswordFieldLabel:{id:"migration.fields.confirm_password.label",defaultMessage:"Current password"}}),J=function(){var a=E(),S=q(),x=G(),l=x.pleroma.metadata.migration_cooldown_period,P=s.useState(""),c=i(P,2),u=c[0],d=c[1],C=s.useState(""),m=i(C,2),g=m[0],v=m[1],I=s.useState(!1),f=i(I,2),L=f[0],h=f[1],p=function(r){r.target.name==="password"?v(r.target.value):d(r.target.value)},k=function(){d(""),v("")},w=function(r){return h(!0),S(X(u,g)).then(function(){k(),A.success(a.formatMessage(t.moveAccountSuccess))}).catch(function(T){var o,b=a.formatMessage(t.moveAccountFail),R=(o=T.response)===null||o===void 0||(o=o.data)===null||o===void 0?void 0:o.error;R==="You are within cooldown period."&&(b=a.formatMessage(t.moveAccountFailCooldownPeriod)),A.error(b)}).then(function(){h(!1)})};return e(D,{label:a.formatMessage(t.heading)},void 0,e(H,{onSubmit:w},void 0,e(N,{theme:"muted"},void 0,e(n,{id:"migration.hint",defaultMessage:"This will move your followers to the new account. No other data will be moved. To perform migration, you need to {link} on your new account first.",values:{link:e(Y,{className:"text-primary-600 hover:text-primary-800 hover:underline dark:text-primary-400 dark:hover:text-primary-500",to:"/settings/aliases"},void 0,e(n,{id:"migration.hint.link",defaultMessage:"create an account alias"}))}}),!!l&&y.createElement(y.Fragment,null," ",e(n,{id:"migration.hint.cooldown_period",defaultMessage:"If you migrate your account, you will not be able to migrate your account for {cooldownPeriod, plural, one {one day} other {the next # days}}.",values:{cooldownPeriod:l}}))),e(F,{labelText:a.formatMessage(t.acctFieldLabel)},void 0,e(_,{name:"targetAccount",placeholder:a.formatMessage(t.acctFieldPlaceholder),onChange:p,value:u,required:!0})),e(F,{labelText:a.formatMessage(t.currentPasswordFieldLabel)},void 0,e(_,{type:"password",name:"password",onChange:p,value:g,required:!0})),e($,{},void 0,e(B,{theme:"primary",text:a.formatMessage(t.submit),onClick:w,disabled:L}))))};export{J as default};
