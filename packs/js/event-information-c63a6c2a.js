import{d as V,r,aP as H,q as N,aY as Y,f as $,ax as M,de as w,eu as G,a as e,R as o,F as u,y as l,a3 as d,H as c,A as g,hE as j,hD as B,d9 as y,hF as Q,aG as J,cL as K,gP as O,bT as U,ke as W,aH as X}from"../index-621b10ea.js";var te=function(x){var v=x.params,m=V(),k=r.useCallback(H(),[]),a=N(function(i){return k(i,{id:v.statusId})}),D=Y(),I=D.tileServer,E=$(),p=E.get("showSensitiveMedia"),F=r.useState(!!a),f=M(F,2),C=f[0],h=f[1],T=r.useState(w(a,p)),S=M(T,2),_=S[0],b=S[1];r.useEffect(function(){m(G(v.statusId)).then(function(){h(!0)}).catch(function(){h(!0)}),b(w(a,p))},[v.statusId]);var q=function(){b(!_)},R=function(t){t.preventDefault(),m(X("EVENT_MAP",{statusId:a.id}))},L=r.useCallback(function(){var i,t=a.event;if(!t.location)return null;var n=[e(o.Fragment,{},"event-name",t.location.get("name"))];(i=t.location.get("street"))!==null&&i!==void 0&&i.trim()&&n.push(e(o.Fragment,{},"event-street",e("br",{}),t.location.get("street")));var s=[t.location.get("postalCode"),t.location.get("locality"),t.location.get("country")].filter(function(A){return A}).join(", ");return s&&n.push(e(o.Fragment,{},"event-address",e("br",{}),s)),I&&t.location.get("latitude")&&n.push(e(o.Fragment,{},"event-map",e("br",{}),e("a",{href:"#",className:"text-primary-600 hover:underline dark:text-accent-blue",onClick:R},void 0,e(u,{id:"event.show_on_map",defaultMessage:"Show on map"})))),t.location&&e(d,{space:1},void 0,e(l,{size:"xl",weight:"bold"},void 0,e(u,{id:"event.location",defaultMessage:"Location"})),e(c,{space:2,alignItems:"center"},void 0,e(g,{src:j}),e(l,{},void 0,n)))},[a]),P=r.useCallback(function(){var i=a.event;if(!i.start_time)return null;var t=new Date(i.start_time),n=i.end_time&&new Date(i.end_time),s=n&&t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear();return e(d,{space:1},void 0,e(l,{size:"xl",weight:"bold"},void 0,e(u,{id:"event.date",defaultMessage:"Date"})),e(c,{space:2,alignItems:"center"},void 0,e(g,{src:B}),e(l,{},void 0,e(y,{value:t,year:"numeric",month:"long",day:"2-digit",weekday:"long",hour:"2-digit",minute:"2-digit"}),n&&o.createElement(o.Fragment,null," - ",e(y,{value:n,year:s?void 0:"numeric",month:s?void 0:"long",day:s?void 0:"2-digit",weekday:s?void 0:"long",hour:"2-digit",minute:"2-digit"})))))},[a]),z=r.useCallback(function(){var i;return(i=a.event)!==null&&i!==void 0&&i.links.size?e(d,{space:1},void 0,e(l,{size:"xl",weight:"bold"},void 0,e(u,{id:"event.website",defaultMessage:"External links"})),a.event.links.map(function(t){return e(c,{space:2,alignItems:"center"},void 0,e(g,{src:Q}),e("a",{href:t.remote_url||t.url,className:"text-primary-600 hover:underline dark:text-accent-blue",target:"_blank"},void 0,(t.remote_url||t.url).replace(/^https?:\/\//,"")))})):null},[a]);return!a&&C?e(J,{}):a?e(d,{className:"mt-4 sm:p-2",space:2},void 0,!!a.contentHtml.trim()&&e(d,{space:1},void 0,e(l,{size:"xl",weight:"bold"},void 0,e(u,{id:"event.description",defaultMessage:"Description"})),e(U,{status:a,collapsable:!1,translatable:!0}),e(W,{status:a})),e(O,{status:a,showMedia:_,onToggleVisibility:q}),a.quote&&a.pleroma.get("quote_visible",!0)&&e(K,{statusId:a.quote}),L(),P(),z()):null};export{te as default};
