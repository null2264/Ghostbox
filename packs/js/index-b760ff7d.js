import{u as _,d as R,g as T,t as x,r as s,q as l,Z as b,$ as w,a0 as u,a1 as A,a as t,a2 as $,a3 as P,y as m,F as c,L as k,X as E,o as F}from"../index-3c55338e.js";import{P as H}from"./pull-to-refresh-a4ada115.js";import{T as L}from"./timeline-d1d5697a.js";import"./scroll-top-button-9911f6be.js";import"./status-list-e57df824.js";import"./scrollable-list-2ffd3932.js";import"./index-2d4b5c6d.js";import"./load-more-dc29ed30.js";import"./status-container-8c2ce2aa.js";import"./pending-status-60eda935.js";import"./poll-preview-78390bd5.js";import"./noop-b051dec8.js";var N=F({title:{id:"column.home",defaultMessage:"Home"}}),J=function(){var p=_(),a=R(),h=T(),d=x(),o=s.useRef(null),f=l(function(i){var e;return((e=i.timelines.get("home"))===null||e===void 0?void 0:e.isPartial)===!0}),n=l(function(i){var e;return(e=i.timelines.get("home"))===null||e===void 0?void 0:e.feedAccountId}),r=l(function(i){return n?i.relationships.get(n):null}),g=l(function(i){var e;return(e=i.timelines.get("home"))===null||e===void 0?void 0:e.next}),y=function(e){a(u({url:g,maxId:e,accountId:n}))},I=function(){f?o.current=setInterval(function(){a(u())},3e3):v()},v=function(){o.current&&(clearInterval(o.current),o.current=null)},M=function(){return a(u({accountId:n}))};return s.useEffect(function(){return I(),function(){v()}},[f]),s.useEffect(function(){n&&a(b([n]))},[]),s.useEffect(function(){r&&!(r!=null&&r.following)&&(a(w()),a(u({},function(){a(A())})))},[n]),t(E,{label:p.formatMessage(N.title),transparent:!0,withHeader:!1},void 0,t(H,{onRefresh:M},void 0,t($,{variant:"rounded",pad:!1,className:"px-6"},void 0,t(L,{scrollKey:"home_timeline",onLoadMore:y,timelineId:"home",divideType:"border",showAds:!0,emptyMessage:t(P,{space:1},void 0,t(m,{size:"xl",weight:"medium",align:"center"},void 0,t(c,{id:"empty_column.home.title",defaultMessage:"You're not following anyone yet"})),t(m,{theme:"muted",align:"center"},void 0,t(c,{id:"empty_column.home.subtitle",defaultMessage:"{siteTitle} gets more interesting once you follow other users.",values:{siteTitle:d.title}})),h.federating&&t(m,{theme:"muted",align:"center"},void 0,t(c,{id:"empty_column.home",defaultMessage:"Or you can visit {public} to get started and meet other users.",values:{public:t(k,{to:"/timeline/local",className:"text-primary-600 hover:underline dark:text-primary-400"},void 0,t(c,{id:"empty_column.home.local_tab",defaultMessage:"the {site_title} tab",values:{site_title:d.title}}))}})))}))))};export{J as default};
