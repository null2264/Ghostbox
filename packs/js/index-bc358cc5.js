import{d as g,a9 as w,q as h,aq as D,a as c,ar as x,r as S,Q as k,as as y,R as L,F as U,u as A,at as R,au as b,X as H,o as E,ap as _}from"../index-a37c6344.js";import{u as q,A as F}from"./account-search-f5a75770.js";import{S as P}from"./scrollable-list-4cc1a2a0.js";import{S as T}from"./status-container-5491258f.js";import"./index-cf9b12ae.js";import"./load-more-96db1369.js";var z=function(t){var n=t.conversationId,r=t.onMoveUp,u=t.onMoveDown,d=g(),m=w(),l=h(function(s){var i=s.conversations.items.find(function(M){return M.id===n});return{accounts:i.accounts.map(function(M){return D(s,M)}),unread:i.unread,lastStatusId:i.last_status||null}}),p=l.accounts,v=l.unread,f=l.lastStatusId,e=function(){v&&d(x(n)),m.push("/statuses/".concat(f))},a=function(){r(n)},o=function(){u(n)};return f===null?null:c(T,{id:f,unread:v,otherAccounts:p,onMoveUp:a,onMoveDown:o,onClick:e})},B=function(){var t=g(),n=S.useRef(null),r=h(function(e){return e.conversations.items}),u=h(function(e){return e.conversations.isLoading}),d=h(function(e){return e.conversations.hasMore}),m=function(a){return r.findIndex(function(o){return o.id===a})},l=function(a){var o=m(a)-1;v(o)},p=function(a){var o=m(a)+1;v(o)},v=function(a){var o;(o=n.current)===null||o===void 0||o.scrollIntoView({index:a,behavior:"smooth",done:function(){var i=document.querySelector('#direct-list [data-index="'.concat(a,'"] .focusable'));i&&i.focus()}})},f=k(function(){var e=r.getIn([-1,"id"]);e&&t(y({maxId:e}))},300,{leading:!0});return L.createElement(P,{hasMore:d,onLoadMore:f,id:"direct-list",scrollKey:"direct",ref:n,isLoading:u,showLoading:u&&r.size===0,emptyMessage:c(U,{id:"empty_column.direct",defaultMessage:"You don't have any direct messages yet. When you send or receive one, it will show up here."})},r.map(function(e){return c(z,{conversationId:e.id,onMoveUp:l,onMoveDown:p},e.id)}))},I=E({title:{id:"column.direct",defaultMessage:"Direct messages"},searchPlaceholder:{id:"direct.search_placeholder",defaultMessage:"Send a message toâ€¦"}}),Y=function(){var t=A(),n=g();q(),S.useEffect(function(){return n(R()),n(y()),function(){n(b())}},[]);var r=function(d){n(_(d))};return c(H,{label:t.formatMessage(I.title)},void 0,c(F,{placeholder:t.formatMessage(I.searchPlaceholder),onSelected:r}),c(B,{}))};export{Y as default};
