import{cI as I,r as M,ax as C,R as D,a as i,cJ as q,cG as v,O as _,cK as A,cL as k,q as E,W as y,a2 as W,H as G,b5 as H,cM as T,a3 as z,bT as K,cN as L,cO as O}from"../index-1d07a6e7.js";import{P as $}from"./poll-preview-0863c43f.js";var j=I({style:{},itemsDimensions:[],size:1,width:0}),B=function(t){var s=t.media,c=t.defaultWidth,d=M.useState(c),o=C(d,2),l=o[0],a=o[1],p=function(e){e&&a(e.offsetWidth)},m=function(e){var n={},u=[];return e===1?(n.height=l*9/16,u=[{w:"100%",h:"100%"}]):e===2?(n.height=l/2,u=[{w:"50%",h:"100%",r:"2px"},{w:"50%",h:"100%",l:"2px"}]):e===3?(n.height=l,u=[{w:"50%",h:"50%",b:"2px",r:"2px"},{w:"50%",h:"50%",b:"2px",l:"2px"},{w:"100%",h:"50%",t:"2px"}]):e>=4&&(n.height=l,u=[{w:"50%",h:"50%",b:"2px",r:"2px"},{w:"50%",h:"50%",b:"2px",l:"2px"},{w:"50%",h:"50%",t:"2px",r:"2px"},{w:"50%",h:"50%",t:"2px",l:"2px"}]),j({style:n,itemsDimensions:u,size:e,width:l})},h=function(e,n){var u=e.w,x=e.h,b=e.t||"auto",g=e.r||"auto",P=e.b||"auto",S=e.l||"auto",N=e.float||"left",R=e.pos||"relative";return i("div",{className:"media-gallery__item animate-pulse bg-primary-200",style:{position:R,float:N,left:S,top:b,right:g,bottom:P,height:x,width:u}},n)},w=m(s.size);return D.createElement("div",{className:"media-gallery media-gallery--placeholder",style:w.get("style"),ref:p},s.take(4).map(function(f,e){return h(w.get("itemsDimensions")[e],e)}))};const J=q(),Q=r=>r.in_reply_to_id?_(r.to||[]).map(t=>v({acct:t})):_(),F=r=>r.hasIn(["poll","options"])?r.poll.update("options",t=>t.map(s=>v({title:s}))):null,U=(r,t,s)=>{const c=r.me,d=J(r,c),o=t.in_reply_to_id,l=v({account:d,content:t.status.replace(new RegExp(`
`,"g"),"<br>"),id:`æœ«pending-${s}`,in_reply_to_account_id:r.statuses.getIn([o,"account"],null),in_reply_to_id:o,media_attachments:(t.media_ids||_()).map(a=>v({id:a})),mentions:Q(t),poll:F(t),quote:t.quote_id,sensitive:t.sensitive,visibility:t.visibility});return A(k(l))};var V=function(t){return!!t.content.match(/https?:\/\/\S*/)},X=function(t){var s=t.status;return s.media_attachments&&!s.media_attachments.isEmpty()?i(B,{media:s.media_attachments}):!s.quote&&V(s)?i(O,{}):null},tt=function(t){var s=t.idempotencyKey,c=t.className,d=t.muted,o=t.thread,l=o===void 0?!1:o,a=E(function(m){var h=m.pending_statuses.get(s);return h?U(m,h,s):null});if(!a||!a.account)return null;var p=a.account;return i("div",{className:y("opacity-50",c)},void 0,i("div",{className:y("status",{"status-reply":!!a.in_reply_to_id,muted:d}),"data-id":a.id},void 0,i(W,{className:y("py-6 sm:p-5","status-".concat(a.visibility),{"status-reply":!!a.in_reply_to_id}),variant:l?"default":"rounded"},void 0,i("div",{className:"mb-4"},void 0,i(G,{justifyContent:"between",alignItems:"start"},void 0,i(H,{account:p,timestamp:a.created_at,hideActions:!0,withLinkToProfile:!1},p.id))),i("div",{className:"status__content-wrapper"},void 0,i(T,{status:a}),i(z,{space:4},void 0,i(K,{status:a,collapsable:!0}),i(X,{status:a}),a.poll&&i($,{pollId:a.poll}),a.quote&&i(L,{statusId:a.quote}))))))};export{tt as P};
