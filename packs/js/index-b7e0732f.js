import{r as h,cG as j,a as e,H as I,q as p,b7 as P,N as T,a3 as g,y as i,d5 as C,F as S,b5 as k,bD as E,b6 as G,W as x,hC as H,cB as O,u as q,d as U,j7 as W,t as X,g as $,ax as A,j8 as J,X as K,o as Q,j9 as V}from"../index-a1fdd7c7.js";import{L as Y}from"./load-more-f48acfb2.js";var f=function(t){var r=t.name,c=t.value,n=t.checked,o=t.onChange,a=t.label,d=h.useMemo(function(){return"radio-".concat(j())},[]);return e(I,{alignItems:"center",space:3},void 0,e("input",{type:"radio",name:r,id:d,value:c,checked:n,onChange:o,className:"h-4 w-4 border-gray-300 text-primary-600 focus:ring-primary-500"}),e("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700"},void 0,a))},Z=function(t){var r,c=t.id,n=p(function(l){return l.me}),o=P(c),a=o.account,d=p(function(l){return T(l).get("autoPlayGif")});if(!a)return null;var y=n!==a.id&&((r=a.relationship)===null||r===void 0?void 0:r.followed_by);return e("div",{className:"flex flex-col divide-y divide-gray-200 rounded-lg bg-white text-center shadow dark:divide-primary-700 dark:bg-primary-800"},void 0,e("div",{className:"relative"},void 0,y&&e("div",{className:"absolute left-2.5 top-2.5"},void 0,e(H,{slug:"opaque",title:"Follows you",id:"account-Status--follows-you"})),e("div",{className:"absolute bottom-2.5 right-2.5"},void 0,e(O,{account:a,small:!0})),e("img",{src:d?a.header:a.header_static,alt:"",className:"h-32 w-full rounded-t-lg object-cover"})),e(g,{space:4,className:"p-3"},void 0,e(G,{account:a,withRelationship:!1}),e(i,{truncate:!0,align:"left",className:x("[&_br]:hidden [&_p:first-child]:inline [&_p:first-child]:truncate [&_p]:hidden"),dangerouslySetInnerHTML:{__html:a.note_emojified||"&nbsp;"}})),e("div",{className:"grid grid-cols-3 gap-1 py-4"},void 0,e(g,{},void 0,e(i,{theme:"primary",size:"md",weight:"medium"},void 0,C(a.statuses_count)),e(i,{theme:"muted",size:"sm"},void 0,e(S,{id:"account.posts",defaultMessage:"Posts"}))),e(g,{},void 0,e(i,{theme:"primary",size:"md",weight:"medium"},void 0,C(a.followers_count)),e(k,{id:"account-Label--followers"},void 0,e(i,{theme:"muted",size:"sm"},void 0,"Followers"))),e(g,{},void 0,e(i,{theme:"primary",size:"md",weight:"medium"},void 0,a.last_status_at?e(E,{theme:"inherit",timestamp:a.last_status_at}):e(S,{id:"account.never_active",defaultMessage:"Never"})),e(k,{id:"account-Status--last-status"},void 0,e(i,{theme:"muted",size:"sm"},void 0,"Last active")))))},m=Q({title:{id:"column.directory",defaultMessage:"Browse profiles"},recentlyActive:{id:"directory.recently_active",defaultMessage:"Recently active"},newArrivals:{id:"directory.new_arrivals",defaultMessage:"New arrivals"},local:{id:"directory.local",defaultMessage:"From {domain} only"},federated:{id:"directory.federated",defaultMessage:"From known fediverse"}}),te=function(){var t=q(),r=U(),c=W(),n=c.search,o=new URLSearchParams(n),a=X(),d=$(),y=p(function(s){return s.user_lists.directory.items}),l=p(function(s){return s.user_lists.directory.isLoading}),F=h.useState(o.get("order")||"active"),_=A(F,2),u=_[0],D=_[1],R=h.useState(!!o.get("local")),N=A(R,2),v=N[0],z=N[1];h.useEffect(function(){r(J({order:u||"active",local:v||!1}))},[u,v]);var M=function(w){D(w.target.value)},L=function(w){z(w.target.value==="1")},B=function(){r(V({order:u||"active",local:v||!1}))};return e(K,{label:t.formatMessage(m.title)},void 0,e(g,{space:4},void 0,e("div",{className:"grid grid-cols-2 gap-2"},void 0,e("div",{},void 0,e(i,{weight:"medium"},void 0,"Display filter"),e("fieldset",{className:"mt-3"},void 0,e("legend",{className:"sr-only"},void 0,"Display filter"),e("div",{className:"space-y-2"},void 0,e(f,{name:"order",value:"active",label:t.formatMessage(m.recentlyActive),checked:u==="active",onChange:M}),e(f,{name:"order",value:"new",label:t.formatMessage(m.newArrivals),checked:u==="new",onChange:M})))),d.federating&&e("div",{},void 0,e(i,{weight:"medium"},void 0,"Fediverse filter"),e("fieldset",{className:"mt-3"},void 0,e("legend",{className:"sr-only"},void 0,"Fediverse filter"),e("div",{className:"space-y-2"},void 0,e(f,{name:"local",value:"1",label:t.formatMessage(m.local,{domain:a.title}),checked:v,onChange:L}),e(f,{name:"local",value:"0",label:t.formatMessage(m.federated),checked:!v,onChange:L}))))),e("div",{className:x({"grid grid-cols-1 sm:grid-cols-2 gap-2.5":!0,"opacity-30":l})},void 0,y.map(function(s){return e(Z,{id:s},s)})),e(Y,{onClick:B,disabled:l})))};export{te as default};
