import{d as _,r as l,ax as x,q as y,b3 as I,O as h,b4 as E,a,aF as b,F as c,y as O,aH as p}from"../index-3e9a931c.js";import{W as S}from"./widget-15419cb8.js";import{M as P}from"./media-item-3a8a185b.js";import"./arrow-right-b75290c7.js";import"./volume-08f8a8f1.js";import"./es.array.last-index-of-06c47665.js";var W=function(f){var e=f.account,n=_(),m=l.useState(!0),d=x(m,2),v=d[0],o=d[1],g=y(function(r){return e?I(r,e==null?void 0:e.id):h()}),M=function(t){if(t.type==="video")n(p("VIDEO",{media:t,status:t.status}));else{var s=t.getIn(["status","media_attachments"]),i=s.findIndex(function(u){return u.id===t.id});n(p("MEDIA",{media:s,index:i,status:t.status}))}};l.useEffect(function(){o(!0),e&&n(E(e.id)).then(function(){return o(!1)}).catch(function(){})},[e==null?void 0:e.id]);var A=function(){var t=g.filter(function(i){return i.getIn(["status","visibility"])==="public"}),s=t.slice(0,9);return s.isEmpty()?a(O,{size:"sm",theme:"muted"},void 0,a(c,{id:"media_panel.empty_message",defaultMessage:"No media found."})):a("div",{className:"grid grid-cols-3 gap-1"},void 0,s.map(function(i,u){return a(P,{attachment:i,onOpenMedia:M},"".concat(i.getIn(["status","id"]),"+").concat(i.id))}))};return a(S,{title:a(c,{id:"media_panel.title",defaultMessage:"Media"})},void 0,e&&a("div",{className:"w-full"},void 0,v?a(b,{}):A()))};export{W as default};
