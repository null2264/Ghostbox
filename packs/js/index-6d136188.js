import{u as T,d as A,g as H,R as n,ax as p,_ as F,fj as q,bs as _,a as s,bH as N,bI as m,bJ as g,fk as V,bL as B,ae as M,X as G,o as J}from"../index-ce2327d9.js";import"./es.promise.finally-cd7c0110.js";function O(r,e){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(d){return Object.getOwnPropertyDescriptor(r,d).enumerable})),a.push.apply(a,t)}return a}function C(r){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?O(Object(a),!0).forEach(function(t){F(r,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(a,t))})}return r}var o=J({updatePasswordSuccess:{id:"security.update_password.success",defaultMessage:"Password successfully updated."},updatePasswordFail:{id:"security.update_password.fail",defaultMessage:"Update password failed."},oldPasswordFieldLabel:{id:"security.fields.old_password.label",defaultMessage:"Current password"},newPasswordFieldLabel:{id:"security.fields.new_password.label",defaultMessage:"New password"},confirmationFieldLabel:{id:"security.fields.password_confirmation.label",defaultMessage:"New password (again)"},header:{id:"edit_password.header",defaultMessage:"Change Password"},submit:{id:"security.submit",defaultMessage:"Save changes"},cancel:{id:"common.cancel",defaultMessage:"Cancel"}}),j={currentPassword:"",newPassword:"",newPasswordConfirmation:""},X=function(){var e=T(),a=A(),t=H(),d=t.passwordRequirements,R=n.useState(j),b=p(R,2),c=b[0],P=b[1],L=n.useState(!1),v=p(L,2),$=v[0],y=v[1],k=n.useState(!d),h=p(k,2),x=h[0],D=h[1],l=c.currentPassword,i=c.newPassword,w=c.newPasswordConfirmation,S=function(){return P(j)},f=n.useCallback(function(u){u.persist(),P(function(I){return C(C({},I),{},F({},u.target.name,u.target.value))})},[]),E=n.useCallback(function(){y(!0),a(q(l,i,w)).then(function(){S(),_.success(e.formatMessage(o.updatePasswordSuccess))}).finally(function(){y(!1)}).catch(function(){S(),_.error(e.formatMessage(o.updatePasswordFail))})},[l,i,w,a,e]);return s(G,{label:e.formatMessage(o.header),backHref:"/settings"},void 0,s(N,{onSubmit:E},void 0,s(m,{labelText:e.formatMessage(o.oldPasswordFieldLabel)},void 0,s(g,{type:"password",name:"currentPassword",onChange:f,value:l})),s(m,{labelText:e.formatMessage(o.newPasswordFieldLabel)},void 0,s(g,{type:"password",name:"newPassword",onChange:f,value:i}),d&&s(V,{password:i,onChange:D})),s(m,{labelText:e.formatMessage(o.confirmationFieldLabel)},void 0,s(g,{type:"password",name:"newPasswordConfirmation",onChange:f,value:w})),s(B,{},void 0,s(M,{to:"/settings",theme:"tertiary"},void 0,e.formatMessage(o.cancel)),s(M,{type:"submit",theme:"primary",disabled:$||!x},void 0,e.formatMessage(o.submit)))))};export{X as default};
