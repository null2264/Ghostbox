import{G as C,a as k,v as w}from"./layout-list-7056e911.js";import{bj as N,g as y,bk as P,bl as E,bm as D,kq as A,r as f,at as W,a as t,W as g,R as v,av as R,H as q,A as I,X as F,as as V}from"../index-4ca636bc.js";import{V as j,a as H}from"./index-d02c21e2.js";import{u as M}from"./useGroupTag-373b1991.js";import{G as J}from"./group-list-item-169383df.js";import"./group-header-image-6d20ddd3.js";function O(e){const i=N(),n=y(),{entities:c,...l}=P([D.GROUPS,"tags",e],()=>i.get(`/api/v1/tags/${e}/groups`),{schema:E,enabled:n.groupsDiscovery}),{relationships:u}=A(["tags",e],c.map(r=>r.id)),m=c.map(r=>({...r,relationship:u[r.id]||null}));return{...l,groups:m}}var U=["context"],s=function(e){return e.LIST="LIST",e.GRID="GRID",e}(s||{}),X=v.forwardRef(function(e,i){e.context;var n=V(e,U);return v.createElement("div",R({ref:i},n,{className:"flex flex-wrap"}))}),Z=function(i){var n=i.params.id,c=f.useState(s.LIST),l=W(c,2),u=l[0],m=l[1],r=M(n),G=r.tag,L=r.isLoading,d=O(n),x=d.groups,S=d.hasNextPage,_=d.fetchNextPage,h=function(){S&&_()},b=f.useCallback(function(a,o){return t("div",{className:g({"pt-4":o!==0})},void 0,t(J,{group:a,withJoinAction:!0}))},[]),T=f.useCallback(function(a){return t(C,{group:a})},[]);return L||!G?null:t(F,{label:"#".concat(G.name),action:t(q,{alignItems:"center"},void 0,t("button",{onClick:function(){return m(s.LIST)}},void 0,t(I,{src:k,className:g("h-5 w-5 text-gray-600",{"text-primary-600":u===s.LIST})})),t("button",{onClick:function(){return m(s.GRID)}},void 0,t(I,{src:w,className:g("h-5 w-5 text-gray-600",{"text-primary-600":u===s.GRID})})))},void 0,u===s.LIST?t(j,{useWindowScroll:!0,data:x,itemContent:function(o,p){return b(p,o)},endReached:h}):t(H,{useWindowScroll:!0,data:x,itemContent:function(o,p){return T(p)},components:{Item:function(o){return v.createElement("div",R({},o,{className:"w-1/2 flex-none pb-4 [&:nth-last-of-type(-n+2)]:pb-0"}))},List:X},endReached:h}))};export{Z as default};
