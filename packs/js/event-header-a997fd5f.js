import{a as e,a3 as M,eV as k,eW as h,u as ie,d as se,a9 as oe,g as re,f as le,bb as ce,R as v,dh as de,H as m,I as C,F as f,L as P,cz as ue,jU as ge,d4 as ve,jV as me,hD as fe,y as pe,fO as ke,fP as he,aK as Me,cq as _e,fQ as be,jW as Ce,fS as Re,jX as xe,az as Pe,aA as Se,ae as ye,jY as qe,o as Ne,aH as u,O as Ee,hE as we,ch as Ae,jZ as De,hR as Ie,k as Te,j_ as Be,ac as He,ad as Oe,aL as R,v as Le,D as je,db as Fe,hW as Ue,fT as S,gr as ze,j$ as Ve,J as Qe,jp as We,k0 as Ze,k1 as Je,k2 as Ke,k3 as Xe,k4 as Ye,k5 as $e,k6 as Ge,k7 as ea,k8 as aa,k9 as ta,ka as na,c6 as y,gq as q,bP as N,kb as ia,gP as sa,kc as oa}from"../index-c31959b9.js";import{d as ra}from"./download-2e3dfb39.js";const la="/packs/assets/flag-3-9139db0c.svg",ca="/packs/assets/calendar-plus-57e48219.svg";var da=function(){var _=h(5,25),a=h(5,30),n=h(5,30),o=h(5,30);return e(M,{className:"animate-pulse text-primary-50 dark:text-primary-800",space:2},void 0,e("p",{className:"text-lg"},void 0,k(_)),e(M,{space:1},void 0,e("p",{},void 0,k(a)),e("p",{},void 0,k(n)),e("p",{},void 0,k(o))))},i=Ne({bannerHeader:{id:"event.banner",defaultMessage:"Event banner"},exportIcs:{id:"event.export_ics",defaultMessage:"Export to your calendar"},copy:{id:"event.copy",defaultMessage:"Copy link to event"},external:{id:"event.external",defaultMessage:"View event on {domain}"},bookmark:{id:"status.bookmark",defaultMessage:"Bookmark"},unbookmark:{id:"status.unbookmark",defaultMessage:"Remove bookmark"},quotePost:{id:"event.quote",defaultMessage:"Quote event"},reblog:{id:"event.reblog",defaultMessage:"Repost event"},unreblog:{id:"event.unreblog",defaultMessage:"Un-repost event"},pin:{id:"status.pin",defaultMessage:"Pin on profile"},unpin:{id:"status.unpin",defaultMessage:"Unpin from profile"},delete:{id:"status.delete",defaultMessage:"Delete"},mention:{id:"status.mention",defaultMessage:"Mention @{name}"},chat:{id:"status.chat",defaultMessage:"Chat with @{name}"},direct:{id:"status.direct",defaultMessage:"Direct message @{name}"},mute:{id:"account.mute",defaultMessage:"Mute @{name}"},block:{id:"account.block",defaultMessage:"Block @{name}"},report:{id:"status.report",defaultMessage:"Report @{name}"},adminAccount:{id:"status.admin_account",defaultMessage:"Moderate @{name}"},adminStatus:{id:"status.admin_status",defaultMessage:"Open this post in the moderation interface"},markStatusSensitive:{id:"admin.statuses.actions.mark_status_sensitive",defaultMessage:"Mark post sensitive"},markStatusNotSensitive:{id:"admin.statuses.actions.mark_status_not_sensitive",defaultMessage:"Mark post not sensitive"},deleteStatus:{id:"admin.statuses.actions.delete_status",defaultMessage:"Delete post"},blockConfirm:{id:"confirmations.block.confirm",defaultMessage:"Block"},blockAndReport:{id:"confirmations.block.block_and_report",defaultMessage:"Block & Report"},deleteConfirm:{id:"confirmations.delete_event.confirm",defaultMessage:"Delete"},deleteHeading:{id:"confirmations.delete_event.heading",defaultMessage:"Delete event"},deleteMessage:{id:"confirmations.delete_event.message",defaultMessage:"Are you sure you want to delete this event?"}}),va=function(_){var a=_.status,n=ie(),o=se(),w=oe(),p=re(),A=le(),D=ce(),c=D.account,I=c?c.staff:!1,T=c?c.admin:!1;if(!a||!a.event)return v.createElement(v.Fragment,null,e("div",{className:"-mx-4 -mt-4"},void 0,e("div",{className:"relative h-32 w-full bg-gray-200 dark:bg-gray-900/50 md:rounded-t-xl lg:h-48"})),e(da,{}));var l=a.account,d=a.event,b=d.banner,g=l.username,B=function(r){r.preventDefault(),r.stopPropagation(),o(u("MEDIA",{media:Ee([d.banner])}))},H=function(){o(Je(a.id)).then(function(r){var s=r.data;ra(s,"calendar.ics")}).catch(function(){})},O=function(){var r=a.uri;Ke(r)},L=function(){window.open(a.uri,"_blank")},j=function(){o(Xe(a))},F=function(){var r=function(){return o(oa(a))},s=A.get("boostModal");s?o(u("BOOST",{status:a,onReblog:r})):r()},U=function(){o(Ye(a))},z=function(){o($e(a))},V=function(){o(u("CONFIRM",{icon:R,heading:n.formatMessage(i.deleteHeading),message:n.formatMessage(i.deleteMessage),confirm:n.formatMessage(i.deleteConfirm),onConfirm:function(){return o(Ge(a.id))}}))},Q=function(){o(ea(l))},W=function(){o(aa(l.id,w))},Z=function(){o(ta(l))},J=function(){o(na(l))},K=function(){o(u("CONFIRM",{icon:S,heading:e(f,{id:"confirmations.block.heading",defaultMessage:"Block @{name}",values:{name:l.acct}}),message:e(f,{id:"confirmations.block.message",defaultMessage:"Are you sure you want to block {name}?",values:{name:e("strong",{},void 0,"@",l.acct)}}),confirm:n.formatMessage(i.blockConfirm),onConfirm:function(){return o(y(l.id))},secondary:n.formatMessage(i.blockAndReport),onSecondary:function(){o(y(l.id)),o(q(N.STATUS,l,{status:a}))}}))},X=function(){o(q(N.STATUS,l,{status:a}))},Y=function(){o(u("ACCOUNT_MODERATION",{accountId:l.id}))},$=function(){window.open("/pleroma/admin/#/statuses/".concat(a.id,"/"),"_blank")},G=function(){o(ia(n,a.id,a.sensitive))},ee=function(){o(sa(n,a.id))},ae=function(){var r=l.fqn.split("@")[1],s=[{text:n.formatMessage(i.exportIcs),action:H,icon:ca},{text:n.formatMessage(i.copy),action:O,icon:we}];return p.federating&&!l.local&&s.push({text:n.formatMessage(i.external,{domain:r}),action:L,icon:Ae}),c&&(p.bookmarks&&s.push({text:n.formatMessage(a.bookmarked?i.unbookmark:i.bookmark),action:j,icon:a.bookmarked?De:Ie}),["public","unlisted"].includes(a.visibility)&&(s.push({text:n.formatMessage(a.reblogged?i.unreblog:i.reblog),action:F,icon:Te}),p.quotePosts&&s.push({text:n.formatMessage(i.quotePost),action:U,icon:Be})),s.push(null),c.id===l.id?(["public","unlisted"].includes(a.visibility)&&s.push({text:n.formatMessage(a.pinned?i.unpin:i.pin),action:z,icon:a.pinned?He:Oe}),s.push({text:n.formatMessage(i.delete),action:V,icon:R,destructive:!0})):(s.push({text:n.formatMessage(i.mention,{name:g}),action:Q,icon:Le}),a.getIn(["account","pleroma","accepts_chat_messages"])===!0?s.push({text:n.formatMessage(i.chat,{name:g}),action:W,icon:je}):p.privacyScopes&&s.push({text:n.formatMessage(i.direct,{name:g}),action:Z,icon:Fe}),s.push(null),s.push({text:n.formatMessage(i.mute,{name:g}),action:J,icon:Ue}),s.push({text:n.formatMessage(i.block,{name:g}),action:K,icon:S}),s.push({text:n.formatMessage(i.report,{name:g}),action:X,icon:ze})),I&&(s.push(null),s.push({text:n.formatMessage(i.adminAccount,{name:l.username}),action:Y,icon:Ve}),T&&s.push({text:n.formatMessage(i.adminStatus),action:$,icon:Qe}),s.push({text:n.formatMessage(a.sensitive===!1?i.markStatusSensitive:i.markStatusNotSensitive),action:G,icon:We}),l.id!==(c==null?void 0:c.id)&&s.push({text:n.formatMessage(i.deleteStatus),action:ee,icon:R,destructive:!0}))),s},te=function(r){r.stopPropagation(),o(Ze(a.id))},ne=function(r){r.preventDefault(),r.stopPropagation(),o(c?u("EVENT_PARTICIPANTS",{statusId:a.id}):u("UNAUTHORIZED"))};return v.createElement(v.Fragment,null,e("div",{className:"-mx-4 -mt-4"},void 0,e("div",{className:"relative h-32 w-full bg-gray-200 dark:bg-gray-900/50 md:rounded-t-xl lg:h-48"},void 0,b&&e("a",{href:b.url,onClick:B,target:"_blank"},void 0,e(de,{src:b.url,alt:n.formatMessage(i.bannerHeader),className:"absolute inset-0 h-full object-cover md:rounded-t-xl"})))),e(M,{space:2},void 0,e(m,{className:"w-full",alignItems:"start",space:2},void 0,e(pe,{className:"grow",size:"lg",weight:"bold"},void 0,d.name),e(ke,{},void 0,e(he,{as:Me,src:_e,theme:"outlined",className:"h-[30px] px-2",iconClassName:"h-4 w-4",children:null}),e(be,{},void 0,ae().map(function(t,r){if(typeof(t==null?void 0:t.text)>"u")return e(Ce,{},r);var s=t.action?Re:xe,x=t.action?{onSelect:t.action}:{to:t.to,as:P,target:t.target||"_self"};return v.createElement(s,Pe({key:r},x,{className:"group"}),e("div",{className:"flex items-center"},void 0,t.icon&&e(Se,{src:t.icon,className:"mr-3 h-5 w-5 flex-none text-gray-400 group-hover:text-gray-500"}),e("div",{className:"truncate"},void 0,t.text)))}))),l.id===(c==null?void 0:c.id)?e(ye,{size:"sm",theme:"secondary",onClick:te},void 0,e(f,{id:"event.manage",defaultMessage:"Manage"})):e(qe,{status:a})),e(M,{space:1},void 0,e(m,{alignItems:"center",space:2},void 0,e(C,{src:la}),e("span",{},void 0,e(f,{id:"event.organized_by",defaultMessage:"Organized by {name}",values:{name:e(P,{className:"mention inline-block",to:"/@".concat(l.acct)},void 0,e(m,{space:1,alignItems:"center",grow:!0},void 0,e("span",{dangerouslySetInnerHTML:{__html:l.display_name_html}}),l.verified&&e(ue,{})))}}))),e(m,{alignItems:"center",space:2},void 0,e(C,{src:ge}),e("a",{href:"#",className:"hover:underline",onClick:ne},void 0,e("span",{},void 0,e(f,{id:"event.participants",defaultMessage:"{count} {rawCount, plural, one {person} other {people}} going",values:{rawCount:d.participants_count||0,count:ve(d.participants_count||0)}})))),e(me,{status:a}),d.location&&e(m,{alignItems:"center",space:2},void 0,e(C,{src:fe}),e("span",{},void 0,d.location.get("name"))))))};export{va as default};
