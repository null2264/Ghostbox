import{d as F,a9 as L,u as N,r as v,ax as k,q as f,b6 as q,Z as T,iD as U,iE as g,R as $,az as j,W as G,a as e,b2 as J,a3 as W,hM as Z,iF as K,cA as O,H as Q,A as V,hD as X,y as h,F as i,hB as u,a2 as Y,iG as ee}from"../index-a37c6344.js";import{u as ae}from"./usePopper-c1c86518.js";import{u as te}from"./usePatronUser-0c41b04b.js";var oe=function(t,r){var s=[];return t!=null&&t.admin?s.push(e(u,{slug:"admin",title:e(i,{id:"account_moderation_modal.roles.admin",defaultMessage:"Admin"})},"admin")):t!=null&&t.moderator&&s.push(e(u,{slug:"moderator",title:e(i,{id:"account_moderation_modal.roles.moderator",defaultMessage:"Moderator"})},"moderator")),r!=null&&r.is_patron&&s.push(e(u,{slug:"patron",title:e(i,{id:"account.patron",defaultMessage:"Patron"})},"patron")),s},re=function(t){return function(){t(ee())}},se=function(t){return function(){t(g(!0))}},ue=function(t){var r,s=t.visible,p=s===void 0?!0:s,n=F(),y=L(),M=N(),b=v.useState(null),m=k(b,2),P=m[0],E=m[1],w=f(function(o){return o.me}),l=f(function(o){return o.profile_hover_card.accountId||void 0}),x=q(l,{withRelationship:!0}),a=x.account,A=te(a==null?void 0:a.url),B=A.patronUser,C=f(function(o){var c;return(c=o.profile_hover_card.ref)===null||c===void 0?void 0:c.current}),H=oe(a,B);v.useEffect(function(){l&&n(T([l]))},[n,l]),v.useEffect(function(){var o=y.listen(function(){U.cancel(),n(g())});return function(){o()}},[]);var _=ae(C,P),R=_.styles,S=_.attributes;if(!a)return null;var I={__html:a.note_emojified},D=M.formatDate(a.created_at,{month:"long",year:"numeric"}),z=w!==a.id&&((r=a.relationship)===null||r===void 0?void 0:r.followed_by)===!0;return $.createElement("div",j({className:G({"absolute transition-opacity w-[320px] z-[101] top-0 left-0":!0,"opacity-100":p,"opacity-0 pointer-events-none":!p}),ref:E,style:R.popper},S.popper,{onMouseEnter:re(n),onMouseLeave:se(n)}),e(Y,{variant:"rounded",className:"relative isolate overflow-hidden"},void 0,e(J,{},void 0,e(W,{space:2},void 0,e(Z,{fetchComponent:K},void 0,function(o){return e(o,{accountId:a.id,action:e(O,{account:a,small:!0}),badges:H})}),a.local&&e(Q,{alignItems:"center",space:.5},void 0,e(V,{src:X,className:"h-4 w-4 text-gray-800 dark:text-gray-200"}),e(h,{size:"sm"},void 0,e(i,{id:"account.member_since",defaultMessage:"Joined {date}",values:{date:D}}))),a.note.length>0&&e(h,{size:"sm",dangerouslySetInnerHTML:I})),z&&e("div",{className:"absolute left-2 top-2"},void 0,e(u,{slug:"opaque",title:e(i,{id:"account.follows_you",defaultMessage:"Follows you"})})))))};export{ue as ProfileHoverCard,ue as default};
