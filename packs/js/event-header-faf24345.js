import{a as e,a3 as M,eW as k,eX as h,u as ie,d as se,a9 as oe,g as re,f as le,bc as ce,R as g,di as de,H as m,I as C,F as f,L as S,cA as ue,jW as ve,d5 as ge,jX as me,hF as fe,y as pe,fP as ke,fQ as he,aK as Me,cr as _e,fR as be,jY as Ce,fT as Re,jZ as xe,az as Se,aA as Pe,ae as ye,j_ as qe,o as Ne,aH as v,O as Ae,hG as Ee,ci as we,j$ as De,hT as Ie,k as Te,k0 as Be,ac as He,ad as Oe,aL as R,v as Le,D as Fe,dc as je,hY as Ue,fU as P,gs as ze,k1 as Qe,J as Ve,jr as We,k2 as Xe,k3 as Ye,k4 as Ze,k5 as Ge,k6 as Je,k7 as Ke,k8 as $e,k9 as ea,ka as aa,kb as ta,kc as na,c7 as y,gr as q,bQ as N,kd as ia,gQ as sa,ke as oa}from"../index-32661c3d.js";import{d as ra}from"./download-2e3dfb39.js";const la="/packs/assets/flag-3-9139db0c.svg",ca="/packs/assets/calendar-plus-57e48219.svg";var da=function(){var _=h(5,25),a=h(5,30),i=h(5,30),s=h(5,30);return e(M,{className:"animate-pulse text-primary-50 dark:text-primary-800",space:2},void 0,e("p",{className:"text-lg"},void 0,k(_)),e(M,{space:1},void 0,e("p",{},void 0,k(a)),e("p",{},void 0,k(i)),e("p",{},void 0,k(s))))},o=Ne({bannerHeader:{id:"event.banner",defaultMessage:"Event banner"},exportIcs:{id:"event.export_ics",defaultMessage:"Export to your calendar"},copy:{id:"event.copy",defaultMessage:"Copy link to event"},external:{id:"event.external",defaultMessage:"View event on {domain}"},bookmark:{id:"status.bookmark",defaultMessage:"Bookmark"},unbookmark:{id:"status.unbookmark",defaultMessage:"Remove bookmark"},quotePost:{id:"event.quote",defaultMessage:"Quote event"},reblog:{id:"event.reblog",defaultMessage:"Repost event"},unreblog:{id:"event.unreblog",defaultMessage:"Un-repost event"},pin:{id:"status.pin",defaultMessage:"Pin on profile"},unpin:{id:"status.unpin",defaultMessage:"Unpin from profile"},delete:{id:"status.delete",defaultMessage:"Delete"},mention:{id:"status.mention",defaultMessage:"Mention @{name}"},chat:{id:"status.chat",defaultMessage:"Chat with @{name}"},direct:{id:"status.direct",defaultMessage:"Direct message @{name}"},report:{id:"status.report",defaultMessage:"Report @{name}"},adminAccount:{id:"status.admin_account",defaultMessage:"Moderate @{name}"},adminStatus:{id:"status.admin_status",defaultMessage:"Open this post in the moderation interface"},markStatusSensitive:{id:"admin.statuses.actions.mark_status_sensitive",defaultMessage:"Mark post sensitive"},markStatusNotSensitive:{id:"admin.statuses.actions.mark_status_not_sensitive",defaultMessage:"Mark post not sensitive"},deleteStatus:{id:"admin.statuses.actions.delete_status",defaultMessage:"Delete post"},blockConfirm:{id:"confirmations.block.confirm",defaultMessage:"Block"},blockAndReport:{id:"confirmations.block.block_and_report",defaultMessage:"Block & Report"},deleteConfirm:{id:"confirmations.delete_event.confirm",defaultMessage:"Delete"},deleteHeading:{id:"confirmations.delete_event.heading",defaultMessage:"Delete event"},deleteMessage:{id:"confirmations.delete_event.message",defaultMessage:"Are you sure you want to delete this event?"}}),ga=function(_){var a=_.status,i=ie(),s=se(),E=oe(),p=re(),w=le(),D=ce(),c=D.account,I=c?c.staff:!1,T=c?c.admin:!1;if(!a||!a.event)return g.createElement(g.Fragment,null,e("div",{className:"-mx-4 -mt-4"},void 0,e("div",{className:"relative h-32 w-full bg-gray-200 dark:bg-gray-900/50 md:rounded-t-xl lg:h-48"})),e(da,{}));var l=a.account,u=a.event,b=u.banner,d=l.username,B=function(r){r.preventDefault(),r.stopPropagation(),s(v("MEDIA",{media:Ae([u.banner])}))},H=function(){s(Ye(a.id)).then(function(r){var n=r.data;ra(n,"calendar.ics")}).catch(function(){})},O=function(){var r=a.uri;Ze(r)},L=function(){window.open(a.uri,"_blank")},F=function(){s(Ge(a))},j=function(){var r=function(){return s(oa(a))},n=w.get("boostModal");n?s(v("BOOST",{status:a,onReblog:r})):r()},U=function(){s(Je(a))},z=function(){s(Ke(a))},Q=function(){s(v("CONFIRM",{icon:R,heading:i.formatMessage(o.deleteHeading),message:i.formatMessage(o.deleteMessage),confirm:i.formatMessage(o.deleteConfirm),onConfirm:function(){return s($e(a.id))}}))},V=function(){s(ea(l))},W=function(){s(aa(l.id,E))},X=function(){s(ta(l))},Y=function(){s(na(l))},Z=function(){s(v("CONFIRM",{icon:P,heading:e(f,{id:"confirmations.block.heading",defaultMessage:"Block @{name}",values:{name:l.acct}}),message:e(f,{id:"confirmations.block.message",defaultMessage:"Are you sure you want to block {name}?",values:{name:e("strong",{},void 0,"@",l.acct)}}),confirm:i.formatMessage(o.blockConfirm),onConfirm:function(){return s(y(l.id))},secondary:i.formatMessage(o.blockAndReport),onSecondary:function(){s(y(l.id)),s(q(N.STATUS,l,{status:a}))}}))},G=function(){s(q(N.STATUS,l,{status:a}))},J=function(){s(v("ACCOUNT_MODERATION",{accountId:l.id}))},K=function(){window.open("/pleroma/admin/#/statuses/".concat(a.id,"/"),"_blank")},$=function(){s(ia(i,a.id,a.sensitive))},ee=function(){s(sa(i,a.id))},ae=function(){var r=l.fqn.split("@")[1],n=[{text:i.formatMessage(o.exportIcs),action:H,icon:ca},{text:i.formatMessage(o.copy),action:O,icon:Ee}];return p.federating&&!l.local&&n.push({text:i.formatMessage(o.external,{domain:r}),action:L,icon:we}),c&&(p.bookmarks&&n.push({text:i.formatMessage(a.bookmarked?o.unbookmark:o.bookmark),action:F,icon:a.bookmarked?De:Ie}),["public","unlisted"].includes(a.visibility)&&(n.push({text:i.formatMessage(a.reblogged?o.unreblog:o.reblog),action:j,icon:Te}),p.quotePosts&&n.push({text:i.formatMessage(o.quotePost),action:U,icon:Be})),n.push(null),c.id===l.id?(["public","unlisted"].includes(a.visibility)&&n.push({text:i.formatMessage(a.pinned?o.unpin:o.pin),action:z,icon:a.pinned?He:Oe}),n.push({text:i.formatMessage(o.delete),action:Q,icon:R,destructive:!0})):(n.push({text:i.formatMessage(o.mention,{name:d}),action:V,icon:Le}),a.getIn(["account","pleroma","accepts_chat_messages"])===!0?n.push({text:i.formatMessage(o.chat,{name:d}),action:W,icon:Fe}):p.privacyScopes&&n.push({text:i.formatMessage(o.direct,{name:d}),action:X,icon:je}),n.push(null),n.push({fluent:{id:"account-StatusAction--mute--MenuItem",vars:{name:d}},text:"Mute @".concat(d),action:Y,icon:Ue}),n.push({fluent:{id:"account-StatusAction--block--MenuItem",vars:{name:d}},text:"Block @".concat(d),action:Z,icon:P}),n.push({text:i.formatMessage(o.report,{name:d}),action:G,icon:ze})),I&&(n.push(null),n.push({text:i.formatMessage(o.adminAccount,{name:l.username}),action:J,icon:Qe}),T&&n.push({text:i.formatMessage(o.adminStatus),action:K,icon:Ve}),n.push({text:i.formatMessage(a.sensitive===!1?o.markStatusSensitive:o.markStatusNotSensitive),action:$,icon:We}),l.id!==(c==null?void 0:c.id)&&n.push({text:i.formatMessage(o.deleteStatus),action:ee,icon:R,destructive:!0}))),n},te=function(r){r.stopPropagation(),s(Xe(a.id))},ne=function(r){r.preventDefault(),r.stopPropagation(),s(c?v("EVENT_PARTICIPANTS",{statusId:a.id}):v("UNAUTHORIZED"))};return g.createElement(g.Fragment,null,e("div",{className:"-mx-4 -mt-4"},void 0,e("div",{className:"relative h-32 w-full bg-gray-200 dark:bg-gray-900/50 md:rounded-t-xl lg:h-48"},void 0,b&&e("a",{href:b.url,onClick:B,target:"_blank"},void 0,e(de,{src:b.url,alt:i.formatMessage(o.bannerHeader),className:"absolute inset-0 h-full object-cover md:rounded-t-xl"})))),e(M,{space:2},void 0,e(m,{className:"w-full",alignItems:"start",space:2},void 0,e(pe,{className:"grow",size:"lg",weight:"bold"},void 0,u.name),e(ke,{},void 0,e(he,{as:Me,src:_e,theme:"outlined",className:"h-[30px] px-2",iconClassName:"h-4 w-4",children:null}),e(be,{},void 0,ae().map(function(t,r){if(typeof(t==null?void 0:t.text)>"u")return e(Ce,{},r);var n=t.action?Re:xe,x=t.action?{onSelect:t.action}:{to:t.to,as:S,target:t.target||"_self"};return g.createElement(n,Se({key:r},x,{className:"group"}),e("div",{className:"flex items-center"},void 0,t.icon&&e(Pe,{src:t.icon,className:"mr-3 h-5 w-5 flex-none text-gray-400 group-hover:text-gray-500"}),e("div",{className:"truncate"},void 0,t.text)))}))),l.id===(c==null?void 0:c.id)?e(ye,{size:"sm",theme:"secondary",onClick:te},void 0,e(f,{id:"event.manage",defaultMessage:"Manage"})):e(qe,{status:a})),e(M,{space:1},void 0,e(m,{alignItems:"center",space:2},void 0,e(C,{src:la}),e("span",{},void 0,e(f,{id:"event.organized_by",defaultMessage:"Organized by {name}",values:{name:e(S,{className:"mention inline-block",to:"/@".concat(l.acct)},void 0,e(m,{space:1,alignItems:"center",grow:!0},void 0,e("span",{dangerouslySetInnerHTML:{__html:l.display_name_html}}),l.verified&&e(ue,{})))}}))),e(m,{alignItems:"center",space:2},void 0,e(C,{src:ve}),e("a",{href:"#",className:"hover:underline",onClick:ne},void 0,e("span",{},void 0,e(f,{id:"event.participants",defaultMessage:"{count} {rawCount, plural, one {person} other {people}} going",values:{rawCount:u.participants_count||0,count:ge(u.participants_count||0)}})))),e(me,{status:a}),u.location&&e(m,{alignItems:"center",space:2},void 0,e(C,{src:fe}),e("span",{},void 0,u.location.get("name"))))))};export{ga as default};
