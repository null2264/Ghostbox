import{d as D,a9 as F,u as N,r as v,ax as k,q as f,b6 as q,Z as T,iC as U,iD as g,R as $,az as j,W as J,a as e,b2 as W,a3 as Z,hL as G,iE as K,cA as O,H as Q,A as V,hC as X,y as h,F as i,hA as u,a2 as Y,iF as ee}from"../index-7b6dea3f.js";import{u as ae}from"./usePopper-43a4aa34.js";import{u as te}from"./usePatronUser-f4ade931.js";var oe=function(t,r){var s=[];return t!=null&&t.admin?s.push(e(u,{slug:"admin",title:e(i,{id:"account_moderation_modal.roles.admin",defaultMessage:"Admin"})},"admin")):t!=null&&t.moderator&&s.push(e(u,{slug:"moderator",title:e(i,{id:"account_moderation_modal.roles.moderator",defaultMessage:"Moderator"})},"moderator")),r!=null&&r.is_patron&&s.push(e(u,{slug:"patron",title:e(i,{id:"account.patron",defaultMessage:"Patron"})},"patron")),s},re=function(t){return function(){t(ee())}},se=function(t){return function(){t(g(!0))}},ue=function(t){var r,s=t.visible,p=s===void 0?!0:s,n=D(),y=F(),b=N(),M=v.useState(null),m=k(M,2),P=m[0],C=m[1],E=f(function(o){return o.me}),l=f(function(o){return o.profile_hover_card.accountId||void 0}),w=q(l,{withRelationship:!0}),a=w.account,A=te(a==null?void 0:a.url),x=A.patronUser,H=f(function(o){var c;return(c=o.profile_hover_card.ref)===null||c===void 0?void 0:c.current}),B=oe(a,x);v.useEffect(function(){l&&n(T([l]))},[n,l]),v.useEffect(function(){var o=y.listen(function(){U.cancel(),n(g())});return function(){o()}},[]);var _=ae(H,P),R=_.styles,S=_.attributes;if(!a)return null;var I={__html:a.note_emojified},L=b.formatDate(a.created_at,{month:"long",year:"numeric"}),z=E!==a.id&&((r=a.relationship)===null||r===void 0?void 0:r.followed_by)===!0;return $.createElement("div",j({className:J({"absolute transition-opacity w-[320px] z-[101] top-0 left-0":!0,"opacity-100":p,"opacity-0 pointer-events-none":!p}),ref:C,style:R.popper},S.popper,{onMouseEnter:re(n),onMouseLeave:se(n)}),e(Y,{variant:"rounded",className:"relative isolate overflow-hidden"},void 0,e(W,{},void 0,e(Z,{space:2},void 0,e(G,{fetchComponent:K},void 0,function(o){return e(o,{accountId:a.id,action:e(O,{account:a,small:!0}),badges:B})}),a.local&&e(Q,{alignItems:"center",space:.5},void 0,e(V,{src:X,className:"h-4 w-4 text-gray-800 dark:text-gray-200"}),e(h,{size:"sm"},void 0,e(i,{id:"account.member_since",defaultMessage:"Joined {date}",values:{date:L}}))),a.note.length>0&&e(h,{size:"sm",dangerouslySetInnerHTML:I})),z&&e("div",{className:"absolute left-2 top-2"},void 0,e(u,{slug:"opaque",title:e(i,{id:"account.follows_you",defaultMessage:"Follows you"})})))))};export{ue as ProfileHoverCard,ue as default};
