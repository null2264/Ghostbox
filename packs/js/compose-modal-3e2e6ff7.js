import{u as T,d as C,r as D,e8 as w,e9 as F,R as E,bw as x,W as O,a as e,ea as k,eb as q,q as A,y as G,F as o,H as S,al as H,ec as N,aH as P,aL as $,bx as z,ed as V,ee as L,o as Q}from"../index-191ddf5f.js";import{c as W}from"./modal-root-c5ea9012.js";var _=Q({close:{id:"lightbox.close",defaultMessage:"Close"},confirm:{id:"confirmations.cancel.confirm",defaultMessage:"Discard"},cancelEditing:{id:"confirmations.cancel_editing.confirm",defaultMessage:"Cancel editing"}}),U=function(t){var n=t.onClose,d=t.composeId,r=d===void 0?"compose-modal":d,g=T(),s=C(),l=D.useRef(null),u=w(r),a=u,i=a.id,c=a.privacy,f=a.in_reply_to,h=a.quote,p=a.group_id,v=F(l,function(m){s(N(r,m,g))}),b=v.isDragging,y=v.isDraggedOver,I=function(){W(u)?s(P("CONFIRM",{icon:$,heading:i?e(o,{id:"confirmations.cancel_editing.heading",defaultMessage:"Cancel post editing"}):e(o,{id:"confirmations.cancel.heading",defaultMessage:"Discard post"}),message:i?e(o,{id:"confirmations.cancel_editing.message",defaultMessage:"Are you sure you want to cancel editing this post? All changes will be lost."}):e(o,{id:"confirmations.cancel.message",defaultMessage:"Are you sure you want to cancel creating this post?"}),confirm:g.formatMessage(i?_.cancelEditing:_.confirm),onConfirm:function(){s(z("COMPOSE")),s(V())}})):n("COMPOSE")},R=function(){return i?e(o,{id:"navigation_bar.compose_edit",defaultMessage:"Edit post"}):c==="direct"?e(o,{id:"navigation_bar.compose_direct",defaultMessage:"Direct message"}):f&&p?e(o,{id:"navigation_bar.compose_group_reply",defaultMessage:"Reply to group post"}):p?e(o,{id:"navigation_bar.compose_group",defaultMessage:"Compose to group"}):f?e(o,{id:"navigation_bar.compose_reply",defaultMessage:"Reply to post"}):h?e(o,{id:"navigation_bar.compose_quote",defaultMessage:"Quote post"}):e(o,{id:"navigation_bar.compose",defaultMessage:"Compose new post"})};return E.createElement(x,{ref:l,title:R(),onClose:I,className:O({"border-2 border-primary-600 border-dashed !z-[99]":b,"ring-2 ring-offset-2 ring-primary-600":y})},e(k,{id:r,extra:e(j,{composeId:r,groupId:p})}))},j=function(t){var n=t.composeId,d=t.groupId,r=C(),g=q(d||"",!1),s=g.group,l=A(function(i){var c;return!!((c=i.compose.get(n))!==null&&c!==void 0&&c.group_timeline_visible)}),u=function(){r(L(n,!l))},a="group-timeline-visible+".concat(n);return!s||s.locked?null:e(S,{alignItems:"center",space:4},void 0,e("label",{className:"ml-auto cursor-pointer",htmlFor:a},void 0,e(G,{theme:"muted"},void 0,e(o,{id:"compose_group.share_to_followers",defaultMessage:"Share with my followers"}))),e(H,{id:a,checked:l,onChange:u,size:"sm"}))};export{U as default};
