import{i as bn,t as Ue,l as m,a as ra,b as sa,c as ia,d as aa,e as oa,g as Nt,r as Gn,S as Yn,f as Dt,h as Qe,j as bs,k as ca,m as w,u as la,n as ua,o as Wn,p as tn,q as da,s as fa,v as ha,D as Es,G as xt,w as Sr,x as Ss,y as wr,z as pa,A as _a,B as En,C as Hn,E as gt,F as me,H as ma,I as ws,J as Sn,K as Vt,L as Zn,M as Ir,N as ga,O as Is,P as Vn,Q as ya,R as ba,T as Ea,U as Sa,V as rt,W as vs,X as wa,Y as yt,Z as Ge,_ as vr,$ as $n,a0 as hn,a1 as Ia,a2 as va,a3 as Ca,a4 as ka,a5 as wn,a6 as In,a7 as Cr}from"./browsertracing-f492ea54.js";import{ak as Xh,a8 as Qh,a9 as tp,aa as ep,al as np,ab as rp,ac as sp,ad as ip,am as ap,ae as op,af as cp,ag as lp,ah as up,ai as dp,aj as fp}from"./browsertracing-f492ea54.js";import{r as Q,h as en}from"../index-d17ecde2.js";function Ra(t,e,n=250,r,s,i,a){if(!i.exception||!i.exception.values||!a||!bn(a.originalException,Error))return;const o=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;o&&(i.exception.values=Aa(vn(t,e,s,a.originalException,r,i.exception.values,o,0),n))}function vn(t,e,n,r,s,i,a,o){if(i.length>=n+1)return i;let c=[...i];if(bn(r[s],Error)){kr(a,o);const l=t(e,r[s]),u=c.length;Rr(l,s,u,o),c=vn(t,e,n,r[s],s,[l,...c],l,u)}return Array.isArray(r.errors)&&r.errors.forEach((l,u)=>{if(bn(l,Error)){kr(a,o);const d=t(e,l),f=c.length;Rr(d,`errors[${u}]`,f,o),c=vn(t,e,n,l,s,[d,...c],d,f)}}),c}function kr(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,is_exception_group:!0,exception_id:e}}function Rr(t,e,n,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function Aa(t,e){return t.map(n=>(n.value&&(n.value=Ue(n.value,e)),n))}const Ta=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function xa(t){return t==="http"||t==="https"}function ge(t,e=!1){const{host:n,path:r,pass:s,port:i,projectId:a,protocol:o,publicKey:c}=t;return`${o}://${c}${e&&s?`:${s}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${a}`}function Cs(t){const e=Ta.exec(t);if(!e){console.error(`Invalid Sentry Dsn: ${t}`);return}const[n,r,s="",i,a="",o]=e.slice(1);let c="",l=o;const u=l.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),l=u.pop()),l){const d=l.match(/^\d+/);d&&(l=d[0])}return ks({host:i,pass:s,path:c,projectId:l,port:a,protocol:n,publicKey:r})}function ks(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function Na(t){if(!(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__))return!0;const{port:e,projectId:n,protocol:r}=t;return["protocol","publicKey","host","projectId"].find(a=>t[a]?!1:(m.error(`Invalid Sentry Dsn: ${a} missing`),!0))?!1:n.match(/^\d+$/)?xa(r)?e&&isNaN(parseInt(e,10))?(m.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(m.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(m.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Rs(t){const e=typeof t=="string"?Cs(t):ks(t);if(!(!e||!Na(e)))return e}class ct extends Error{constructor(e,n="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function Ar(){return typeof window<"u"&&(!ra()||Da())}function Da(){return typeof process<"u"&&process.type==="renderer"}function Ma(){const t=typeof WeakSet=="function",e=t?new WeakSet:[];function n(s){if(t)return e.has(s)?!0:(e.add(s),!1);for(let i=0;i<e.length;i++)if(e[i]===s)return!0;return e.push(s),!1}function r(s){if(t)e.delete(s);else for(let i=0;i<e.length;i++)if(e[i]===s){e.splice(i,1);break}}return[n,r]}function ot(t,e=100,n=1/0){try{return Cn("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function As(t,e=3,n=100*1024){const r=ot(t,e);return La(r)>n?As(t,e-1,n):r}function Cn(t,e,n=1/0,r=1/0,s=Ma()){const[i,a]=s;if(e==null||["number","boolean","string"].includes(typeof e)&&!sa(e))return e;const o=Oa(t,e);if(!o.startsWith("[object "))return o;if(e.__sentry_skip_normalization__)return e;const c=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(c===0)return o.replace("object ","");if(i(e))return"[Circular ~]";const l=e;if(l&&typeof l.toJSON=="function")try{const h=l.toJSON();return Cn("",h,c-1,r,s)}catch{}const u=Array.isArray(e)?[]:{};let d=0;const f=ia(e);for(const h in f){if(!Object.prototype.hasOwnProperty.call(f,h))continue;if(d>=r){u[h]="[MaxProperties ~]";break}const _=f[h];u[h]=Cn(h,_,c-1,r,s),d++}return a(e),u}function Oa(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(aa(e))return"[VueViewModel]";if(oa(e))return"[SyntheticEvent]";if(typeof e=="number"&&e!==e)return"[NaN]";if(typeof e=="function")return`[Function: ${Nt(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const n=Ba(e);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function Ba(t){const e=Object.getPrototypeOf(t);return e?e.constructor.name:"null prototype"}function Ua(t){return~-encodeURI(t).split(/%..|./).length}function La(t){return Ua(JSON.stringify(t))}function Fa(t){const e=[];function n(){return t===void 0||e.length<t}function r(a){return e.splice(e.indexOf(a),1)[0]}function s(a){if(!n())return Gn(new ct("Not adding Promise because buffer limit was reached."));const o=a();return e.indexOf(o)===-1&&e.push(o),o.then(()=>r(o)).then(null,()=>r(o).then(null,()=>{})),o}function i(a){return new Yn((o,c)=>{let l=e.length;if(!l)return o(!0);const u=setTimeout(()=>{a&&a>0&&o(!1)},a);e.forEach(d=>{Dt(d).then(()=>{--l||(clearTimeout(u),o(!0))},c)})})}return{$:e,add:s,drain:i}}const za=["fatal","error","warning","log","info","debug"];function Pa(t){return t==="warn"?"warning":za.includes(t)?t:"log"}function ee(t,e=[]){return[t,e]}function Ga(t,e){const[n,r]=t;return[n,[...r,e]]}function $t(t,e){const n=t[1];for(const r of n){const s=r[0].type;if(e(r,s))return!0}return!1}function Ya(t,e){return $t(t,(n,r)=>e.includes(r))}function kn(t,e){return(e||new TextEncoder).encode(t)}function Ts(t,e){const[n,r]=t;let s=JSON.stringify(n);function i(a){typeof s=="string"?s=typeof a=="string"?s+a:[kn(s,e),a]:s.push(typeof a=="string"?kn(a,e):a)}for(const a of r){const[o,c]=a;if(i(`
${JSON.stringify(o)}
`),typeof c=="string"||c instanceof Uint8Array)i(c);else{let l;try{l=JSON.stringify(c)}catch{l=JSON.stringify(ot(c))}i(l)}}return typeof s=="string"?s:Wa(s)}function Wa(t){const e=t.reduce((s,i)=>s+i.length,0),n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Ha(t,e,n){let r=typeof t=="string"?e.encode(t):t;function s(c){const l=r.subarray(0,c);return r=r.subarray(c+1),l}function i(){let c=r.indexOf(10);return c<0&&(c=r.length),JSON.parse(n.decode(s(c)))}const a=i(),o=[];for(;r.length;){const c=i(),l=typeof c.length=="number"?c.length:void 0;o.push([c,l?s(l):i()])}return[a,o]}function Za(t,e){const n=typeof t.data=="string"?kn(t.data,e):t.data;return[Qe({type:"attachment",length:n.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),n]}const Va={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",statsd:"unknown"};function Tr(t){return Va[t]}function Kn(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function xs(t,e,n,r){const s=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:ge(r)},...s&&{trace:Qe({...s})}}}function $a(t,e,n){const r=[{type:"client_report"},{timestamp:n||bs(),discarded_events:t}];return ee(e?{dsn:e}:{},[r])}const Ka=60*1e3;function Ns(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${t}`);return isNaN(r)?Ka:r-e}function ja(t,e){return t[e]||t.all||0}function qa(t,e,n=Date.now()){return ja(t,e)>n}function Ja(t,{statusCode:e,headers:n},r=Date.now()){const s={...t},i=n&&n["x-sentry-rate-limits"],a=n&&n["retry-after"];if(i)for(const o of i.trim().split(",")){const[c,l]=o.split(":",2),u=parseInt(c,10),d=(isNaN(u)?60:u)*1e3;if(!l)s.all=r+d;else for(const f of l.split(";"))s[f]=r+d}else a?s.all=r+Ns(a,r):e===429&&(s.all=r+60*1e3);return s}function hh(t,e,n){const r=ca();r&&r.setMeasurement(t,e,n)}function nn(t,e){return w().captureException(t,{captureContext:e})}function ph(t,e){const n=typeof e=="string"?e:void 0,r=typeof e!="string"?{captureContext:e}:void 0;return w().captureMessage(t,n,r)}function _h(t,e){return w().captureEvent(t,e)}function Xa(t){w().configureScope(t)}function mh(t){w().addBreadcrumb(t)}function Qa(t,e){w().setContext(t,e)}function gh(t){w().setExtras(t)}function yh(t,e){w().setExtra(t,e)}function bh(t){w().setTags(t)}function Eh(t,e){w().setTag(t,e)}function Sh(t){w().setUser(t)}function Ds(t){w().withScope(t)}function wh(t,e){return w().startTransaction({...t},e)}async function Ih(t){const e=w().getClient();return e?e.flush(t):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function vh(t){const e=w().getClient();return e?e.close(t):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function Ch(){return w().lastEventId()}const to="7";function Ms(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function eo(t){return`${Ms(t)}${t.projectId}/envelope/`}function no(t,e){return la({sentry_key:t.publicKey,sentry_version:to,...e&&{sentry_client:`${e.name}/${e.version}`}})}function Os(t,e={}){const n=typeof e=="string"?e:e.tunnel,r=typeof e=="string"||!e._metadata?void 0:e._metadata.sdk;return n||`${eo(t)}?${no(t,r)}`}function ro(t,e){const n=Rs(t);if(!n)return"";const r=`${Ms(n)}embed/error-page/`;let s=`dsn=${ge(n)}`;for(const i in e)if(i!=="dsn")if(i==="user"){const a=e.user;if(!a)continue;a.name&&(s+=`&name=${encodeURIComponent(a.name)}`),a.email&&(s+=`&email=${encodeURIComponent(a.email)}`)}else s+=`&${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`;return`${r}?${s}`}function so(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]]),t}function io(t,e,n,r){const s=Kn(n),i={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!r&&e&&{dsn:ge(e)}},a="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return ee(i,[a])}function ao(t,e,n,r){const s=Kn(n),i=t.type&&t.type!=="replay_event"?t.type:"event";so(t,n&&n.sdk);const a=xs(t,s,r,e);return delete t.sdkProcessingMetadata,ee(a,[[{type:i},t]])}const xr=[];function oo(t){const e={};return t.forEach(n=>{const{name:r}=n,s=e[r];s&&!s.isDefaultInstance&&n.isDefaultInstance||(e[r]=n)}),Object.keys(e).map(n=>e[n])}function co(t){const e=t.defaultIntegrations||[],n=t.integrations;e.forEach(a=>{a.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...e,...n]:typeof n=="function"?r=ua(n(e)):r=e;const s=oo(r),i=uo(s,a=>a.name==="Debug");if(i!==-1){const[a]=s.splice(i,1);s.push(a)}return s}function lo(t,e){const n={};return e.forEach(r=>{r&&Bs(t,r,n)}),n}function Bs(t,e,n){if(n[e.name]=e,xr.indexOf(e.name)===-1&&(e.setupOnce(Wn,w),xr.push(e.name)),t.on&&typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);t.on("preprocessEvent",(s,i)=>r(s,i,t))}if(t.addEventProcessor&&typeof e.processEvent=="function"){const r=e.processEvent.bind(e),s=Object.assign((i,a)=>r(i,a,t),{id:e.name});t.addEventProcessor(s)}(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`Integration installed: ${e.name}`)}function kh(t){const e=w().getClient();if(!e||!e.addIntegration){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`Cannot add integration "${t.name}" because no SDK Client is available.`);return}e.addIntegration(t)}function uo(t,e){for(let n=0;n<t.length;n++)if(e(t[n])===!0)return n;return-1}function Us(t,e,n,r,s){const{normalizeDepth:i=3,normalizeMaxBreadth:a=1e3}=t,o={...e,event_id:e.event_id||n.event_id||tn(),timestamp:e.timestamp||bs()},c=n.integrations||t.integrations.map(f=>f.name);fo(o,t),_o(o,c),e.type===void 0&&ho(o,t.stackParser);let l=r;n.captureContext&&(l=da.clone(l).update(n.captureContext));let u=Dt(o);const d=s&&s.getEventProcessors?s.getEventProcessors():[];if(l){if(l.getAttachments){const f=[...n.attachments||[],...l.getAttachments()];f.length&&(n.attachments=f)}u=l.applyToEvent(o,n,d)}else u=fa([...d,...ha()],o,n);return u.then(f=>(f&&po(f),typeof i=="number"&&i>0?mo(f,i,a):f))}function fo(t,e){const{environment:n,release:r,dist:s,maxValueLength:i=250}=e;"environment"in t||(t.environment="environment"in e?n:Es),t.release===void 0&&r!==void 0&&(t.release=r),t.dist===void 0&&s!==void 0&&(t.dist=s),t.message&&(t.message=Ue(t.message,i));const a=t.exception&&t.exception.values&&t.exception.values[0];a&&a.value&&(a.value=Ue(a.value,i));const o=t.request;o&&o.url&&(o.url=Ue(o.url,i))}const Nr=new WeakMap;function ho(t,e){const n=xt._sentryDebugIds;if(!n)return;let r;const s=Nr.get(e);s?r=s:(r=new Map,Nr.set(e,r));const i=Object.keys(n).reduce((a,o)=>{let c;const l=r.get(o);l?c=l:(c=e(o),r.set(o,c));for(let u=c.length-1;u>=0;u--){const d=c[u];if(d.filename){a[d.filename]=n[o];break}}return a},{});try{t.exception.values.forEach(a=>{a.stacktrace.frames.forEach(o=>{o.filename&&(o.debug_id=i[o.filename])})})}catch{}}function po(t){const e={};try{t.exception.values.forEach(r=>{r.stacktrace.frames.forEach(s=>{s.debug_id&&(s.abs_path?e[s.abs_path]=s.debug_id:s.filename&&(e[s.filename]=s.debug_id),delete s.debug_id)})})}catch{}if(Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.keys(e).forEach(r=>{n.push({type:"sourcemap",code_file:r,debug_id:e[r]})})}function _o(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function mo(t,e,n){if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(s=>({...s,...s.data&&{data:ot(s.data,e,n)}}))},...t.user&&{user:ot(t.user,e,n)},...t.contexts&&{contexts:ot(t.contexts,e,n)},...t.extra&&{extra:ot(t.extra,e,n)}};return t.contexts&&t.contexts.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=ot(t.contexts.trace.data,e,n))),t.spans&&(r.spans=t.spans.map(s=>(s.data&&(s.data=ot(s.data,e,n)),s))),r}const Dr="Not capturing exception because it's already been captured.";class go{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Rs(e.dsn):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("No DSN provided, client will not send events."),this._dsn){const n=Os(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:n})}}captureException(e,n,r){if(Sr(e)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(Dr);return}let s=n&&n.event_id;return this._process(this.eventFromException(e,n).then(i=>this._captureEvent(i,n,r)).then(i=>{s=i})),s}captureMessage(e,n,r,s){let i=r&&r.event_id;const a=Ss(e)?this.eventFromMessage(String(e),n,r):this.eventFromException(e,r);return this._process(a.then(o=>this._captureEvent(o,r,s)).then(o=>{i=o})),i}captureEvent(e,n,r){if(n&&n.originalException&&Sr(n.originalException)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(Dr);return}let s=n&&n.event_id;return this._process(this._captureEvent(e,n,r).then(i=>{s=i})),s}captureSession(e){typeof e.release!="string"?(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),wr(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const n=this._transport;return n?this._isClientDoneProcessing(e).then(r=>n.flush(e).then(s=>r&&s)):Dt(!0)}close(e){return this.flush(e).then(n=>(this.getOptions().enabled=!1,n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&(this._integrations=lo(this,this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){Bs(this,e,this._integrations)}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let r=ao(e,this._dsn,this._options._metadata,this._options.tunnel);for(const i of n.attachments||[])r=Ga(r,Za(i,this._options.transportOptions&&this._options.transportOptions.textEncoder));const s=this._sendEnvelope(r);s&&s.then(i=>this.emit("afterSendEvent",e,i),null)}sendSession(e){const n=io(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}recordDroppedEvent(e,n,r){if(this._options.sendClientReports){const s=`${e}:${n}`;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`Adding outcome: "${s}"`),this._outcomes[s]=this._outcomes[s]+1||1}}on(e,n){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(n)}emit(e,...n){this._hooks[e]&&this._hooks[e].forEach(r=>r(...n))}_updateSessionFromEvent(e,n){let r=!1,s=!1;const i=n.exception&&n.exception.values;if(i){s=!0;for(const c of i){const l=c.mechanism;if(l&&l.handled===!1){r=!0;break}}}const a=e.status==="ok";(a&&e.errors===0||a&&r)&&(wr(e,{...r&&{status:"crashed"},errors:e.errors||Number(s||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Yn(n=>{let r=0;const s=1,i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),n(!0)):(r+=s,e&&r>=e&&(clearInterval(i),n(!1)))},s)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,r){const s=this.getOptions(),i=Object.keys(this._integrations);return!n.integrations&&i.length>0&&(n.integrations=i),this.emit("preprocessEvent",e,n),Us(s,e,n,r,this).then(a=>{if(a===null)return a;const{propagationContext:o}=a.sdkProcessingMetadata||{};if(!(a.contexts&&a.contexts.trace)&&o){const{traceId:l,spanId:u,parentSpanId:d,dsc:f}=o;a.contexts={trace:{trace_id:l,span_id:u,parent_span_id:d},...a.contexts};const h=f||pa(l,this,r);a.sdkProcessingMetadata={dynamicSamplingContext:h,...a.sdkProcessingMetadata}}return a})}_captureEvent(e,n={},r){return this._processEvent(e,n,r).then(s=>s.event_id,s=>{if(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__){const i=s;i.logLevel==="log"?m.log(i.message):m.warn(i)}})}_processEvent(e,n,r){const s=this.getOptions(),{sampleRate:i}=s,a=Fs(e),o=Ls(e),c=e.type||"error",l=`before send for type \`${c}\``;if(o&&typeof i=="number"&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",e),Gn(new ct(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const u=c==="replay_event"?"replay":c;return this._prepareEvent(e,n,r).then(d=>{if(d===null)throw this.recordDroppedEvent("event_processor",u,e),new ct("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return d;const h=bo(s,d,n);return yo(h,l)}).then(d=>{if(d===null)throw this.recordDroppedEvent("before_send",u,e),new ct(`${l} returned \`null\`, will not send event.`,"log");const f=r&&r.getSession();!a&&f&&this._updateSessionFromEvent(f,d);const h=d.transaction_info;if(a&&h&&d.transaction!==e.transaction){const _="custom";d.transaction_info={...h,source:_}}return this.sendEvent(d,n),d}).then(null,d=>{throw d instanceof ct?d:(this.captureException(d,{data:{__sentry__:!0},originalException:d}),new ct(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${d}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,n=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error("Error while sending event:",n)});(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map(n=>{const[r,s]=n.split(":");return{reason:r,category:s,quantity:e[n]}})}}function yo(t,e){const n=`${e} must return \`null\` or a valid event.`;if(_a(t))return t.then(r=>{if(!En(r)&&r!==null)throw new ct(n);return r},r=>{throw new ct(`${e} rejected with ${r}`)});if(!En(t)&&t!==null)throw new ct(n);return t}function bo(t,e,n){const{beforeSend:r,beforeSendTransaction:s}=t;return Ls(e)&&r?r(e,n):Fs(e)&&s?s(e,n):e}function Ls(t){return t.type===void 0}function Fs(t){return t.type==="transaction"}function Eo(t,e){e.debug===!0&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?m.enable():console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle."));const n=w();n.getScope().update(e.initialScope);const s=new t(e);n.bindClient(s)}const So=30;function zs(t,e,n=Fa(t.bufferSize||So)){let r={};const s=a=>n.drain(a);function i(a){const o=[];if($t(a,(d,f)=>{const h=Tr(f);if(qa(r,h)){const _=Mr(d,f);t.recordDroppedEvent("ratelimit_backoff",h,_)}else o.push(d)}),o.length===0)return Dt();const c=ee(a[0],o),l=d=>{$t(c,(f,h)=>{const _=Mr(f,h);t.recordDroppedEvent(d,Tr(h),_)})},u=()=>e({body:Ts(c,t.textEncoder)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=Ja(r,d),d),d=>{throw l("network_error"),d});return n.add(u).then(d=>d,d=>{if(d instanceof ct)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error("Skipped sending event because buffer is full."),l("queue_overflow"),Dt();throw d})}return i.__sentry__baseTransport__=!0,{send:i,flush:s}}function Mr(t,e){if(!(e!=="event"&&e!=="transaction"))return Array.isArray(t)?t[1]:void 0}const wo=100,Or=5e3,Io=36e5;function pn(t,e){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.info(`[Offline]: ${t}`,e)}function vo(t){return e=>{const n=t(e),r=e.createStore?e.createStore(e):void 0;let s=Or,i;function a(u,d,f){return Ya(u,["replay_event","replay_recording","client_report"])?!1:e.shouldStore?e.shouldStore(u,d,f):!0}function o(u){r&&(i&&clearTimeout(i),i=setTimeout(async()=>{i=void 0;const d=await r.pop();d&&(pn("Attempting to send previously queued event"),l(d).catch(f=>{pn("Failed to retry sending",f)}))},u),typeof i!="number"&&i.unref&&i.unref())}function c(){i||(o(s),s=Math.min(s*2,Io))}async function l(u){try{const d=await n.send(u);let f=wo;if(d){if(d.headers&&d.headers["retry-after"])f=Ns(d.headers["retry-after"]);else if((d.statusCode||0)>=400)return d}return o(f),s=Or,d}catch(d){if(r&&await a(u,d,s))return await r.insert(u),c(),pn("Error sending. Event queued",d),{};throw d}}return e.flushAtStartup&&c(),{send:l,flush:u=>n.flush(u)}}}function Ps(t,e){let n;return $t(t,(r,s)=>(e.includes(s)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function Co(t,e){return n=>{const r=t(n);return{send:async s=>{const i=Ps(s,["event","transaction","profile","replay_event"]);return i&&(i.release=e),r.send(s)},flush:s=>r.flush(s)}}}function Rh(t,e){return n=>{const r=t(n),s={};function i(c,l){const u=l?`${c}:${l}`:c;if(!s[u]){const d=Cs(c);if(!d)return;const f=Os(d);s[u]=l?Co(t,l)({...n,url:f}):t({...n,url:f})}return s[u]}async function a(c){function l(f){const h=f&&f.length?f:["event"];return Ps(c,h)}const u=e({envelope:c,getEvent:l}).map(f=>typeof f=="string"?i(f,void 0):i(f.dsn,f.release)).filter(f=>!!f);return u.length===0&&u.push(r),(await Promise.all(u.map(f=>f.send(c))))[0]}async function o(c){const l=[...Object.keys(s).map(d=>s[d]),r];return(await Promise.all(l.map(d=>d.flush(c)))).every(d=>d)}return{send:a,flush:o}}}const Ye="7.75.0";let Br;class ye{static __initStatic(){this.id="FunctionToString"}constructor(){this.name=ye.id}setupOnce(){Br=Function.prototype.toString;try{Function.prototype.toString=function(...e){const n=Hn(this)||this;return Br.apply(n,e)}}catch{}}}ye.__initStatic();const ko=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],Ro=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/];class be{static __initStatic(){this.id="InboundFilters"}constructor(e={}){this.name=be.id,this._options=e}setupOnce(e,n){}processEvent(e,n,r){const s=r.getOptions(),i=Ao(this._options,s);return To(e,i)?null:e}}be.__initStatic();function Ao(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:ko],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[],...t.disableTransactionDefaults?[]:Ro],ignoreInternal:t.ignoreInternal!==void 0?t.ignoreInternal:!0}}function To(t,e){return e.ignoreInternal&&Bo(t)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`Event dropped due to being internal Sentry Error.
Event: ${gt(t)}`),!0):xo(t,e.ignoreErrors)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${gt(t)}`),!0):No(t,e.ignoreTransactions)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${gt(t)}`),!0):Do(t,e.denyUrls)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${gt(t)}.
Url: ${We(t)}`),!0):Mo(t,e.allowUrls)?!1:((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${gt(t)}.
Url: ${We(t)}`),!0)}function xo(t,e){return t.type||!e||!e.length?!1:Oo(t).some(n=>me(n,e))}function No(t,e){if(t.type!=="transaction"||!e||!e.length)return!1;const n=t.transaction;return n?me(n,e):!1}function Do(t,e){if(!e||!e.length)return!1;const n=We(t);return n?me(n,e):!1}function Mo(t,e){if(!e||!e.length)return!0;const n=We(t);return n?me(n,e):!0}function Oo(t){const e=[];t.message&&e.push(t.message);let n;try{n=t.exception.values[t.exception.values.length-1]}catch{}return n&&n.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`)),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&e.length===0&&m.error(`Could not extract message for event ${gt(t)}`),e}function Bo(t){try{return t.exception.values[0].type==="SentryError"}catch{}return!1}function Uo(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function We(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?Uo(e):null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error(`Cannot extract url for event ${gt(t)}`),null}}const Lo=Object.freeze(Object.defineProperty({__proto__:null,FunctionToString:ye,InboundFilters:be},Symbol.toStringTag,{value:"Module"}));function Fo(t,e){const n=e.getClient(),r=n&&n.getDsn(),s=n&&n.getOptions().tunnel;return Po(t,r)||zo(t,s)}function zo(t,e){return e?Ur(t)===Ur(e):!1}function Po(t,e){return e?t.includes(e.host):!1}function Ur(t){return t[t.length-1]==="/"?t.slice(0,-1):t}const Gs=new Map,Lr=new Set;function Go(t){if(xt._sentryModuleMetadata)for(const e of Object.keys(xt._sentryModuleMetadata)){const n=xt._sentryModuleMetadata[e];if(Lr.has(e))continue;Lr.add(e);const r=t(e);for(const s of r.reverse())if(s.filename){Gs.set(s.filename,n);break}}}function Yo(t,e){return Go(t),Gs.get(e)}function Wo(t,e){try{e.exception.values.forEach(n=>{if(n.stacktrace)for(const r of n.stacktrace.frames||[]){if(!r.filename)continue;const s=Yo(t,r.filename);s&&(r.module_metadata=s)}})}catch{}}function Ho(t){try{t.exception.values.forEach(e=>{if(e.stacktrace)for(const n of e.stacktrace.frames||[])delete n.module_metadata})}catch{}}class jn{static __initStatic(){this.id="ModuleMetadata"}constructor(){this.name=jn.id}setupOnce(e,n){const r=n().getClient();if(!r||typeof r.on!="function")return;r.on("beforeEnvelope",i=>{$t(i,(a,o)=>{if(o==="event"){const c=Array.isArray(a)?a[1]:void 0;c&&(Ho(c),a[1]=c)}})});const s=r.getOptions().stackParser;e(i=>(Wo(s,i),i))}}jn.__initStatic();const S=xt;let Rn=0;function Ys(){return Rn>0}function Zo(){Rn++,setTimeout(()=>{Rn--})}function Mt(t,e={},n){if(typeof t!="function")return t;try{const s=t.__sentry_wrapped__;if(s)return s;if(Hn(t))return t}catch{return t}const r=function(){const s=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const i=s.map(a=>Mt(a,e));return t.apply(this,i)}catch(i){throw Zo(),Ds(a=>{a.addEventProcessor(o=>(e.mechanism&&(Sn(o,void 0,void 0),Vt(o,e.mechanism)),o.extra={...o.extra,arguments:s},o)),nn(i)}),i}};try{for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}catch{}ma(r,t),ws(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return t.name}})}catch{}return r}function Ws(t,e){const n=qn(t,e),r={type:e&&e.name,value:jo(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function Vo(t,e,n,r){const i=w().getClient(),a=i&&i.getOptions().normalizeDepth,o={exception:{values:[{type:Vn(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:Xo(e,{isUnhandledRejection:r})}]},extra:{__serialized__:As(e,a)}};if(n){const c=qn(t,n);c.length&&(o.exception.values[0].stacktrace={frames:c})}return o}function _n(t,e){return{exception:{values:[Ws(t,e)]}}}function qn(t,e){const n=e.stacktrace||e.stack||"",r=Ko(e);try{return t(n,r)}catch{}return[]}const $o=/Minified React error #\d+;/i;function Ko(t){if(t){if(typeof t.framesToPop=="number")return t.framesToPop;if($o.test(t.message))return 1}return 0}function jo(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function qo(t,e,n,r){const s=n&&n.syntheticException||void 0,i=Jn(t,e,s,r);return Vt(i),i.level="error",n&&n.event_id&&(i.event_id=n.event_id),Dt(i)}function Jo(t,e,n="info",r,s){const i=r&&r.syntheticException||void 0,a=An(t,e,i,s);return a.level=n,r&&r.event_id&&(a.event_id=r.event_id),Dt(a)}function Jn(t,e,n,r,s){let i;if(Zn(e)&&e.error)return _n(t,e.error);if(Ir(e)||ga(e)){const a=e;if("stack"in e)i=_n(t,e);else{const o=a.name||(Ir(a)?"DOMError":"DOMException"),c=a.message?`${o}: ${a.message}`:o;i=An(t,c,n,r),Sn(i,c)}return"code"in a&&(i.tags={...i.tags,"DOMException.code":`${a.code}`}),i}return Is(e)?_n(t,e):En(e)||Vn(e)?(i=Vo(t,e,n,s),Vt(i,{synthetic:!0}),i):(i=An(t,e,n,r),Sn(i,`${e}`,void 0),Vt(i,{synthetic:!0}),i)}function An(t,e,n,r){const s={message:e};if(r&&n){const i=qn(t,n);i.length&&(s.exception={values:[{value:e,stacktrace:{frames:i}}]})}return s}function Xo(t,{isUnhandledRejection:e}){const n=ya(t),r=e?"promise rejection":"exception";return Zn(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:Vn(t)?`Event \`${Qo(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function Qo(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}function tc(t,{metadata:e,tunnel:n,dsn:r}){const s={event_id:t.event_id,sent_at:new Date().toISOString(),...e&&e.sdk&&{sdk:{name:e.sdk.name,version:e.sdk.version}},...!!n&&!!r&&{dsn:ge(r)}},i=ec(t);return ee(s,[i])}function ec(t){return[{type:"user_report"},t]}class nc extends go{constructor(e){const n=S.SENTRY_SDK_SOURCE||ba();e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${n}:@sentry/browser`,version:Ye}],version:Ye},super(e),e.sendClientReports&&S.document&&S.document.addEventListener("visibilitychange",()=>{S.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,n){return qo(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return Jo(this._options.stackParser,e,n,r,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled()){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("SDK not enabled, will not capture user feedback.");return}const n=tc(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(n)}_prepareEvent(e,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r)}_flushOutcomes(){const e=this._clearOutcomes();if(e.length===0){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("No outcomes to send");return}if(!this._dsn){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("No dsn provided, will not send outcomes");return}(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("Sending outcomes:",e);const n=$a(e,this._options.tunnel&&ge(this._dsn));this._sendEnvelope(n)}}let ae;function rc(){if(ae)return ae;if(Ea(S.fetch))return ae=S.fetch.bind(S);const t=S.document;let e=S.fetch;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(e=r.fetch),t.head.removeChild(n)}catch(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return ae=e.bind(S)}function sc(){ae=void 0}function ic(t,e=rc()){let n=0,r=0;function s(i){const a=i.body.length;n+=a,r++;const o={body:i.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};try{return e(t.url,o).then(c=>(n-=a,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return sc(),n-=a,r--,Gn(c)}}return zs(t,s)}const ac=4;function oc(t){function e(n){return new Yn((r,s)=>{const i=new XMLHttpRequest;i.onerror=s,i.onreadystatechange=()=>{i.readyState===ac&&r({statusCode:i.status,headers:{"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")}})},i.open("POST",t.url);for(const a in t.headers)Object.prototype.hasOwnProperty.call(t.headers,a)&&i.setRequestHeader(a,t.headers[a]);i.send(n.body)})}return zs(t,e)}const ne="?",cc=10,lc=20,uc=30,dc=40,fc=50;function Ee(t,e,n,r){const s={filename:t,function:e,in_app:!0};return n!==void 0&&(s.lineno=n),r!==void 0&&(s.colno=r),s}const hc=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,pc=/\((\S*)(?::(\d+))(?::(\d+))\)/,_c=t=>{const e=hc.exec(t);if(e){if(e[2]&&e[2].indexOf("eval")===0){const i=pc.exec(e[2]);i&&(e[2]=i[1],e[3]=i[2],e[4]=i[3])}const[r,s]=Hs(e[1]||ne,e[2]);return Ee(s,r,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}},mc=[uc,_c],gc=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,yc=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,bc=t=>{const e=gc.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const i=yc.exec(e[3]);i&&(e[1]=e[1]||"eval",e[3]=i[1],e[4]=i[2],e[5]="")}let r=e[3],s=e[1]||ne;return[s,r]=Hs(s,r),Ee(r,s,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},Ec=[fc,bc],Sc=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,wc=t=>{const e=Sc.exec(t);return e?Ee(e[2],e[1]||ne,+e[3],e[4]?+e[4]:void 0):void 0},Ic=[dc,wc],vc=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,Cc=t=>{const e=vc.exec(t);return e?Ee(e[2],e[3]||ne,+e[1]):void 0},Ah=[cc,Cc],kc=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,Rc=t=>{const e=kc.exec(t);return e?Ee(e[5],e[3]||e[4]||ne,+e[1],+e[2]):void 0},Th=[lc,Rc],Ac=[mc,Ec,Ic],Tc=Sa(...Ac),Hs=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:ne,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]};class Ot{static __initStatic(){this.id="GlobalHandlers"}constructor(e){this.name=Ot.id,this._options={onerror:!0,onunhandledrejection:!0,...e},this._installFunc={onerror:xc,onunhandledrejection:Nc}}setupOnce(){Error.stackTraceLimit=50;const e=this._options;for(const n in e){const r=this._installFunc[n];r&&e[n]&&(Oc(n),r(),this._installFunc[n]=void 0)}}}Ot.__initStatic();function xc(){rt("error",t=>{const[e,n,r]=$s();if(!e.getIntegration(Ot))return;const{msg:s,url:i,line:a,column:o,error:c}=t;if(Ys()||c&&c.__sentry_own_request__)return;const l=c===void 0&&vs(s)?Mc(s,i,a,o):Zs(Jn(n,c||s,void 0,r,!1),i,a,o);l.level="error",Vs(e,c,l,"onerror")})}function Nc(){rt("unhandledrejection",t=>{const[e,n,r]=$s();if(!e.getIntegration(Ot))return;let s=t;try{"reason"in t?s=t.reason:"detail"in t&&"reason"in t.detail&&(s=t.detail.reason)}catch{}if(Ys()||s&&s.__sentry_own_request__)return!0;const i=Ss(s)?Dc(s):Jn(n,s,void 0,r,!0);i.level="error",Vs(e,s,i,"onunhandledrejection")})}function Dc(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function Mc(t,e,n,r){const s=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let i=Zn(t)?t.message:t,a="Error";const o=i.match(s);return o&&(a=o[1],i=o[2]),Zs({exception:{values:[{type:a,value:i}]}},e,n,r)}function Zs(t,e,n,r){const s=t.exception=t.exception||{},i=s.values=s.values||[],a=i[0]=i[0]||{},o=a.stacktrace=a.stacktrace||{},c=o.frames=o.frames||[],l=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,d=vs(e)&&e.length>0?e:wa();return c.length===0&&c.push({colno:l,filename:d,function:"?",in_app:!0,lineno:u}),t}function Oc(t){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`Global Handler attached: ${t}`)}function Vs(t,e,n,r){Vt(n,{handled:!1,type:r}),t.captureEvent(n,{originalException:e})}function $s(){const t=w(),e=t.getClient(),n=e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[t,n.stackParser,n.attachStacktrace]}const Bc=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class Se{static __initStatic(){this.id="TryCatch"}constructor(e){this.name=Se.id,this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&yt(S,"setTimeout",Fr),this._options.setInterval&&yt(S,"setInterval",Fr),this._options.requestAnimationFrame&&yt(S,"requestAnimationFrame",Uc),this._options.XMLHttpRequest&&"XMLHttpRequest"in S&&yt(XMLHttpRequest.prototype,"send",Lc);const e=this._options.eventTarget;e&&(Array.isArray(e)?e:Bc).forEach(Fc)}}Se.__initStatic();function Fr(t){return function(...e){const n=e[0];return e[0]=Mt(n,{mechanism:{data:{function:Nt(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function Uc(t){return function(e){return t.apply(this,[Mt(e,{mechanism:{data:{function:"requestAnimationFrame",handler:Nt(t)},handled:!1,type:"instrument"}})])}}function Lc(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in n&&typeof n[s]=="function"&&yt(n,s,function(i){const a={mechanism:{data:{function:s,handler:Nt(i)},handled:!1,type:"instrument"}},o=Hn(i);return o&&(a.mechanism.data.handler=Nt(o)),Mt(i,a)})}),t.apply(this,e)}}function Fc(t){const e=S,n=e[t]&&e[t].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(yt(n,"addEventListener",function(r){return function(s,i,a){try{typeof i.handleEvent=="function"&&(i.handleEvent=Mt(i.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Nt(i),target:t},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[s,Mt(i,{mechanism:{data:{function:"addEventListener",handler:Nt(i),target:t},handled:!1,type:"instrument"}}),a])}}),yt(n,"removeEventListener",function(r){return function(s,i,a){const o=i;try{const c=o&&o.__sentry_wrapped__;c&&r.call(this,s,c,a)}catch{}return r.call(this,s,o,a)}}))}const Te=1024;class we{static __initStatic(){this.id="Breadcrumbs"}constructor(e){this.name=we.id,this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){if(this.options.console&&rt("console",Gc),this.options.dom&&rt("dom",Pc(this.options.dom)),this.options.xhr&&rt("xhr",Yc),this.options.fetch&&rt("fetch",Wc),this.options.history&&rt("history",Hc),this.options.sentry){const e=w().getClient();e&&e.on&&e.on("beforeSendEvent",zc)}}}we.__initStatic();function zc(t){w().addBreadcrumb({category:`sentry.${t.type==="transaction"?"transaction":"event"}`,event_id:t.event_id,level:t.level,message:gt(t)},{event:t})}function Pc(t){function e(n){let r,s=typeof t=="object"?t.serializeAttribute:void 0,i=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;i&&i>Te&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`\`dom.maxStringLength\` cannot exceed ${Te}, but a value of ${i} was configured. Sentry will use ${Te} instead.`),i=Te),typeof s=="string"&&(s=[s]);try{const a=n.event;r=Zc(a)?Ge(a.target,{keyAttrs:s,maxStringLength:i}):Ge(a,{keyAttrs:s,maxStringLength:i})}catch{r="<unknown>"}r.length!==0&&w().addBreadcrumb({category:`ui.${n.name}`,message:r},{event:n.event,name:n.name,global:n.global})}return e}function Gc(t){const e={category:"console",data:{arguments:t.args,logger:"console"},level:Pa(t.level),message:vr(t.args," ")};if(t.level==="assert")if(t.args[0]===!1)e.message=`Assertion failed: ${vr(t.args.slice(1)," ")||"console.assert"}`,e.data.arguments=t.args.slice(1);else return;w().addBreadcrumb(e,{input:t.args,level:t.level})}function Yc(t){const{startTimestamp:e,endTimestamp:n}=t,r=t.xhr[$n];if(!e||!n||!r)return;const{method:s,url:i,status_code:a,body:o}=r,c={method:s,url:i,status_code:a},l={xhr:t.xhr,input:o,startTimestamp:e,endTimestamp:n};w().addBreadcrumb({category:"xhr",data:c,type:"http"},l)}function Wc(t){const{startTimestamp:e,endTimestamp:n}=t;if(n&&!(t.fetchData.url.match(/sentry_key/)&&t.fetchData.method==="POST"))if(t.error){const r=t.fetchData,s={data:t.error,input:t.args,startTimestamp:e,endTimestamp:n};w().addBreadcrumb({category:"fetch",data:r,level:"error",type:"http"},s)}else{const r={...t.fetchData,status_code:t.response&&t.response.status},s={input:t.args,response:t.response,startTimestamp:e,endTimestamp:n};w().addBreadcrumb({category:"fetch",data:r,type:"http"},s)}}function Hc(t){let e=t.from,n=t.to;const r=hn(S.location.href);let s=hn(e);const i=hn(n);s.path||(s=r),r.protocol===i.protocol&&r.host===i.host&&(n=i.relative),r.protocol===s.protocol&&r.host===s.host&&(e=s.relative),w().addBreadcrumb({category:"navigation",data:{from:e,to:n}})}function Zc(t){return!!t&&!!t.target}const Vc="cause",$c=5;class Ie{static __initStatic(){this.id="LinkedErrors"}constructor(e={}){this.name=Ie.id,this._key=e.key||Vc,this._limit=e.limit||$c}setupOnce(){}preprocessEvent(e,n,r){const s=r.getOptions();Ra(Ws,s.stackParser,s.maxValueLength,this._key,this._limit,e,n)}}Ie.__initStatic();class ve{static __initStatic(){this.id="HttpContext"}constructor(){this.name=ve.id}setupOnce(){}preprocessEvent(e){if(!S.navigator&&!S.location&&!S.document)return;const n=e.request&&e.request.url||S.location&&S.location.href,{referrer:r}=S.document||{},{userAgent:s}=S.navigator||{},i={...e.request&&e.request.headers,...r&&{Referer:r},...s&&{"User-Agent":s}},a={...e.request,...n&&{url:n},headers:i};e.request=a}}ve.__initStatic();class Ce{static __initStatic(){this.id="Dedupe"}constructor(){this.name=Ce.id}setupOnce(e,n){}processEvent(e){if(e.type)return e;try{if(Kc(e,this._previousEvent))return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return this._previousEvent=e}}Ce.__initStatic();function Kc(t,e){return e?!!(jc(t,e)||qc(t,e)):!1}function jc(t,e){const n=t.message,r=e.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!js(t,e)||!Ks(t,e))}function qc(t,e){const n=zr(e),r=zr(t);return!(!n||!r||n.type!==r.type||n.value!==r.value||!js(t,e)||!Ks(t,e))}function Ks(t,e){let n=Pr(t),r=Pr(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let s=0;s<r.length;s++){const i=r[s],a=n[s];if(i.filename!==a.filename||i.lineno!==a.lineno||i.colno!==a.colno||i.function!==a.function)return!1}return!0}function js(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function zr(t){return t.exception&&t.exception.values&&t.exception.values[0]}function Pr(t){const e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch{return}}const Jc=[new be,new ye,new Se,new we,new Ot,new Ie,new Ce,new ve];function Xc(t={}){t.defaultIntegrations===void 0&&(t.defaultIntegrations=Jc),t.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(t.release=__SENTRY_RELEASE__),S.SENTRY_RELEASE&&S.SENTRY_RELEASE.id&&(t.release=S.SENTRY_RELEASE.id)),t.autoSessionTracking===void 0&&(t.autoSessionTracking=!0),t.sendClientReports===void 0&&(t.sendClientReports=!0);const e={...t,stackParser:Ia(t.stackParser||Tc),integrations:co(t),transport:t.transport||(va()?ic:oc)};Eo(nc,e),t.autoSessionTracking&&Qc()}function Gr(t={},e=w()){if(!S.document){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error("Global document not defined in showReportDialog call");return}const{client:n,scope:r}=e.getStackTop(),s=t.dsn||n&&n.getDsn();if(!s){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error("DSN not configured for showReportDialog call");return}r&&(t.user={...r.getUser(),...t.user}),t.eventId||(t.eventId=e.lastEventId());const i=S.document.createElement("script");i.async=!0,i.crossOrigin="anonymous",i.src=ro(s,t),t.onLoad&&(i.onload=t.onLoad);const a=S.document.head||S.document.body;a?a.appendChild(i):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error("Not injecting report dialog. No injection point found in HTML")}function xh(){}function Nh(t){t()}function Dh(t){return Mt(t)()}function Yr(t){t.startSession({ignoreDuration:!0}),t.captureSession()}function Qc(){if(typeof S.document>"u"){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}const t=w();t.captureSession&&(Yr(t),rt("history",({from:e,to:n})=>{e===void 0||e===n||Yr(w())}))}function Mh(t){const e=w().getClient();e&&e.captureUserFeedback(t)}const tl=Object.freeze(Object.defineProperty({__proto__:null,Breadcrumbs:we,Dedupe:Ce,GlobalHandlers:Ot,HttpContext:ve,LinkedErrors:Ie,TryCatch:Se},Symbol.toStringTag,{value:"Module"})),M=xt,Xn="sentryReplaySession",el="replay_event",Qn="Unable to send Replay",nl=3e5,rl=9e5,sl=5e3,il=5500,al=6e4,ol=5e3,cl=3,xe=15e4,Ne=5e3,ll=3e3,ul=300,tr=2e7,dl=4999,fl=15e3,Wr=36e5;var H;(function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"})(H||(H={}));function hl(t){return t.nodeType===t.ELEMENT_NODE}function oe(t){const e=t==null?void 0:t.host;return(e==null?void 0:e.shadowRoot)===t}function ce(t){return Object.prototype.toString.call(t)==="[object ShadowRoot]"}function pl(t){return t.includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t}function _l(t){const{cssText:e}=t;if(e.split('"').length<3)return e;const n=["@import",`url(${JSON.stringify(t.href)})`];return t.layerName===""?n.push("layer"):t.layerName&&n.push(`layer(${t.layerName})`),t.supportsText&&n.push(`supports(${t.supportsText})`),t.media.length&&n.push(t.media.mediaText),n.join(" ")+";"}function He(t){try{const e=t.rules||t.cssRules;return e?pl(Array.from(e,qs).join("")):null}catch{return null}}function qs(t){let e;if(gl(t))try{e=He(t.styleSheet)||_l(t)}catch{}else if(yl(t)&&t.selectorText.includes(":"))return ml(t.cssText);return e||t.cssText}function ml(t){const e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return t.replace(e,"$1\\$2")}function gl(t){return"styleSheet"in t}function yl(t){return"selectorText"in t}class Js{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){var n;if(!e)return-1;const r=(n=this.getMeta(e))===null||n===void 0?void 0:n.id;return r??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,n){const r=n.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,n)}replace(e,n){const r=this.getNode(e);if(r){const s=this.nodeMetaMap.get(r);s&&this.nodeMetaMap.set(n,s)}this.idNodeMap.set(e,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function bl(){return new Js}function rn({maskInputOptions:t,tagName:e,type:n}){return e==="OPTION"&&(e="SELECT"),!!(t[e.toLowerCase()]||n&&t[n]||n==="password"||e==="INPUT"&&!n&&t.text)}function ue({isMasked:t,element:e,value:n,maskInputFn:r}){let s=n||"";return t?(r&&(s=r(s,e)),"*".repeat(s.length)):s}function Kt(t){return t.toLowerCase()}function Tn(t){return t.toUpperCase()}const Hr="__rrweb_original__";function El(t){const e=t.getContext("2d");if(!e)return!0;const n=50;for(let r=0;r<t.width;r+=n)for(let s=0;s<t.height;s+=n){const i=e.getImageData,a=Hr in i?i[Hr]:i;if(new Uint32Array(a.call(e,r,s,Math.min(n,t.width-r),Math.min(n,t.height-s)).data.buffer).some(c=>c!==0))return!1}return!0}function er(t){const e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?Kt(e):null}function Ze(t,e,n){return e==="INPUT"&&(n==="radio"||n==="checkbox")?t.getAttribute("value")||"":t.value}let Sl=1;const wl=new RegExp("[^a-z0-9-_:]"),de=-2;function nr(){return Sl++}function Il(t){if(t instanceof HTMLFormElement)return"form";const e=Kt(t.tagName);return wl.test(e)?"div":e}function vl(t){let e="";return t.indexOf("//")>-1?e=t.split("/").slice(0,3).join("/"):e=t.split("/")[0],e=e.split("?")[0],e}let Bt,Zr;const Cl=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,kl=/^(?:[a-z+]+:)?\/\//i,Rl=/^www\..*/i,Al=/^(data:)([^,]*),(.*)/i;function Ve(t,e){return(t||"").replace(Cl,(n,r,s,i,a,o)=>{const c=s||a||o,l=r||i||"";if(!c)return n;if(kl.test(c)||Rl.test(c))return`url(${l}${c}${l})`;if(Al.test(c))return`url(${l}${c}${l})`;if(c[0]==="/")return`url(${l}${vl(e)+c}${l})`;const u=e.split("/"),d=c.split("/");u.pop();for(const f of d)f!=="."&&(f===".."?u.pop():u.push(f));return`url(${l}${u.join("/")}${l})`})}const Tl=/^[^ \t\n\r\u000c]+/,xl=/^[, \t\n\r\u000c]+/;function Nl(t,e){if(e.trim()==="")return e;let n=0;function r(i){let a;const o=i.exec(e.substring(n));return o?(a=o[0],n+=a.length,a):""}const s=[];for(;r(xl),!(n>=e.length);){let i=r(Tl);if(i.slice(-1)===",")i=Lt(t,i.substring(0,i.length-1)),s.push(i);else{let a="";i=Lt(t,i);let o=!1;for(;;){const c=e.charAt(n);if(c===""){s.push((i+a).trim());break}else if(o)c===")"&&(o=!1);else if(c===","){n+=1,s.push((i+a).trim());break}else c==="("&&(o=!0);a+=c,n+=1}}}return s.join(", ")}function Lt(t,e){if(!e||e.trim()==="")return e;const n=t.createElement("a");return n.href=e,n.href}function Dl(t){return!!(t.tagName==="svg"||t.ownerSVGElement)}function rr(){const t=document.createElement("a");return t.href="",t.href}function Xs(t,e,n,r,s,i){return r&&(n==="src"||n==="href"&&!(e==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(e==="table"||e==="td"||e==="th")?Lt(t,r):n==="srcset"?Nl(t,r):n==="style"?Ve(r,rr()):e==="object"&&n==="data"?Lt(t,r):typeof i=="function"?i(n,r,s):r)}function Qs(t,e,n){return(t==="video"||t==="audio")&&e==="autoplay"}function Ml(t,e,n,r){try{if(r&&t.matches(r))return!1;if(typeof e=="string"){if(t.classList.contains(e))return!0}else for(let s=t.classList.length;s--;){const i=t.classList[s];if(e.test(i))return!0}if(n)return t.matches(n)}catch{}return!1}function Ol(t,e){for(let n=t.classList.length;n--;){const r=t.classList[n];if(e.test(r))return!0}return!1}function Rt(t,e,n=1/0,r=0){return!t||t.nodeType!==t.ELEMENT_NODE||r>n?-1:e(t)?r:Rt(t.parentNode,e,n,r+1)}function Ft(t,e){return n=>{const r=n;if(r===null)return!1;if(t){if(typeof t=="string"){if(r.matches(`.${t}`))return!0}else if(Ol(r,t))return!0}return!!(e&&r.matches(e))}}function jt(t,e,n,r,s,i){try{const a=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(a===null)return!1;let o=-1,c=-1;if(i){if(c=Rt(a,Ft(r,s)),c<0)return!0;o=Rt(a,Ft(e,n),c>=0?c:1/0)}else{if(o=Rt(a,Ft(e,n)),o<0)return!1;c=Rt(a,Ft(r,s),o>=0?o:1/0)}return o>=0?c>=0?o<=c:!0:c>=0?!1:!!i}catch{}return!!i}function Bl(t,e,n){const r=t.contentWindow;if(!r)return;let s=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){const o=setTimeout(()=>{s||(e(),s=!0)},n);t.addEventListener("load",()=>{clearTimeout(o),s=!0,e()});return}const a="about:blank";if(r.location.href!==a||t.src===a||t.src==="")return setTimeout(e,0),t.addEventListener("load",e);t.addEventListener("load",e)}function Ul(t,e,n){let r=!1,s;try{s=t.sheet}catch{return}if(s)return;const i=setTimeout(()=>{r||(e(),r=!0)},n);t.addEventListener("load",()=>{clearTimeout(i),r=!0,e()})}function Ll(t,e){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:a,maskAllText:o,maskAttributeFn:c,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:f,inlineStylesheet:h,maskInputOptions:_={},maskTextFn:p,maskInputFn:g,dataURLOptions:y={},inlineImages:I,recordCanvas:T,keepIframeSrcFn:A,newlyAddedElement:P=!1}=e,v=Fl(n,r);switch(t.nodeType){case t.DOCUMENT_NODE:return t.compatMode!=="CSS1Compat"?{type:H.Document,childNodes:[],compatMode:t.compatMode}:{type:H.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:H.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:v};case t.ELEMENT_NODE:return Pl(t,{doc:n,blockClass:s,blockSelector:i,unblockSelector:a,inlineStylesheet:h,maskAttributeFn:c,maskInputOptions:_,maskInputFn:g,dataURLOptions:y,inlineImages:I,recordCanvas:T,keepIframeSrcFn:A,newlyAddedElement:P,rootId:v,maskAllText:o,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:f});case t.TEXT_NODE:return zl(t,{maskAllText:o,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:f,maskTextFn:p,maskInputOptions:_,maskInputFn:g,rootId:v});case t.CDATA_SECTION_NODE:return{type:H.CDATA,textContent:"",rootId:v};case t.COMMENT_NODE:return{type:H.Comment,textContent:t.textContent||"",rootId:v};default:return!1}}function Fl(t,e){if(!e.hasNode(t))return;const n=e.getId(t);return n===1?void 0:n}function zl(t,e){var n;const{maskAllText:r,maskTextClass:s,unmaskTextClass:i,maskTextSelector:a,unmaskTextSelector:o,maskTextFn:c,maskInputOptions:l,maskInputFn:u,rootId:d}=e,f=t.parentNode&&t.parentNode.tagName;let h=t.textContent;const _=f==="STYLE"?!0:void 0,p=f==="SCRIPT"?!0:void 0,g=f==="TEXTAREA"?!0:void 0;if(_&&h){try{t.nextSibling||t.previousSibling||!((n=t.parentNode.sheet)===null||n===void 0)&&n.cssRules&&(h=He(t.parentNode.sheet))}catch(I){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${I}`,t)}h=Ve(h,rr())}p&&(h="SCRIPT_PLACEHOLDER");const y=jt(t,s,a,i,o,r);if(!_&&!p&&!g&&h&&y&&(h=c?c(h):h.replace(/[\S]/g,"*")),g&&h&&(l.textarea||y)&&(h=u?u(h,t.parentNode):h.replace(/[\S]/g,"*")),f==="OPTION"&&h){const I=rn({type:null,tagName:f,maskInputOptions:l});h=ue({isMasked:jt(t,s,a,i,o,I),element:t,value:h,maskInputFn:u})}return{type:H.Text,textContent:h||"",isStyle:_,rootId:d}}function Pl(t,e){const{doc:n,blockClass:r,blockSelector:s,unblockSelector:i,inlineStylesheet:a,maskInputOptions:o={},maskAttributeFn:c,maskInputFn:l,dataURLOptions:u={},inlineImages:d,recordCanvas:f,keepIframeSrcFn:h,newlyAddedElement:_=!1,rootId:p,maskAllText:g,maskTextClass:y,unmaskTextClass:I,maskTextSelector:T,unmaskTextSelector:A}=e,P=Ml(t,r,s,i),v=Il(t);let E={};const N=t.attributes.length;for(let b=0;b<N;b++){const k=t.attributes[b];Qs(v,k.name,k.value)||(E[k.name]=Xs(n,v,Kt(k.name),k.value,t,c))}if(v==="link"&&a){const b=Array.from(n.styleSheets).find(B=>B.href===t.href);let k=null;b&&(k=He(b)),k&&(delete E.rel,delete E.href,E._cssText=Ve(k,b.href))}if(v==="style"&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){const b=He(t.sheet);b&&(E._cssText=Ve(b,rr()))}if(v==="input"||v==="textarea"||v==="select"||v==="option"){const b=t,k=er(b),B=Ze(b,Tn(v),k),Z=b.checked;if(k!=="submit"&&k!=="button"&&B){const V=jt(b,y,T,I,A,rn({type:k,tagName:Tn(v),maskInputOptions:o}));E.value=ue({isMasked:V,element:b,value:B,maskInputFn:l})}Z&&(E.checked=Z)}if(v==="option"&&(t.selected&&!o.select?E.selected=!0:delete E.selected),v==="canvas"&&f){if(t.__context==="2d")El(t)||(E.rr_dataURL=t.toDataURL(u.type,u.quality));else if(!("__context"in t)){const b=t.toDataURL(u.type,u.quality),k=document.createElement("canvas");k.width=t.width,k.height=t.height;const B=k.toDataURL(u.type,u.quality);b!==B&&(E.rr_dataURL=b)}}if(v==="img"&&d){Bt||(Bt=n.createElement("canvas"),Zr=Bt.getContext("2d"));const b=t,k=b.crossOrigin;b.crossOrigin="anonymous";const B=()=>{b.removeEventListener("load",B);try{Bt.width=b.naturalWidth,Bt.height=b.naturalHeight,Zr.drawImage(b,0,0),E.rr_dataURL=Bt.toDataURL(u.type,u.quality)}catch(Z){console.warn(`Cannot inline img src=${b.currentSrc}! Error: ${Z}`)}k?E.crossOrigin=k:b.removeAttribute("crossorigin")};b.complete&&b.naturalWidth!==0?B():b.addEventListener("load",B)}if((v==="audio"||v==="video")&&(E.rr_mediaState=t.paused?"paused":"played",E.rr_mediaCurrentTime=t.currentTime),_||(t.scrollLeft&&(E.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(E.rr_scrollTop=t.scrollTop)),P){const{width:b,height:k}=t.getBoundingClientRect();E={class:E.class,rr_width:`${b}px`,rr_height:`${k}px`}}v==="iframe"&&!h(E.src)&&(t.contentDocument||(E.rr_src=E.src),delete E.src);let G;try{customElements.get(v)&&(G=!0)}catch{}return{type:H.Element,tagName:v,attributes:E,childNodes:[],isSVG:Dl(t)||void 0,needBlock:P,rootId:p,isCustom:G}}function U(t){return t==null?"":t.toLowerCase()}function Gl(t,e){if(e.comment&&t.type===H.Comment)return!0;if(t.type===H.Element){if(e.script&&(t.tagName==="script"||t.tagName==="link"&&(t.attributes.rel==="preload"||t.attributes.rel==="modulepreload")&&t.attributes.as==="script"||t.tagName==="link"&&t.attributes.rel==="prefetch"&&typeof t.attributes.href=="string"&&t.attributes.href.endsWith(".js")))return!0;if(e.headFavicon&&(t.tagName==="link"&&t.attributes.rel==="shortcut icon"||t.tagName==="meta"&&(U(t.attributes.name).match(/^msapplication-tile(image|color)$/)||U(t.attributes.name)==="application-name"||U(t.attributes.rel)==="icon"||U(t.attributes.rel)==="apple-touch-icon"||U(t.attributes.rel)==="shortcut icon")))return!0;if(t.tagName==="meta"){if(e.headMetaDescKeywords&&U(t.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(U(t.attributes.property).match(/^(og|twitter|fb):/)||U(t.attributes.name).match(/^(og|twitter):/)||U(t.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&(U(t.attributes.name)==="robots"||U(t.attributes.name)==="googlebot"||U(t.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&t.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&(U(t.attributes.name)==="author"||U(t.attributes.name)==="generator"||U(t.attributes.name)==="framework"||U(t.attributes.name)==="publisher"||U(t.attributes.name)==="progid"||U(t.attributes.property).match(/^article:/)||U(t.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&(U(t.attributes.name)==="google-site-verification"||U(t.attributes.name)==="yandex-verification"||U(t.attributes.name)==="csrf-token"||U(t.attributes.name)==="p:domain_verify"||U(t.attributes.name)==="verify-v1"||U(t.attributes.name)==="verification"||U(t.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function zt(t,e){const{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:a,maskAllText:o,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:f=!1,inlineStylesheet:h=!0,maskInputOptions:_={},maskAttributeFn:p,maskTextFn:g,maskInputFn:y,slimDOMOptions:I,dataURLOptions:T={},inlineImages:A=!1,recordCanvas:P=!1,onSerialize:v,onIframeLoad:E,iframeLoadTimeout:N=5e3,onStylesheetLoad:G,stylesheetLoadTimeout:b=5e3,keepIframeSrcFn:k=()=>!1,newlyAddedElement:B=!1}=e;let{preserveWhiteSpace:Z=!0}=e;const V=Ll(t,{doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:o,unblockSelector:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,inlineStylesheet:h,maskInputOptions:_,maskAttributeFn:p,maskTextFn:g,maskInputFn:y,dataURLOptions:T,inlineImages:A,recordCanvas:P,keepIframeSrcFn:k,newlyAddedElement:B});if(!V)return console.warn(t,"not serialized"),null;let X;r.hasNode(t)?X=r.getId(t):Gl(V,I)||!Z&&V.type===H.Text&&!V.isStyle&&!V.textContent.replace(/^\s+|\s+$/gm,"").length?X=de:X=nr();const O=Object.assign(V,{id:X});if(r.add(t,O),X===de)return null;v&&v(t);let tt=!f;if(O.type===H.Element){tt=tt&&!O.needBlock,delete O.needBlock;const Y=t.shadowRoot;Y&&ce(Y)&&(O.isShadowHost=!0)}if((O.type===H.Document||O.type===H.Element)&&tt){I.headWhitespace&&O.type===H.Element&&O.tagName==="head"&&(Z=!1);const Y={doc:n,mirror:r,blockClass:s,blockSelector:i,maskAllText:o,unblockSelector:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:f,inlineStylesheet:h,maskInputOptions:_,maskAttributeFn:p,maskTextFn:g,maskInputFn:y,slimDOMOptions:I,dataURLOptions:T,inlineImages:A,recordCanvas:P,preserveWhiteSpace:Z,onSerialize:v,onIframeLoad:E,iframeLoadTimeout:N,onStylesheetLoad:G,stylesheetLoadTimeout:b,keepIframeSrcFn:k};for(const et of Array.from(t.childNodes)){const nt=zt(et,Y);nt&&O.childNodes.push(nt)}if(hl(t)&&t.shadowRoot)for(const et of Array.from(t.shadowRoot.childNodes)){const nt=zt(et,Y);nt&&(ce(t.shadowRoot)&&(nt.isShadow=!0),O.childNodes.push(nt))}}return t.parentNode&&oe(t.parentNode)&&ce(t.parentNode)&&(O.isShadow=!0),O.type===H.Element&&O.tagName==="iframe"&&Bl(t,()=>{const Y=t.contentDocument;if(Y&&E){const et=zt(Y,{doc:Y,mirror:r,blockClass:s,blockSelector:i,unblockSelector:a,maskAllText:o,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:_,maskAttributeFn:p,maskTextFn:g,maskInputFn:y,slimDOMOptions:I,dataURLOptions:T,inlineImages:A,recordCanvas:P,preserveWhiteSpace:Z,onSerialize:v,onIframeLoad:E,iframeLoadTimeout:N,onStylesheetLoad:G,stylesheetLoadTimeout:b,keepIframeSrcFn:k});et&&E(t,et)}},N),O.type===H.Element&&O.tagName==="link"&&O.attributes.rel==="stylesheet"&&Ul(t,()=>{if(G){const Y=zt(t,{doc:n,mirror:r,blockClass:s,blockSelector:i,unblockSelector:a,maskAllText:o,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:_,maskAttributeFn:p,maskTextFn:g,maskInputFn:y,slimDOMOptions:I,dataURLOptions:T,inlineImages:A,recordCanvas:P,preserveWhiteSpace:Z,onSerialize:v,onIframeLoad:E,iframeLoadTimeout:N,onStylesheetLoad:G,stylesheetLoadTimeout:b,keepIframeSrcFn:k});Y&&G(t,Y)}},b),O}function Yl(t,e){const{mirror:n=new Js,blockClass:r="rr-block",blockSelector:s=null,unblockSelector:i=null,maskAllText:a=!1,maskTextClass:o="rr-mask",unmaskTextClass:c=null,maskTextSelector:l=null,unmaskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:f=!1,recordCanvas:h=!1,maskAllInputs:_=!1,maskAttributeFn:p,maskTextFn:g,maskInputFn:y,slimDOM:I=!1,dataURLOptions:T,preserveWhiteSpace:A,onSerialize:P,onIframeLoad:v,iframeLoadTimeout:E,onStylesheetLoad:N,stylesheetLoadTimeout:G,keepIframeSrcFn:b=()=>!1}=e||{};return zt(t,{doc:t,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,maskAllText:a,maskTextClass:o,unmaskTextClass:c,maskTextSelector:l,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:_===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:_===!1?{}:_,maskAttributeFn:p,maskTextFn:g,maskInputFn:y,slimDOMOptions:I===!0||I==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:I==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:I===!1?{}:I,dataURLOptions:T,inlineImages:f,recordCanvas:h,preserveWhiteSpace:A,onSerialize:P,onIframeLoad:v,iframeLoadTimeout:E,onStylesheetLoad:N,stylesheetLoadTimeout:G,keepIframeSrcFn:b,newlyAddedElement:!1})}function j(t,e,n=document){const r={capture:!0,passive:!0};return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e,r)}const Ut=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Vr={map:{},getId(){return console.error(Ut),-1},getNode(){return console.error(Ut),null},removeNodeFromMap(){console.error(Ut)},has(){return console.error(Ut),!1},reset(){console.error(Ut)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Vr=new Proxy(Vr,{get(t,e,n){return e==="map"&&console.error(Ut),Reflect.get(t,e,n)}}));function fe(t,e,n={}){let r=null,s=0;return function(...i){const a=Date.now();!s&&n.leading===!1&&(s=a);const o=e-(a-s),c=this;o<=0||o>e?(r&&(clearTimeout(r),r=null),s=a,t.apply(c,i)):!r&&n.trailing!==!1&&(r=setTimeout(()=>{s=n.leading===!1?0:Date.now(),r=null,t.apply(c,i)},o))}}function sn(t,e,n,r,s=window){const i=s.Object.getOwnPropertyDescriptor(t,e);return s.Object.defineProperty(t,e,r?n:{set(a){setTimeout(()=>{n.set.call(this,a)},0),i&&i.set&&i.set.call(this,a)}}),()=>sn(t,e,i||{},!0)}function re(t,e,n){try{if(!(e in t))return()=>{};const r=t[e],s=n(r);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=s,()=>{t[e]=r}}catch{return()=>{}}}let $e=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||($e=()=>new Date().getTime());function ti(t){var e,n,r,s,i,a;const o=t.document;return{left:o.scrollingElement?o.scrollingElement.scrollLeft:t.pageXOffset!==void 0?t.pageXOffset:(o==null?void 0:o.documentElement.scrollLeft)||((n=(e=o==null?void 0:o.body)===null||e===void 0?void 0:e.parentElement)===null||n===void 0?void 0:n.scrollLeft)||((r=o==null?void 0:o.body)===null||r===void 0?void 0:r.scrollLeft)||0,top:o.scrollingElement?o.scrollingElement.scrollTop:t.pageYOffset!==void 0?t.pageYOffset:(o==null?void 0:o.documentElement.scrollTop)||((i=(s=o==null?void 0:o.body)===null||s===void 0?void 0:s.parentElement)===null||i===void 0?void 0:i.scrollTop)||((a=o==null?void 0:o.body)===null||a===void 0?void 0:a.scrollTop)||0}}function ei(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function ni(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function q(t,e,n,r,s){if(!t)return!1;const i=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(!i)return!1;const a=Ft(e,n);if(!s){const l=r&&i.matches(r);return a(i)&&!l}const o=Rt(i,a);let c=-1;return o<0?!1:(r&&(c=Rt(i,Ft(null,r))),o>-1&&c<0?!0:o<c)}function Wl(t,e){return e.getId(t)!==-1}function mn(t,e){return e.getId(t)===de}function ri(t,e){if(oe(t))return!1;const n=e.getId(t);return e.has(n)?t.parentNode&&t.parentNode.nodeType===t.DOCUMENT_NODE?!1:t.parentNode?ri(t.parentNode,e):!0:!0}function xn(t){return!!t.changedTouches}function Hl(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let n=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function si(t,e){return!!(t.nodeName==="IFRAME"&&e.getMeta(t))}function ii(t,e){return!!(t.nodeName==="LINK"&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&t.getAttribute("rel")==="stylesheet"&&e.getMeta(t))}function Nn(t){return!!(t!=null&&t.shadowRoot)}class Zl{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){var n;return(n=this.styleIDMap.get(e))!==null&&n!==void 0?n:-1}has(e){return this.styleIDMap.has(e)}add(e,n){if(this.has(e))return this.getId(e);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function ai(t){var e,n;let r=null;return((n=(e=t.getRootNode)===null||e===void 0?void 0:e.call(t))===null||n===void 0?void 0:n.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&t.getRootNode().host&&(r=t.getRootNode().host),r}function Vl(t){let e=t,n;for(;n=ai(e);)e=n;return e}function $l(t){const e=t.ownerDocument;if(!e)return!1;const n=Vl(t);return e.contains(n)}function oi(t){const e=t.ownerDocument;return e?e.contains(t)||$l(t):!1}var R=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(R||{}),D=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(D||{}),J=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(J||{}),ut=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(ut||{}),qt=(t=>(t[t["2D"]=0]="2D",t[t.WebGL=1]="WebGL",t[t.WebGL2=2]="WebGL2",t))(qt||{});function $r(t){return"__ln"in t}class Kl{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<e;r++)n=(n==null?void 0:n.next)||null;return n}addNode(e){const n={value:e,previous:null,next:null};if(e.__ln=n,e.previousSibling&&$r(e.previousSibling)){const r=e.previousSibling.__ln.next;n.next=r,n.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(e.nextSibling&&$r(e.nextSibling)&&e.nextSibling.__ln.previous){const r=e.nextSibling.__ln.previous;n.previous=r,n.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(e){const n=e.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const Kr=(t,e)=>`${t}@${e}`;class jl{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],n=new Set,r=new Kl,s=c=>{let l=c,u=de;for(;u===de;)l=l&&l.nextSibling,u=l&&this.mirror.getId(l);return u},i=c=>{if(!c.parentNode||!oi(c))return;const l=oe(c.parentNode)?this.mirror.getId(ai(c)):this.mirror.getId(c.parentNode),u=s(c);if(l===-1||u===-1)return r.addNode(c);const d=zt(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{si(f,this.mirror)&&this.iframeManager.addIframe(f),ii(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),Nn(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,h)=>{this.iframeManager.attachIframe(f,h),this.shadowDomManager.observeAttachShadow(f)},onStylesheetLoad:(f,h)=>{this.stylesheetManager.attachLinkElement(f,h)}});d&&(e.push({parentId:l,nextId:u,node:d}),n.add(d.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)jr(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||i(c);for(const c of this.addedSet)!qr(this.droppedSet,c)&&!jr(this.removes,c,this.mirror)||qr(this.movedSet,c)?i(c):this.droppedSet.add(c);let a=null;for(;r.length;){let c=null;if(a){const l=this.mirror.getId(a.value.parentNode),u=s(a.value);l!==-1&&u!==-1&&(c=a)}if(!c){let l=r.tail;for(;l;){const u=l;if(l=l.previous,u){const d=this.mirror.getId(u.value.parentNode);if(s(u.value)===-1)continue;if(d!==-1){c=u;break}else{const h=u.value;if(h.parentNode&&h.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const _=h.parentNode.host;if(this.mirror.getId(_)!==-1){c=u;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}a=c.previous,r.removeNode(c.value),i(c.value)}const o={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:l}=c;if(typeof l.style=="string"){const u=JSON.stringify(c.styleDiff),d=JSON.stringify(c._unchangedStyles);u.length<l.style.length&&(u+d).split("var(").length===l.style.split("var(").length&&(l.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:l}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:e};!o.texts.length&&!o.attributes.length&&!o.removes.length&&!o.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(o))},this.processMutation=e=>{if(mn(e.target,this.mirror))return;let n;try{n=document.implementation.createHTMLDocument()}catch{n=this.doc}switch(e.type){case"characterData":{const r=e.target.textContent;!q(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&r!==e.oldValue&&this.texts.push({value:jt(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&r?this.maskTextFn?this.maskTextFn(r):r.replace(/[\S]/g,"*"):r,node:e.target});break}case"attributes":{const r=e.target;let s=e.attributeName,i=e.target.getAttribute(s);if(s==="value"){const o=er(r),c=r.tagName;i=Ze(r,c,o);const l=rn({maskInputOptions:this.maskInputOptions,tagName:c,type:o}),u=jt(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,l);i=ue({isMasked:u,element:r,value:i,maskInputFn:this.maskInputFn})}if(q(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||i===e.oldValue)return;let a=this.attributes.find(o=>o.node===e.target);if(r.tagName==="IFRAME"&&s==="src"&&!this.keepIframeSrcFn(i))if(!r.contentDocument)s="rr_src";else return;if(a||(a={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(a)),s==="type"&&r.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&r.setAttribute("data-rr-is-password","true"),!Qs(r.tagName,s)&&(a.attributes[s]=Xs(this.doc,Kt(r.tagName),Kt(s),i,r,this.maskAttributeFn),s==="style")){const o=n.createElement("span");e.oldValue&&o.setAttribute("style",e.oldValue);for(const c of Array.from(r.style)){const l=r.style.getPropertyValue(c),u=r.style.getPropertyPriority(c);l!==o.style.getPropertyValue(c)||u!==o.style.getPropertyPriority(c)?u===""?a.styleDiff[c]=l:a.styleDiff[c]=[l,u]:a._unchangedStyles[c]=[l,u]}for(const c of Array.from(o.style))r.style.getPropertyValue(c)===""&&(a.styleDiff[c]=!1)}break}case"childList":{if(q(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach(r=>this.genAdds(r,e.target)),e.removedNodes.forEach(r=>{const s=this.mirror.getId(r),i=oe(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);q(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||mn(r,this.mirror)||!Wl(r,this.mirror)||(this.addedSet.has(r)?(Dn(this.addedSet,r),this.droppedSet.add(r)):this.addedSet.has(e.target)&&s===-1||ri(e.target,this.mirror)||(this.movedSet.has(r)&&this.movedMap[Kr(s,i)]?Dn(this.movedSet,r):this.removes.push({parentId:i,id:s,isShadow:oe(e.target)&&ce(e.target)?!0:void 0})),this.mapRemoves.push(r))});break}}},this.genAdds=(e,n)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if(mn(e,this.mirror))return;this.movedSet.add(e);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[Kr(this.mirror.getId(e),r)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);q(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach(r=>this.genAdds(r)),Nn(e)&&e.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,e)}))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=e[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Dn(t,e){t.delete(e),e.childNodes.forEach(n=>Dn(t,n))}function jr(t,e,n){return t.length===0?!1:ci(t,e,n)}function ci(t,e,n){const{parentNode:r}=e;if(!r)return!1;const s=n.getId(r);return t.some(i=>i.id===s)?!0:ci(t,r,n)}function qr(t,e){return t.size===0?!1:li(t,e)}function li(t,e){const{parentNode:n}=e;return n?t.has(n)?!0:li(t,n):!1}let le;function ql(t){le=t}function Jl(){le=void 0}const x=t=>le?(...n)=>{try{return t(...n)}catch(r){if(le&&le(r)===!0)return()=>{};throw r}}:t,At=[];function ke(t){try{if("composedPath"in t){const e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0]}catch{}return t&&t.target}function ui(t,e){var n,r;const s=new jl;At.push(s),s.init(t);let i=window.MutationObserver||window.__rrMutationObserver;const a=(r=(n=window==null?void 0:window.Zone)===null||n===void 0?void 0:n.__symbol__)===null||r===void 0?void 0:r.call(n,"MutationObserver");a&&window[a]&&(i=window[a]);const o=new i(x(c=>{t.onMutation&&t.onMutation(c)===!1||s.processMutations.bind(s)(c)}));return o.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),o}function Xl({mousemoveCb:t,sampling:e,doc:n,mirror:r}){if(e.mousemove===!1)return()=>{};const s=typeof e.mousemove=="number"?e.mousemove:50,i=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500;let a=[],o;const c=fe(x(d=>{const f=Date.now()-o;t(a.map(h=>(h.timeOffset-=f,h)),d),a=[],o=null}),i),l=x(fe(x(d=>{const f=ke(d),{clientX:h,clientY:_}=xn(d)?d.changedTouches[0]:d;o||(o=$e()),a.push({x:h,y:_,id:r.getId(f),timeOffset:$e()-o}),c(typeof DragEvent<"u"&&d instanceof DragEvent?D.Drag:d instanceof MouseEvent?D.MouseMove:D.TouchMove)}),s,{trailing:!1})),u=[j("mousemove",l,n),j("touchmove",l,n),j("drag",l,n)];return x(()=>{u.forEach(d=>d())})}function Ql({mouseInteractionCb:t,doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:a}){if(a.mouseInteraction===!1)return()=>{};const o=a.mouseInteraction===!0||a.mouseInteraction===void 0?{}:a.mouseInteraction,c=[];let l=null;const u=d=>f=>{const h=ke(f);if(q(h,r,s,i,!0))return;let _=null,p=d;if("pointerType"in f){switch(f.pointerType){case"mouse":_=ut.Mouse;break;case"touch":_=ut.Touch;break;case"pen":_=ut.Pen;break}_===ut.Touch?J[d]===J.MouseDown?p="TouchStart":J[d]===J.MouseUp&&(p="TouchEnd"):ut.Pen}else xn(f)&&(_=ut.Touch);_!==null?(l=_,(p.startsWith("Touch")&&_===ut.Touch||p.startsWith("Mouse")&&_===ut.Mouse)&&(_=null)):J[d]===J.Click&&(_=l,l=null);const g=xn(f)?f.changedTouches[0]:f;if(!g)return;const y=n.getId(h),{clientX:I,clientY:T}=g;x(t)(Object.assign({type:J[p],id:y,x:I,y:T},_!==null&&{pointerType:_}))};return Object.keys(J).filter(d=>Number.isNaN(Number(d))&&!d.endsWith("_Departed")&&o[d]!==!1).forEach(d=>{let f=Kt(d);const h=u(d);if(window.PointerEvent)switch(J[d]){case J.MouseDown:case J.MouseUp:f=f.replace("mouse","pointer");break;case J.TouchStart:case J.TouchEnd:return}c.push(j(f,h,e))}),x(()=>{c.forEach(d=>d())})}function di({scrollCb:t,doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,sampling:a}){const o=x(fe(x(c=>{const l=ke(c);if(!l||q(l,r,s,i,!0))return;const u=n.getId(l);if(l===e&&e.defaultView){const d=ti(e.defaultView);t({id:u,x:d.left,y:d.top})}else t({id:u,x:l.scrollLeft,y:l.scrollTop})}),a.scroll||100));return j("scroll",o,e)}function tu({viewportResizeCb:t},{win:e}){let n=-1,r=-1;const s=x(fe(x(()=>{const i=ei(),a=ni();(n!==i||r!==a)&&(t({width:Number(a),height:Number(i)}),n=i,r=a)}),200));return j("resize",s,e)}function Jr(t,e){const n=Object.assign({},t);return e||delete n.userTriggered,n}const eu=["INPUT","TEXTAREA","SELECT"],Xr=new WeakMap;function nu({inputCb:t,doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,ignoreClass:a,ignoreSelector:o,maskInputOptions:c,maskInputFn:l,sampling:u,userTriggeredOnInput:d,maskTextClass:f,unmaskTextClass:h,maskTextSelector:_,unmaskTextSelector:p}){function g(E){let N=ke(E);const G=E.isTrusted,b=N&&Tn(N.tagName);if(b==="OPTION"&&(N=N.parentElement),!N||!b||eu.indexOf(b)<0||q(N,r,s,i,!0))return;const k=N;if(k.classList.contains(a)||o&&k.matches(o))return;const B=er(N);let Z=Ze(k,b,B),V=!1;const X=rn({maskInputOptions:c,tagName:b,type:B}),O=jt(N,f,_,h,p,X);(B==="radio"||B==="checkbox")&&(V=N.checked),Z=ue({isMasked:O,element:N,value:Z,maskInputFn:l}),y(N,x(Jr)({text:Z,isChecked:V,userTriggered:G},d));const tt=N.name;B==="radio"&&tt&&V&&e.querySelectorAll(`input[type="radio"][name="${tt}"]`).forEach(Y=>{if(Y!==N){const et=ue({isMasked:O,element:Y,value:Ze(Y,b,B),maskInputFn:l});y(Y,x(Jr)({text:et,isChecked:!V,userTriggered:!1},d))}})}function y(E,N){const G=Xr.get(E);if(!G||G.text!==N.text||G.isChecked!==N.isChecked){Xr.set(E,N);const b=n.getId(E);x(t)(Object.assign(Object.assign({},N),{id:b}))}}const T=(u.input==="last"?["change"]:["input","change"]).map(E=>j(E,x(g),e)),A=e.defaultView;if(!A)return()=>{T.forEach(E=>E())};const P=A.Object.getOwnPropertyDescriptor(A.HTMLInputElement.prototype,"value"),v=[[A.HTMLInputElement.prototype,"value"],[A.HTMLInputElement.prototype,"checked"],[A.HTMLSelectElement.prototype,"value"],[A.HTMLTextAreaElement.prototype,"value"],[A.HTMLSelectElement.prototype,"selectedIndex"],[A.HTMLOptionElement.prototype,"selected"]];return P&&P.set&&T.push(...v.map(E=>sn(E[0],E[1],{set(){x(g)({target:this,isTrusted:!1})}},!1,A))),x(()=>{T.forEach(E=>E())})}function Ke(t){const e=[];function n(r,s){if(De("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||De("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||De("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||De("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const a=Array.from(r.parentRule.cssRules).indexOf(r);s.unshift(a)}else if(r.parentStyleSheet){const a=Array.from(r.parentStyleSheet.cssRules).indexOf(r);s.unshift(a)}return s}return n(t,e)}function pt(t,e,n){let r,s;return t?(t.ownerNode?r=e.getId(t.ownerNode):s=n.getId(t),{styleId:s,id:r}):{}}function ru({styleSheetRuleCb:t,mirror:e,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const s=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:x((u,d,f)=>{const[h,_]=f,{id:p,styleId:g}=pt(d,e,n.styleMirror);return(p&&p!==-1||g&&g!==-1)&&t({id:p,styleId:g,adds:[{rule:h,index:_}]}),u.apply(d,f)})});const i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:x((u,d,f)=>{const[h]=f,{id:_,styleId:p}=pt(d,e,n.styleMirror);return(_&&_!==-1||p&&p!==-1)&&t({id:_,styleId:p,removes:[{index:h}]}),u.apply(d,f)})});let a;r.CSSStyleSheet.prototype.replace&&(a=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(a,{apply:x((u,d,f)=>{const[h]=f,{id:_,styleId:p}=pt(d,e,n.styleMirror);return(_&&_!==-1||p&&p!==-1)&&t({id:_,styleId:p,replace:h}),u.apply(d,f)})}));let o;r.CSSStyleSheet.prototype.replaceSync&&(o=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(o,{apply:x((u,d,f)=>{const[h]=f,{id:_,styleId:p}=pt(d,e,n.styleMirror);return(_&&_!==-1||p&&p!==-1)&&t({id:_,styleId:p,replaceSync:h}),u.apply(d,f)})}));const c={};Me("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Me("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Me("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Me("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const l={};return Object.entries(c).forEach(([u,d])=>{l[u]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(l[u].insertRule,{apply:x((f,h,_)=>{const[p,g]=_,{id:y,styleId:I}=pt(h.parentStyleSheet,e,n.styleMirror);return(y&&y!==-1||I&&I!==-1)&&t({id:y,styleId:I,adds:[{rule:p,index:[...Ke(h),g||0]}]}),f.apply(h,_)})}),d.prototype.deleteRule=new Proxy(l[u].deleteRule,{apply:x((f,h,_)=>{const[p]=_,{id:g,styleId:y}=pt(h.parentStyleSheet,e,n.styleMirror);return(g&&g!==-1||y&&y!==-1)&&t({id:g,styleId:y,removes:[{index:[...Ke(h),p]}]}),f.apply(h,_)})})}),x(()=>{r.CSSStyleSheet.prototype.insertRule=s,r.CSSStyleSheet.prototype.deleteRule=i,a&&(r.CSSStyleSheet.prototype.replace=a),o&&(r.CSSStyleSheet.prototype.replaceSync=o),Object.entries(c).forEach(([u,d])=>{d.prototype.insertRule=l[u].insertRule,d.prototype.deleteRule=l[u].deleteRule})})}function fi({mirror:t,stylesheetManager:e},n){var r,s,i;let a=null;n.nodeName==="#document"?a=t.getId(n):a=t.getId(n.host);const o=n.nodeName==="#document"?(r=n.defaultView)===null||r===void 0?void 0:r.Document:(i=(s=n.ownerDocument)===null||s===void 0?void 0:s.defaultView)===null||i===void 0?void 0:i.ShadowRoot,c=o!=null&&o.prototype?Object.getOwnPropertyDescriptor(o==null?void 0:o.prototype,"adoptedStyleSheets"):void 0;return a===null||a===-1||!o||!c?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get(){var l;return(l=c.get)===null||l===void 0?void 0:l.call(this)},set(l){var u;const d=(u=c.set)===null||u===void 0?void 0:u.call(this,l);if(a!==null&&a!==-1)try{e.adoptStyleSheets(l,a)}catch{}return d}}),x(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get:c.get,set:c.set})}))}function su({styleDeclarationCb:t,mirror:e,ignoreCSSAttributes:n,stylesheetManager:r},{win:s}){const i=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:x((o,c,l)=>{var u;const[d,f,h]=l;if(n.has(d))return i.apply(c,[d,f,h]);const{id:_,styleId:p}=pt((u=c.parentRule)===null||u===void 0?void 0:u.parentStyleSheet,e,r.styleMirror);return(_&&_!==-1||p&&p!==-1)&&t({id:_,styleId:p,set:{property:d,value:f,priority:h},index:Ke(c.parentRule)}),o.apply(c,l)})});const a=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(a,{apply:x((o,c,l)=>{var u;const[d]=l;if(n.has(d))return a.apply(c,[d]);const{id:f,styleId:h}=pt((u=c.parentRule)===null||u===void 0?void 0:u.parentStyleSheet,e,r.styleMirror);return(f&&f!==-1||h&&h!==-1)&&t({id:f,styleId:h,remove:{property:d},index:Ke(c.parentRule)}),o.apply(c,l)})}),x(()=>{s.CSSStyleDeclaration.prototype.setProperty=i,s.CSSStyleDeclaration.prototype.removeProperty=a})}function iu({mediaInteractionCb:t,blockClass:e,blockSelector:n,unblockSelector:r,mirror:s,sampling:i,doc:a}){const o=x(l=>fe(x(u=>{const d=ke(u);if(!d||q(d,e,n,r,!0))return;const{currentTime:f,volume:h,muted:_,playbackRate:p}=d;t({type:l,id:s.getId(d),currentTime:f,volume:h,muted:_,playbackRate:p})}),i.media||500)),c=[j("play",o(0),a),j("pause",o(1),a),j("seeked",o(2),a),j("volumechange",o(3),a),j("ratechange",o(4),a)];return x(()=>{c.forEach(l=>l())})}function au({fontCb:t,doc:e}){const n=e.defaultView;if(!n)return()=>{};const r=[],s=new WeakMap,i=n.FontFace;n.FontFace=function(c,l,u){const d=new i(c,l,u);return s.set(d,{family:c,buffer:typeof l!="string",descriptors:u,fontSource:typeof l=="string"?l:JSON.stringify(Array.from(new Uint8Array(l)))}),d};const a=re(e.fonts,"add",function(o){return function(c){return setTimeout(x(()=>{const l=s.get(c);l&&(t(l),s.delete(c))}),0),o.apply(this,[c])}});return r.push(()=>{n.FontFace=i}),r.push(a),x(()=>{r.forEach(o=>o())})}function ou(t){const{doc:e,mirror:n,blockClass:r,blockSelector:s,unblockSelector:i,selectionCb:a}=t;let o=!0;const c=x(()=>{const l=e.getSelection();if(!l||o&&(l!=null&&l.isCollapsed))return;o=l.isCollapsed||!1;const u=[],d=l.rangeCount||0;for(let f=0;f<d;f++){const h=l.getRangeAt(f),{startContainer:_,startOffset:p,endContainer:g,endOffset:y}=h;q(_,r,s,i,!0)||q(g,r,s,i,!0)||u.push({start:n.getId(_),startOffset:p,end:n.getId(g),endOffset:y})}a({ranges:u})});return c(),j("selectionchange",c)}function cu({doc:t,customElementCb:e}){const n=t.defaultView;return!n||!n.customElements?()=>{}:re(n.customElements,"define",function(s){return function(i,a,o){try{e({define:{name:i}})}catch{}return s.apply(this,[i,a,o])}})}function lu(t,e){const{mutationCb:n,mousemoveCb:r,mouseInteractionCb:s,scrollCb:i,viewportResizeCb:a,inputCb:o,mediaInteractionCb:c,styleSheetRuleCb:l,styleDeclarationCb:u,canvasMutationCb:d,fontCb:f,selectionCb:h,customElementCb:_}=t;t.mutationCb=(...p)=>{e.mutation&&e.mutation(...p),n(...p)},t.mousemoveCb=(...p)=>{e.mousemove&&e.mousemove(...p),r(...p)},t.mouseInteractionCb=(...p)=>{e.mouseInteraction&&e.mouseInteraction(...p),s(...p)},t.scrollCb=(...p)=>{e.scroll&&e.scroll(...p),i(...p)},t.viewportResizeCb=(...p)=>{e.viewportResize&&e.viewportResize(...p),a(...p)},t.inputCb=(...p)=>{e.input&&e.input(...p),o(...p)},t.mediaInteractionCb=(...p)=>{e.mediaInteaction&&e.mediaInteaction(...p),c(...p)},t.styleSheetRuleCb=(...p)=>{e.styleSheetRule&&e.styleSheetRule(...p),l(...p)},t.styleDeclarationCb=(...p)=>{e.styleDeclaration&&e.styleDeclaration(...p),u(...p)},t.canvasMutationCb=(...p)=>{e.canvasMutation&&e.canvasMutation(...p),d(...p)},t.fontCb=(...p)=>{e.font&&e.font(...p),f(...p)},t.selectionCb=(...p)=>{e.selection&&e.selection(...p),h(...p)},t.customElementCb=(...p)=>{e.customElement&&e.customElement(...p),_(...p)}}function uu(t,e={}){const n=t.doc.defaultView;if(!n)return()=>{};lu(t,e);const r=ui(t,t.doc),s=Xl(t),i=Ql(t),a=di(t),o=tu(t,{win:n}),c=nu(t),l=iu(t),u=ru(t,{win:n}),d=fi(t,t.doc),f=su(t,{win:n}),h=t.collectFonts?au(t):()=>{},_=ou(t),p=cu(t),g=[];for(const y of t.plugins)g.push(y.observer(y.callback,n,y.options));return x(()=>{At.forEach(y=>y.reset()),r.disconnect(),s(),i(),a(),o(),c(),l(),u(),d(),f(),h(),_(),p(),g.forEach(y=>y())})}function De(t){return typeof window[t]<"u"}function Me(t){return!!(typeof window[t]<"u"&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}class Mn{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,n,r,s){const i=r||this.getIdToRemoteIdMap(e),a=s||this.getRemoteIdToIdMap(e);let o=i.get(n);return o||(o=this.generateIdFn(),i.set(n,o),a.set(o,n)),o}getIds(e,n){const r=this.getIdToRemoteIdMap(e),s=this.getRemoteIdToIdMap(e);return n.map(i=>this.getId(e,i,r,s))}getRemoteId(e,n,r){const s=r||this.getRemoteIdToIdMap(e);if(typeof n!="number")return n;const i=s.get(n);return i||-1}getRemoteIds(e,n){const r=this.getRemoteIdToIdMap(e);return n.map(s=>this.getRemoteId(e,s,r))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let n=this.iframeIdToRemoteIdMap.get(e);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(e,n)),n}getRemoteIdToIdMap(e){let n=this.iframeRemoteIdToIdMap.get(e);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(e,n)),n}}class du{constructor(){this.crossOriginIframeMirror=new Mn(nr),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class fu{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Mn(nr),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Mn(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,n){var r;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(r=this.loadListener)===null||r===void 0||r.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const n=e;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!e.source)return;const s=this.crossOriginIframeMap.get(e.source);if(!s)return;const i=this.transformCrossOriginEvent(s,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(e,n){var r;switch(n.type){case R.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(n.data.node,e);const s=n.data.node.id;return this.crossOriginIframeRootIdMap.set(e,s),this.patchRootIdOnNode(n.data.node,s),{timestamp:n.timestamp,type:R.IncrementalSnapshot,data:{source:D.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case R.Meta:case R.Load:case R.DomContentLoaded:return!1;case R.Plugin:return n;case R.Custom:return this.replaceIds(n.data.payload,e,["id","parentId","previousId","nextId"]),n;case R.IncrementalSnapshot:switch(n.data.source){case D.Mutation:return n.data.adds.forEach(s=>{this.replaceIds(s,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(s.node,e);const i=this.crossOriginIframeRootIdMap.get(e);i&&this.patchRootIdOnNode(s.node,i)}),n.data.removes.forEach(s=>{this.replaceIds(s,e,["parentId","id"])}),n.data.attributes.forEach(s=>{this.replaceIds(s,e,["id"])}),n.data.texts.forEach(s=>{this.replaceIds(s,e,["id"])}),n;case D.Drag:case D.TouchMove:case D.MouseMove:return n.data.positions.forEach(s=>{this.replaceIds(s,e,["id"])}),n;case D.ViewportResize:return!1;case D.MediaInteraction:case D.MouseInteraction:case D.Scroll:case D.CanvasMutation:case D.Input:return this.replaceIds(n.data,e,["id"]),n;case D.StyleSheetRule:case D.StyleDeclaration:return this.replaceIds(n.data,e,["id"]),this.replaceStyleIds(n.data,e,["styleId"]),n;case D.Font:return n;case D.Selection:return n.data.ranges.forEach(s=>{this.replaceIds(s,e,["start","end"])}),n;case D.AdoptedStyleSheet:return this.replaceIds(n.data,e,["id"]),this.replaceStyleIds(n.data,e,["styleIds"]),(r=n.data.styles)===null||r===void 0||r.forEach(s=>{this.replaceStyleIds(s,e,["styleId"])}),n}}return!1}replace(e,n,r,s){for(const i of s)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=e.getIds(r,n[i]):n[i]=e.getId(r,n[i]));return n}replaceIds(e,n,r){return this.replace(this.crossOriginIframeMirror,e,n,r)}replaceStyleIds(e,n,r){return this.replace(this.crossOriginIframeStyleMirror,e,n,r)}replaceIdOnNode(e,n){this.replaceIds(e,n,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(e,n){e.type!==H.Document&&!e.rootId&&(e.rootId=n),"childNodes"in e&&e.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class hu{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class pu{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,n){if(!ce(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e);const r=ui(Object.assign(Object.assign({},this.bypassOptions),{doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(di(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(fi({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){!e.contentWindow||!e.contentDocument||this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,n){const r=this;this.restoreHandlers.push(re(e.prototype,"attachShadow",function(s){return function(i){const a=s.call(this,i);return this.shadowRoot&&oi(this)&&r.addShadowRoot(this.shadowRoot,n),a}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function _u(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function mu(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function o(u){try{l(r.next(u))}catch(d){a(d)}}function c(u){try{l(r.throw(u))}catch(d){a(d)}}function l(u){u.done?i(u.value):s(u.value).then(o,c)}l((r=r.apply(t,e||[])).next())})}var Pt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Oe=0;Oe<Pt.length;Oe++)gu[Pt.charCodeAt(Oe)]=Oe;var yu=function(t){var e=new Uint8Array(t),n,r=e.length,s="";for(n=0;n<r;n+=3)s+=Pt[e[n]>>2],s+=Pt[(e[n]&3)<<4|e[n+1]>>4],s+=Pt[(e[n+1]&15)<<2|e[n+2]>>6],s+=Pt[e[n+2]&63];return r%3===2?s=s.substring(0,s.length-1)+"=":r%3===1&&(s=s.substring(0,s.length-2)+"=="),s};const Qr=new Map;function bu(t,e){let n=Qr.get(t);return n||(n=new Map,Qr.set(t,n)),n.has(e)||n.set(e,[]),n.get(e)}const hi=(t,e,n)=>{if(!t||!(_i(t,e)||typeof t=="object"))return;const r=t.constructor.name,s=bu(n,r);let i=s.indexOf(t);return i===-1&&(i=s.length,s.push(t)),i};function Le(t,e,n){if(t instanceof Array)return t.map(r=>Le(r,e,n));if(t===null)return t;if(t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray)return{rr_type:t.constructor.name,args:[Object.values(t)]};if(t instanceof ArrayBuffer){const r=t.constructor.name,s=yu(t);return{rr_type:r,base64:s}}else{if(t instanceof DataView)return{rr_type:t.constructor.name,args:[Le(t.buffer,e,n),t.byteOffset,t.byteLength]};if(t instanceof HTMLImageElement){const r=t.constructor.name,{src:s}=t;return{rr_type:r,src:s}}else if(t instanceof HTMLCanvasElement){const r="HTMLImageElement",s=t.toDataURL();return{rr_type:r,src:s}}else{if(t instanceof ImageData)return{rr_type:t.constructor.name,args:[Le(t.data,e,n),t.width,t.height]};if(_i(t,e)||typeof t=="object"){const r=t.constructor.name,s=hi(t,e,n);return{rr_type:r,index:s}}}}return t}const pi=(t,e,n)=>[...t].map(r=>Le(r,e,n)),_i=(t,e)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(s=>typeof e[s]=="function").find(s=>t instanceof e[s]);function Eu(t,e,n,r,s){const i=[],a=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype);for(const o of a)try{if(typeof e.CanvasRenderingContext2D.prototype[o]!="function")continue;const c=re(e.CanvasRenderingContext2D.prototype,o,function(l){return function(...u){return q(this.canvas,n,r,s,!0)||setTimeout(()=>{const d=pi([...u],e,this);t(this.canvas,{type:qt["2D"],property:o,args:d})},0),l.apply(this,u)}});i.push(c)}catch{const l=sn(e.CanvasRenderingContext2D.prototype,o,{set(u){t(this.canvas,{type:qt["2D"],property:o,args:[u],setter:!0})}});i.push(l)}return()=>{i.forEach(o=>o())}}function Su(t){return t==="experimental-webgl"?"webgl":t}function ts(t,e,n,r,s){const i=[];try{const a=re(t.HTMLCanvasElement.prototype,"getContext",function(o){return function(c,...l){if(!q(this,e,n,r,!0)){const u=Su(c);if("__context"in this||(this.__context=u),s&&["webgl","webgl2"].includes(u))if(l[0]&&typeof l[0]=="object"){const d=l[0];d.preserveDrawingBuffer||(d.preserveDrawingBuffer=!0)}else l.splice(0,1,{preserveDrawingBuffer:!0})}return o.apply(this,[c,...l])}});i.push(a)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(a=>a())}}function es(t,e,n,r,s,i,a,o){const c=[],l=Object.getOwnPropertyNames(t);for(const u of l)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(u))try{if(typeof t[u]!="function")continue;const d=re(t,u,function(f){return function(...h){const _=f.apply(this,h);if(hi(_,o,this),"tagName"in this.canvas&&!q(this.canvas,r,s,i,!0)){const p=pi([...h],o,this),g={type:e,property:u,args:p};n(this.canvas,g)}return _}});c.push(d)}catch{const f=sn(t,u,{set(h){n(this.canvas,{type:e,property:u,args:[h],setter:!0})}});c.push(f)}return c}function wu(t,e,n,r,s,i){const a=[];return a.push(...es(e.WebGLRenderingContext.prototype,qt.WebGL,t,n,r,s,i,e)),typeof e.WebGL2RenderingContext<"u"&&a.push(...es(e.WebGL2RenderingContext.prototype,qt.WebGL2,t,n,r,s,i,e)),()=>{a.forEach(o=>o())}}function Iu(t,e){var n=atob(t);if(e){for(var r=new Uint8Array(n.length),s=0,i=n.length;s<i;++s)r[s]=n.charCodeAt(s);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return n}function vu(t,e,n){var r=e===void 0?null:e,s=n===void 0?!1:n,i=Iu(t,s),a=i.indexOf(`
`,10)+1,o=i.substring(a)+(r?"//# sourceMappingURL="+r:""),c=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(c)}function Cu(t,e,n){var r;return function(i){return r=r||vu(t,e,n),new Worker(r,i)}}var ku=Cu("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=",null,!1);class Ru{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}}class Au{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(l,u)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(l)||this.pendingCanvasMutations.set(l,[]),this.pendingCanvasMutations.get(l).push(u)};const{sampling:n="all",win:r,blockClass:s,blockSelector:i,unblockSelector:a,recordCanvas:o,dataURLOptions:c}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,o&&n==="all"&&this.initCanvasMutationObserver(r,s,i,a),o&&typeof n=="number"&&this.initCanvasFPSObserver(n,r,s,i,a,{dataURLOptions:c})}initCanvasFPSObserver(e,n,r,s,i,a){const o=ts(n,r,s,i,!0),c=new Map,l=new ku;l.onmessage=p=>{const{id:g}=p.data;if(c.set(g,!1),!("base64"in p.data))return;const{base64:y,type:I,width:T,height:A}=p.data;this.mutationCb({id:g,type:qt["2D"],commands:[{property:"clearRect",args:[0,0,T,A]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:y}],type:I}]},0,0]}]})};const u=1e3/e;let d=0,f;const h=()=>{const p=[];return n.document.querySelectorAll("canvas").forEach(g=>{q(g,r,s,i,!0)||p.push(g)}),p},_=p=>{if(d&&p-d<u){f=requestAnimationFrame(_);return}d=p,h().forEach(g=>mu(this,void 0,void 0,function*(){var y;const I=this.mirror.getId(g);if(c.get(I))return;if(c.set(I,!0),["webgl","webgl2"].includes(g.__context)){const A=g.getContext(g.__context);((y=A==null?void 0:A.getContextAttributes())===null||y===void 0?void 0:y.preserveDrawingBuffer)===!1&&A.clear(A.COLOR_BUFFER_BIT)}const T=yield createImageBitmap(g);l.postMessage({id:I,bitmap:T,width:g.width,height:g.height,dataURLOptions:a.dataURLOptions},[T])})),f=requestAnimationFrame(_)};f=requestAnimationFrame(_),this.resetObservers=()=>{o(),cancelAnimationFrame(f)}}initCanvasMutationObserver(e,n,r,s){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const i=ts(e,n,r,s,!1),a=Eu(this.processMutation.bind(this),e,n,r,s),o=wu(this.processMutation.bind(this),e,n,r,s,this.mirror);this.resetObservers=()=>{i(),a(),o()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const e=n=>{this.rafStamps.latestId=n,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,n)=>{const r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,n){if(this.frozen||this.locked)return;const r=this.pendingCanvasMutations.get(e);if(!r||n===-1)return;const s=r.map(a=>_u(a,["type"])),{type:i}=r[0];this.mutationCb({id:n,type:i,commands:s}),this.pendingCanvasMutations.delete(e)}}class Tu{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new Zl,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,n){if(e.length===0)return;const r={id:n,styleIds:[]},s=[];for(const i of e){let a;this.styleMirror.has(i)?a=this.styleMirror.getId(i):(a=this.styleMirror.add(i),s.push({styleId:a,rules:Array.from(i.rules||CSSRule,(o,c)=>({rule:qs(o),index:c}))})),r.styleIds.push(a)}s.length>0&&(r.styles=s),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class xu{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(e,n){const r=this.nodeMap.get(e);return r&&Array.from(r).some(s=>s!==n)}add(e,n){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(n))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function W(t){return Object.assign(Object.assign({},t),{timestamp:$e()})}let z,Fe,gn,je=!1;const at=bl();function lt(t={}){const{emit:e,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:s="rr-block",blockSelector:i=null,unblockSelector:a=null,ignoreClass:o="rr-ignore",ignoreSelector:c=null,maskAllText:l=!1,maskTextClass:u="rr-mask",unmaskTextClass:d=null,maskTextSelector:f=null,unmaskTextSelector:h=null,inlineStylesheet:_=!0,maskAllInputs:p,maskInputOptions:g,slimDOMOptions:y,maskAttributeFn:I,maskInputFn:T,maskTextFn:A,hooks:P,packFn:v,sampling:E={},dataURLOptions:N={},mousemoveWait:G,recordCanvas:b=!1,recordCrossOriginIframes:k=!1,recordAfter:B=t.recordAfter==="DOMContentLoaded"?t.recordAfter:"load",userTriggeredOnInput:Z=!1,collectFonts:V=!1,inlineImages:X=!1,plugins:O,keepIframeSrcFn:tt=()=>!1,ignoreCSSAttributes:Y=new Set([]),errorHandler:et,onMutation:nt}=t;ql(et);const wt=k?window.parent===window:!0;let It=!1;if(!wt)try{window.parent.document&&(It=!1)}catch{It=!0}if(wt&&!e)throw new Error("emit function is required");G!==void 0&&E.mousemove===void 0&&(E.mousemove=G),at.reset();const se=p===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:g!==void 0?g:{},ln=y===!0||y==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:y==="all",headMetaDescKeywords:y==="all"}:y||{};Hl();let gr,un=0;const yr=C=>{for(const it of O||[])it.eventProcessor&&(C=it.eventProcessor(C));return v&&!It&&(C=v(C)),C};z=(C,it)=>{var F;if(!((F=At[0])===null||F===void 0)&&F.isFrozen()&&C.type!==R.FullSnapshot&&!(C.type===R.IncrementalSnapshot&&C.data.source===D.Mutation)&&At.forEach(K=>K.unfreeze()),wt)e==null||e(yr(C),it);else if(It){const K={type:"rrweb",event:yr(C),origin:window.location.origin,isCheckout:it};window.parent.postMessage(K,"*")}if(C.type===R.FullSnapshot)gr=C,un=0;else if(C.type===R.IncrementalSnapshot){if(C.data.source===D.Mutation&&C.data.isAttachIframe)return;un++;const K=r&&un>=r,kt=n&&C.timestamp-gr.timestamp>n;(K||kt)&&Fe(!0)}};const Re=C=>{z(W({type:R.IncrementalSnapshot,data:Object.assign({source:D.Mutation},C)}))},br=C=>z(W({type:R.IncrementalSnapshot,data:Object.assign({source:D.Scroll},C)})),Er=C=>z(W({type:R.IncrementalSnapshot,data:Object.assign({source:D.CanvasMutation},C)})),na=C=>z(W({type:R.IncrementalSnapshot,data:Object.assign({source:D.AdoptedStyleSheet},C)})),vt=new Tu({mutationCb:Re,adoptedStyleSheetCb:na}),Ct=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new du:new fu({mirror:at,mutationCb:Re,stylesheetManager:vt,recordCrossOriginIframes:k,wrappedEmit:z});for(const C of O||[])C.getMirror&&C.getMirror({nodeMirror:at,crossOriginIframeMirror:Ct.crossOriginIframeMirror,crossOriginIframeStyleMirror:Ct.crossOriginIframeStyleMirror});const dn=new xu;gn=typeof __RRWEB_EXCLUDE_CANVAS__=="boolean"&&__RRWEB_EXCLUDE_CANVAS__?new Ru:new Au({recordCanvas:b,mutationCb:Er,win:window,blockClass:s,blockSelector:i,unblockSelector:a,mirror:at,sampling:E.canvas,dataURLOptions:N});const Ae=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new hu:new pu({mutationCb:Re,scrollCb:br,bypassOptions:{onMutation:nt,blockClass:s,blockSelector:i,unblockSelector:a,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:h,inlineStylesheet:_,maskInputOptions:se,dataURLOptions:N,maskAttributeFn:I,maskTextFn:A,maskInputFn:T,recordCanvas:b,inlineImages:X,sampling:E,slimDOMOptions:ln,iframeManager:Ct,stylesheetManager:vt,canvasManager:gn,keepIframeSrcFn:tt,processedNodeManager:dn},mirror:at});Fe=(C=!1)=>{z(W({type:R.Meta,data:{href:window.location.href,width:ni(),height:ei()}}),C),vt.reset(),Ae.init(),At.forEach(F=>F.lock());const it=Yl(document,{mirror:at,blockClass:s,blockSelector:i,unblockSelector:a,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:h,inlineStylesheet:_,maskAllInputs:se,maskAttributeFn:I,maskInputFn:T,maskTextFn:A,slimDOM:ln,dataURLOptions:N,recordCanvas:b,inlineImages:X,onSerialize:F=>{si(F,at)&&Ct.addIframe(F),ii(F,at)&&vt.trackLinkElement(F),Nn(F)&&Ae.addShadowRoot(F.shadowRoot,document)},onIframeLoad:(F,K)=>{Ct.attachIframe(F,K),Ae.observeAttachShadow(F)},onStylesheetLoad:(F,K)=>{vt.attachLinkElement(F,K)},keepIframeSrcFn:tt});if(!it)return console.warn("Failed to snapshot the document");z(W({type:R.FullSnapshot,data:{node:it,initialOffset:ti(window)}}),C),At.forEach(F=>F.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&vt.adoptStyleSheets(document.adoptedStyleSheets,at.getId(document))};try{const C=[],it=K=>{var kt;return x(uu)({onMutation:nt,mutationCb:Re,mousemoveCb:(L,fn)=>z(W({type:R.IncrementalSnapshot,data:{source:fn,positions:L}})),mouseInteractionCb:L=>z(W({type:R.IncrementalSnapshot,data:Object.assign({source:D.MouseInteraction},L)})),scrollCb:br,viewportResizeCb:L=>z(W({type:R.IncrementalSnapshot,data:Object.assign({source:D.ViewportResize},L)})),inputCb:L=>z(W({type:R.IncrementalSnapshot,data:Object.assign({source:D.Input},L)})),mediaInteractionCb:L=>z(W({type:R.IncrementalSnapshot,data:Object.assign({source:D.MediaInteraction},L)})),styleSheetRuleCb:L=>z(W({type:R.IncrementalSnapshot,data:Object.assign({source:D.StyleSheetRule},L)})),styleDeclarationCb:L=>z(W({type:R.IncrementalSnapshot,data:Object.assign({source:D.StyleDeclaration},L)})),canvasMutationCb:Er,fontCb:L=>z(W({type:R.IncrementalSnapshot,data:Object.assign({source:D.Font},L)})),selectionCb:L=>{z(W({type:R.IncrementalSnapshot,data:Object.assign({source:D.Selection},L)}))},customElementCb:L=>{z(W({type:R.IncrementalSnapshot,data:Object.assign({source:D.CustomElement},L)}))},blockClass:s,ignoreClass:o,ignoreSelector:c,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:h,maskInputOptions:se,inlineStylesheet:_,sampling:E,recordCanvas:b,inlineImages:X,userTriggeredOnInput:Z,collectFonts:V,doc:K,maskAttributeFn:I,maskInputFn:T,maskTextFn:A,keepIframeSrcFn:tt,blockSelector:i,unblockSelector:a,slimDOMOptions:ln,dataURLOptions:N,mirror:at,iframeManager:Ct,stylesheetManager:vt,shadowDomManager:Ae,processedNodeManager:dn,canvasManager:gn,ignoreCSSAttributes:Y,plugins:((kt=O==null?void 0:O.filter(L=>L.observer))===null||kt===void 0?void 0:kt.map(L=>({observer:L.observer,options:L.options,callback:fn=>z(W({type:R.Plugin,data:{plugin:L.name,payload:fn}}))})))||[]},P)};Ct.addLoadListener(K=>{try{C.push(it(K.contentDocument))}catch(kt){console.warn(kt)}});const F=()=>{Fe(),C.push(it(document)),je=!0};return document.readyState==="interactive"||document.readyState==="complete"?F():(C.push(j("DOMContentLoaded",()=>{z(W({type:R.DomContentLoaded,data:{}})),B==="DOMContentLoaded"&&F()})),C.push(j("load",()=>{z(W({type:R.Load,data:{}})),B==="load"&&F()},window))),()=>{C.forEach(K=>K()),dn.destroy(),je=!1,Jl()}}catch(C){console.warn(C)}}lt.addCustomEvent=(t,e)=>{if(!je)throw new Error("please add custom event after start recording");z(W({type:R.Custom,data:{tag:t,payload:e}}))};lt.freezePage=()=>{At.forEach(t=>t.freeze())};lt.takeFullSnapshot=t=>{if(!je)throw new Error("please take full snapshot after start recording");Fe(t)};lt.mirror=at;function sr(t){return t>9999999999?t:t*1e3}function Nu(t){return t>9999999999?t/1e3:t}function an(t,e){e.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(e.category)?t.triggerUserActivity():t.checkAndHandleExpiredSession(),t.addUpdate(()=>(t.throttledAddEvent({type:R.Custom,timestamp:(e.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:ot(e,10,1e3)}}),e.category==="console")))}const Du="button,a";function ir(t){const e=mi(t);return!e||!(e instanceof Element)?e:e.closest(Du)||e}function mi(t){return Mu(t)?t.target:t}function Mu(t){return typeof t=="object"&&!!t&&"target"in t}let _t;function Ou(t){return _t||(_t=[],Bu()),_t.push(t),()=>{const e=_t?_t.indexOf(t):-1;e>-1&&_t.splice(e,1)}}function Bu(){yt(M,"open",function(t){return function(...e){if(_t)try{_t.forEach(n=>n())}catch{}return t.apply(M,e)}})}function Uu(t,e,n){t.handleClick(e,n)}class Lu{constructor(e,n,r=an){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scollTimeout=n.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const e=()=>{this._lastMutation=Be()},n=()=>{this._lastScroll=Be()},r=Ou(()=>{this._lastMutation=Be()}),s=a=>{if(!a.target)return;const o=ir(a);o&&this._handleMultiClick(o)},i=new MutationObserver(e);i.observe(M.document.documentElement,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),M.addEventListener("scroll",n,{passive:!0}),M.addEventListener("click",s,{passive:!0}),this._teardown=()=>{M.removeEventListener("scroll",n),M.removeEventListener("click",s),r(),i.disconnect(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,n){if(zu(n,this._ignoreSelector)||!Pu(e))return;const r={timestamp:Nu(e.timestamp),clickBreadcrumb:e,clickCount:0,node:n};this._clicks.some(s=>s.node===r.node&&Math.abs(s.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}_handleMultiClick(e){this._getClicks(e).forEach(n=>{n.clickCount++})}_getClicks(e){return this._clicks.filter(n=>n.node===e)}_checkClicks(){const e=[],n=Be();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&e.push(r)});for(const r of e){const s=this._clicks.indexOf(r);s>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const n=this._replay,r=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,s=e.mutationAfter&&e.mutationAfter<=this._threshold,i=!r&&!s,{clickCount:a,clickBreadcrumb:o}=e;if(i){const c=Math.min(e.mutationAfter||this._timeout,this._timeout)*1e3,l=c<this._timeout*1e3?"mutation":"timeout",u={type:"default",message:o.message,timestamp:o.timestamp,category:"ui.slowClickDetected",data:{...o.data,url:M.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:l,clickCount:a||1}};this._addBreadcrumbEvent(n,u);return}if(a>1){const c={type:"default",message:o.message,timestamp:o.timestamp,category:"ui.multiClick",data:{...o.data,url:M.location.href,route:n.getCurrentRoute(),clickCount:a,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout(()=>this._checkClicks(),1e3)}}const Fu=["A","BUTTON","INPUT"];function zu(t,e){return!!(!Fu.includes(t.tagName)||t.tagName==="INPUT"&&!["submit","button"].includes(t.getAttribute("type")||"")||t.tagName==="A"&&(t.hasAttribute("download")||t.hasAttribute("target")&&t.getAttribute("target")!=="_self")||e&&t.matches(e))}function Pu(t){return!!(t.data&&typeof t.data.nodeId=="number"&&t.timestamp)}function Be(){return Date.now()/1e3}function ft(t){return{timestamp:Date.now()/1e3,type:"default",...t}}var qe;(function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"})(qe||(qe={}));const Gu=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled"]);function Yu(t){const e={};for(const n in t)if(Gu.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),e[r]=t[n]}return e}const Wu=t=>e=>{if(!t.isEnabled())return;const n=Hu(e);if(!n)return;const r=e.name==="click",s=r&&e.event;r&&t.clickDetector&&s&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&Uu(t.clickDetector,n,ir(e.event)),an(t,n)};function gi(t,e){const n=lt.mirror.getId(t),r=n&&lt.mirror.getNode(n),s=r&&lt.mirror.getMeta(r),i=s&&Vu(s)?s:null;return{message:e,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(a=>a.type===qe.Text&&a.textContent).filter(Boolean).map(a=>a.trim()).join(""),attributes:Yu(i.attributes)}}:{}}}function Hu(t){const{target:e,message:n}=Zu(t);return ft({category:`ui.${t.name}`,...gi(e,n)})}function Zu(t){const e=t.name==="click";let n,r=null;try{r=e?ir(t.event):mi(t.event),n=Ge(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function Vu(t){return t.type===qe.Element}function $u(t,e){if(!t.isEnabled())return;t.updateUserActivity();const n=Ku(e);n&&an(t,n)}function Ku(t){const{metaKey:e,shiftKey:n,ctrlKey:r,altKey:s,key:i,target:a}=t;if(!a||ju(a)||!i)return null;const o=e||r||s,c=i.length===1;if(!o&&c)return null;const l=Ge(a,{maxStringLength:200})||"<unknown>",u=gi(a,l);return ft({category:"ui.keyDown",message:l,data:{...u.data,metaKey:e,shiftKey:n,ctrlKey:r,altKey:s,key:i}})}function ju(t){return t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable}const ns={resource:td,paint:Xu,navigation:Qu};function qu(t){return t.map(Ju).filter(Boolean)}function Ju(t){return ns[t.entryType]?ns[t.entryType](t):null}function Jt(t){return((wn||M.performance.timeOrigin)+t)/1e3}function Xu(t){const{duration:e,entryType:n,name:r,startTime:s}=t,i=Jt(s);return{type:n,name:r,start:i,end:i+e,data:void 0}}function Qu(t){const{entryType:e,name:n,decodedBodySize:r,duration:s,domComplete:i,encodedBodySize:a,domContentLoadedEventStart:o,domContentLoadedEventEnd:c,domInteractive:l,loadEventStart:u,loadEventEnd:d,redirectCount:f,startTime:h,transferSize:_,type:p}=t;return s===0?null:{type:`${e}.${p}`,start:Jt(h),end:Jt(i),name:n,data:{size:_,decodedBodySize:r,encodedBodySize:a,duration:s,domInteractive:l,domContentLoadedEventStart:o,domContentLoadedEventEnd:c,loadEventStart:u,loadEventEnd:d,domComplete:i,redirectCount:f}}}function td(t){const{entryType:e,initiatorType:n,name:r,responseEnd:s,startTime:i,decodedBodySize:a,encodedBodySize:o,responseStatus:c,transferSize:l}=t;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${e}.${n}`,start:Jt(i),end:Jt(s),name:r,data:{size:l,statusCode:c,decodedBodySize:a,encodedBodySize:o}}}function ed(t){const e=t.entries,n=e[e.length-1],r=n?n.element:void 0,s=t.value,i=Jt(s);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:i,end:i,data:{value:s,size:s,nodeId:r?lt.mirror.getId(r):void 0}}}function nd(t){function e(s){t.performanceEntries.includes(s)||t.performanceEntries.push(s)}function n({entries:s}){s.forEach(e)}const r=[];return["navigation","paint","resource"].forEach(s=>{r.push(Ca(s,n))}),r.push(ka(({metric:s})=>{t.replayPerformanceEntries.push(ed(s))})),()=>{r.forEach(s=>s())}}const rd=`/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */
function t(t){let e=t.length;for(;--e>=0;)t[e]=0}const e=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),a=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),n=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Array(576);t(s);const r=new Array(60);t(r);const o=new Array(512);t(o);const l=new Array(256);t(l);const h=new Array(29);t(h);const d=new Array(30);function _(t,e,a,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}let f,c,u;function w(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}t(d);const m=t=>t<256?o[t]:o[256+(t>>>7)],b=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},g=(t,e,a)=>{t.bi_valid>16-a?(t.bi_buf|=e<<t.bi_valid&65535,b(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=a-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)},p=(t,e,a)=>{g(t,a[2*e],a[2*e+1])},k=(t,e)=>{let a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1},v=(t,e,a)=>{const i=new Array(16);let n,s,r=0;for(n=1;n<=15;n++)r=r+a[n-1]<<1,i[n]=r;for(s=0;s<=e;s++){let e=t[2*s+1];0!==e&&(t[2*s]=k(i[e]++,e))}},y=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},x=t=>{t.bi_valid>8?b(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},z=(t,e,a,i)=>{const n=2*e,s=2*a;return t[n]<t[s]||t[n]===t[s]&&i[e]<=i[a]},A=(t,e,a)=>{const i=t.heap[a];let n=a<<1;for(;n<=t.heap_len&&(n<t.heap_len&&z(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!z(e,i,t.heap[n],t.depth));)t.heap[a]=t.heap[n],a=n,n<<=1;t.heap[a]=i},E=(t,i,n)=>{let s,r,o,_,f=0;if(0!==t.sym_next)do{s=255&t.pending_buf[t.sym_buf+f++],s+=(255&t.pending_buf[t.sym_buf+f++])<<8,r=t.pending_buf[t.sym_buf+f++],0===s?p(t,r,i):(o=l[r],p(t,o+256+1,i),_=e[o],0!==_&&(r-=h[o],g(t,r,_)),s--,o=m(s),p(t,o,n),_=a[o],0!==_&&(s-=d[o],g(t,s,_)))}while(f<t.sym_next);p(t,256,i)},R=(t,e)=>{const a=e.dyn_tree,i=e.stat_desc.static_tree,n=e.stat_desc.has_stree,s=e.stat_desc.elems;let r,o,l,h=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<s;r++)0!==a[2*r]?(t.heap[++t.heap_len]=h=r,t.depth[r]=0):a[2*r+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=h<2?++h:0,a[2*l]=1,t.depth[l]=0,t.opt_len--,n&&(t.static_len-=i[2*l+1]);for(e.max_code=h,r=t.heap_len>>1;r>=1;r--)A(t,a,r);l=s;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],A(t,a,1),o=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=o,a[2*l]=a[2*r]+a[2*o],t.depth[l]=(t.depth[r]>=t.depth[o]?t.depth[r]:t.depth[o])+1,a[2*r+1]=a[2*o+1]=l,t.heap[1]=l++,A(t,a,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const a=e.dyn_tree,i=e.max_code,n=e.stat_desc.static_tree,s=e.stat_desc.has_stree,r=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length;let h,d,_,f,c,u,w=0;for(f=0;f<=15;f++)t.bl_count[f]=0;for(a[2*t.heap[t.heap_max]+1]=0,h=t.heap_max+1;h<573;h++)d=t.heap[h],f=a[2*a[2*d+1]+1]+1,f>l&&(f=l,w++),a[2*d+1]=f,d>i||(t.bl_count[f]++,c=0,d>=o&&(c=r[d-o]),u=a[2*d],t.opt_len+=u*(f+c),s&&(t.static_len+=u*(n[2*d+1]+c)));if(0!==w){do{for(f=l-1;0===t.bl_count[f];)f--;t.bl_count[f]--,t.bl_count[f+1]+=2,t.bl_count[l]--,w-=2}while(w>0);for(f=l;0!==f;f--)for(d=t.bl_count[f];0!==d;)_=t.heap[--h],_>i||(a[2*_+1]!==f&&(t.opt_len+=(f-a[2*_+1])*a[2*_],a[2*_+1]=f),d--)}})(t,e),v(a,h,t.bl_count)},Z=(t,e,a)=>{let i,n,s=-1,r=e[1],o=0,l=7,h=4;for(0===r&&(l=138,h=3),e[2*(a+1)+1]=65535,i=0;i<=a;i++)n=r,r=e[2*(i+1)+1],++o<l&&n===r||(o<h?t.bl_tree[2*n]+=o:0!==n?(n!==s&&t.bl_tree[2*n]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=n,0===r?(l=138,h=3):n===r?(l=6,h=3):(l=7,h=4))},U=(t,e,a)=>{let i,n,s=-1,r=e[1],o=0,l=7,h=4;for(0===r&&(l=138,h=3),i=0;i<=a;i++)if(n=r,r=e[2*(i+1)+1],!(++o<l&&n===r)){if(o<h)do{p(t,n,t.bl_tree)}while(0!=--o);else 0!==n?(n!==s&&(p(t,n,t.bl_tree),o--),p(t,16,t.bl_tree),g(t,o-3,2)):o<=10?(p(t,17,t.bl_tree),g(t,o-3,3)):(p(t,18,t.bl_tree),g(t,o-11,7));o=0,s=n,0===r?(l=138,h=3):n===r?(l=6,h=3):(l=7,h=4)}};let S=!1;const D=(t,e,a,i)=>{g(t,0+(i?1:0),3),x(t),b(t,a),b(t,~a),a&&t.pending_buf.set(t.window.subarray(e,e+a),t.pending),t.pending+=a};var T=(t,e,a,i)=>{let o,l,h=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),R(t,t.l_desc),R(t,t.d_desc),h=(t=>{let e;for(Z(t,t.dyn_ltree,t.l_desc.max_code),Z(t,t.dyn_dtree,t.d_desc.max_code),R(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*n[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),o=t.opt_len+3+7>>>3,l=t.static_len+3+7>>>3,l<=o&&(o=l)):o=l=a+5,a+4<=o&&-1!==e?D(t,e,a,i):4===t.strategy||l===o?(g(t,2+(i?1:0),3),E(t,s,r)):(g(t,4+(i?1:0),3),((t,e,a,i)=>{let s;for(g(t,e-257,5),g(t,a-1,5),g(t,i-4,4),s=0;s<i;s++)g(t,t.bl_tree[2*n[s]+1],3);U(t,t.dyn_ltree,e-1),U(t,t.dyn_dtree,a-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,h+1),E(t,t.dyn_ltree,t.dyn_dtree)),y(t),i&&x(t)},O={_tr_init:t=>{S||((()=>{let t,n,w,m,b;const g=new Array(16);for(w=0,m=0;m<28;m++)for(h[m]=w,t=0;t<1<<e[m];t++)l[w++]=m;for(l[w-1]=m,b=0,m=0;m<16;m++)for(d[m]=b,t=0;t<1<<a[m];t++)o[b++]=m;for(b>>=7;m<30;m++)for(d[m]=b<<7,t=0;t<1<<a[m]-7;t++)o[256+b++]=m;for(n=0;n<=15;n++)g[n]=0;for(t=0;t<=143;)s[2*t+1]=8,t++,g[8]++;for(;t<=255;)s[2*t+1]=9,t++,g[9]++;for(;t<=279;)s[2*t+1]=7,t++,g[7]++;for(;t<=287;)s[2*t+1]=8,t++,g[8]++;for(v(s,287,g),t=0;t<30;t++)r[2*t+1]=5,r[2*t]=k(t,5);f=new _(s,e,257,286,15),c=new _(r,a,0,30,15),u=new _(new Array(0),i,0,19,7)})(),S=!0),t.l_desc=new w(t.dyn_ltree,f),t.d_desc=new w(t.dyn_dtree,c),t.bl_desc=new w(t.bl_tree,u),t.bi_buf=0,t.bi_valid=0,y(t)},_tr_stored_block:D,_tr_flush_block:T,_tr_tally:(t,e,a)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=a,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(l[a]+256+1)]++,t.dyn_dtree[2*m(e)]++),t.sym_next===t.sym_end),_tr_align:t=>{g(t,2,3),p(t,256,s),(t=>{16===t.bi_valid?(b(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}};var F=(t,e,a,i)=>{let n=65535&t|0,s=t>>>16&65535|0,r=0;for(;0!==a;){r=a>2e3?2e3:a,a-=r;do{n=n+e[i++]|0,s=s+n|0}while(--r);n%=65521,s%=65521}return n|s<<16|0};const L=new Uint32Array((()=>{let t,e=[];for(var a=0;a<256;a++){t=a;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e})());var N=(t,e,a,i)=>{const n=L,s=i+a;t^=-1;for(let a=i;a<s;a++)t=t>>>8^n[255&(t^e[a])];return-1^t},I={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},B={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:C,_tr_stored_block:H,_tr_flush_block:M,_tr_tally:j,_tr_align:K}=O,{Z_NO_FLUSH:P,Z_PARTIAL_FLUSH:Y,Z_FULL_FLUSH:G,Z_FINISH:X,Z_BLOCK:W,Z_OK:q,Z_STREAM_END:J,Z_STREAM_ERROR:Q,Z_DATA_ERROR:V,Z_BUF_ERROR:$,Z_DEFAULT_COMPRESSION:tt,Z_FILTERED:et,Z_HUFFMAN_ONLY:at,Z_RLE:it,Z_FIXED:nt,Z_DEFAULT_STRATEGY:st,Z_UNKNOWN:rt,Z_DEFLATED:ot}=B,lt=(t,e)=>(t.msg=I[e],e),ht=t=>2*t-(t>4?9:0),dt=t=>{let e=t.length;for(;--e>=0;)t[e]=0},_t=t=>{let e,a,i,n=t.w_size;e=t.hash_size,i=e;do{a=t.head[--i],t.head[i]=a>=n?a-n:0}while(--e);e=n,i=e;do{a=t.prev[--i],t.prev[i]=a>=n?a-n:0}while(--e)};let ft=(t,e,a)=>(e<<t.hash_shift^a)&t.hash_mask;const ct=t=>{const e=t.state;let a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+a),t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))},ut=(t,e)=>{M(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,ct(t.strm)},wt=(t,e)=>{t.pending_buf[t.pending++]=e},mt=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},bt=(t,e,a,i)=>{let n=t.avail_in;return n>i&&(n=i),0===n?0:(t.avail_in-=n,e.set(t.input.subarray(t.next_in,t.next_in+n),a),1===t.state.wrap?t.adler=F(t.adler,e,n,a):2===t.state.wrap&&(t.adler=N(t.adler,e,n,a)),t.next_in+=n,t.total_in+=n,n)},gt=(t,e)=>{let a,i,n=t.max_chain_length,s=t.strstart,r=t.prev_length,o=t.nice_match;const l=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,h=t.window,d=t.w_mask,_=t.prev,f=t.strstart+258;let c=h[s+r-1],u=h[s+r];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(a=e,h[a+r]===u&&h[a+r-1]===c&&h[a]===h[s]&&h[++a]===h[s+1]){s+=2,a++;do{}while(h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&h[++s]===h[++a]&&s<f);if(i=258-(f-s),s=f-258,i>r){if(t.match_start=e,r=i,i>=o)break;c=h[s+r-1],u=h[s+r]}}}while((e=_[e&d])>l&&0!=--n);return r<=t.lookahead?r:t.lookahead},pt=t=>{const e=t.w_size;let a,i,n;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-262)&&(t.window.set(t.window.subarray(e,e+e-i),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),_t(t),i+=e),0===t.strm.avail_in)break;if(a=bt(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=a,t.lookahead+t.insert>=3)for(n=t.strstart-t.insert,t.ins_h=t.window[n],t.ins_h=ft(t,t.ins_h,t.window[n+1]);t.insert&&(t.ins_h=ft(t,t.ins_h,t.window[n+3-1]),t.prev[n&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=n,n++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)},kt=(t,e)=>{let a,i,n,s=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,r=0,o=t.strm.avail_in;do{if(a=65535,n=t.bi_valid+42>>3,t.strm.avail_out<n)break;if(n=t.strm.avail_out-n,i=t.strstart-t.block_start,a>i+t.strm.avail_in&&(a=i+t.strm.avail_in),a>n&&(a=n),a<s&&(0===a&&e!==X||e===P||a!==i+t.strm.avail_in))break;r=e===X&&a===i+t.strm.avail_in?1:0,H(t,0,0,r),t.pending_buf[t.pending-4]=a,t.pending_buf[t.pending-3]=a>>8,t.pending_buf[t.pending-2]=~a,t.pending_buf[t.pending-1]=~a>>8,ct(t.strm),i&&(i>a&&(i=a),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+i),t.strm.next_out),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i,t.block_start+=i,a-=i),a&&(bt(t.strm,t.strm.output,t.strm.next_out,a),t.strm.next_out+=a,t.strm.avail_out-=a,t.strm.total_out+=a)}while(0===r);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),r?4:e!==P&&e!==X&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(n=t.window_size-t.strstart,t.strm.avail_in>n&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,n+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),n>t.strm.avail_in&&(n=t.strm.avail_in),n&&(bt(t.strm,t.window,t.strstart,n),t.strstart+=n,t.insert+=n>t.w_size-t.insert?t.w_size-t.insert:n),t.high_water<t.strstart&&(t.high_water=t.strstart),n=t.bi_valid+42>>3,n=t.pending_buf_size-n>65535?65535:t.pending_buf_size-n,s=n>t.w_size?t.w_size:n,i=t.strstart-t.block_start,(i>=s||(i||e===X)&&e!==P&&0===t.strm.avail_in&&i<=n)&&(a=i>n?n:i,r=e===X&&0===t.strm.avail_in&&a===i?1:0,H(t,t.block_start,a,r),t.block_start+=a,ct(t.strm)),r?3:1)},vt=(t,e)=>{let a,i;for(;;){if(t.lookahead<262){if(pt(t),t.lookahead<262&&e===P)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-262&&(t.match_length=gt(t,a)),t.match_length>=3)if(i=j(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=ft(t,t.ins_h,t.window[t.strstart+1]);else i=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2},yt=(t,e)=>{let a,i,n;for(;;){if(t.lookahead<262){if(pt(t),t.lookahead<262&&e===P)return 1;if(0===t.lookahead)break}if(a=0,t.lookahead>=3&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-262&&(t.match_length=gt(t,a),t.match_length<=5&&(t.strategy===et||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-3,i=j(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=n&&(t.ins_h=ft(t,t.ins_h,t.window[t.strstart+3-1]),a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&(ut(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(i=j(t,0,t.window[t.strstart-1]),i&&ut(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=j(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2};function xt(t,e,a,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=i,this.func=n}const zt=[new xt(0,0,0,0,kt),new xt(4,4,8,4,vt),new xt(4,5,16,8,vt),new xt(4,6,32,32,vt),new xt(4,4,16,16,yt),new xt(8,16,32,32,yt),new xt(8,16,128,128,yt),new xt(8,32,128,256,yt),new xt(32,128,258,1024,yt),new xt(32,258,258,4096,yt)];function At(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ot,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),dt(this.dyn_ltree),dt(this.dyn_dtree),dt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),dt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),dt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Et=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||42!==e.status&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&113!==e.status&&666!==e.status?1:0},Rt=t=>{if(Et(t))return lt(t,Q);t.total_in=t.total_out=0,t.data_type=rt;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=-2,C(e),q},Zt=t=>{const e=Rt(t);var a;return e===q&&((a=t.state).window_size=2*a.w_size,dt(a.head),a.max_lazy_match=zt[a.level].max_lazy,a.good_match=zt[a.level].good_length,a.nice_match=zt[a.level].nice_length,a.max_chain_length=zt[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0),e},Ut=(t,e,a,i,n,s)=>{if(!t)return Q;let r=1;if(e===tt&&(e=6),i<0?(r=0,i=-i):i>15&&(r=2,i-=16),n<1||n>9||a!==ot||i<8||i>15||e<0||e>9||s<0||s>nt||8===i&&1!==r)return lt(t,Q);8===i&&(i=9);const o=new At;return t.state=o,o.strm=t,o.status=42,o.wrap=r,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=n+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<n+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=e,o.strategy=s,o.method=a,Zt(t)};var St={deflateInit:(t,e)=>Ut(t,e,ot,15,8,st),deflateInit2:Ut,deflateReset:Zt,deflateResetKeep:Rt,deflateSetHeader:(t,e)=>Et(t)||2!==t.state.wrap?Q:(t.state.gzhead=e,q),deflate:(t,e)=>{if(Et(t)||e>W||e<0)return t?lt(t,Q):Q;const a=t.state;if(!t.output||0!==t.avail_in&&!t.input||666===a.status&&e!==X)return lt(t,0===t.avail_out?$:Q);const i=a.last_flush;if(a.last_flush=e,0!==a.pending){if(ct(t),0===t.avail_out)return a.last_flush=-1,q}else if(0===t.avail_in&&ht(e)<=ht(i)&&e!==X)return lt(t,$);if(666===a.status&&0!==t.avail_in)return lt(t,$);if(42===a.status&&0===a.wrap&&(a.status=113),42===a.status){let e=ot+(a.w_bits-8<<4)<<8,i=-1;if(i=a.strategy>=at||a.level<2?0:a.level<6?1:6===a.level?2:3,e|=i<<6,0!==a.strstart&&(e|=32),e+=31-e%31,mt(a,e),0!==a.strstart&&(mt(a,t.adler>>>16),mt(a,65535&t.adler)),t.adler=1,a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,q}if(57===a.status)if(t.adler=0,wt(a,31),wt(a,139),wt(a,8),a.gzhead)wt(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),wt(a,255&a.gzhead.time),wt(a,a.gzhead.time>>8&255),wt(a,a.gzhead.time>>16&255),wt(a,a.gzhead.time>>24&255),wt(a,9===a.level?2:a.strategy>=at||a.level<2?4:0),wt(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(wt(a,255&a.gzhead.extra.length),wt(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=N(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69;else if(wt(a,0),wt(a,0),wt(a,0),wt(a,0),wt(a,0),wt(a,9===a.level?2:a.strategy>=at||a.level<2?4:0),wt(a,3),a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,q;if(69===a.status){if(a.gzhead.extra){let e=a.pending,i=(65535&a.gzhead.extra.length)-a.gzindex;for(;a.pending+i>a.pending_buf_size;){let n=a.pending_buf_size-a.pending;if(a.pending_buf.set(a.gzhead.extra.subarray(a.gzindex,a.gzindex+n),a.pending),a.pending=a.pending_buf_size,a.gzhead.hcrc&&a.pending>e&&(t.adler=N(t.adler,a.pending_buf,a.pending-e,e)),a.gzindex+=n,ct(t),0!==a.pending)return a.last_flush=-1,q;e=0,i-=n}let n=new Uint8Array(a.gzhead.extra);a.pending_buf.set(n.subarray(a.gzindex,a.gzindex+i),a.pending),a.pending+=i,a.gzhead.hcrc&&a.pending>e&&(t.adler=N(t.adler,a.pending_buf,a.pending-e,e)),a.gzindex=0}a.status=73}if(73===a.status){if(a.gzhead.name){let e,i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i)),ct(t),0!==a.pending)return a.last_flush=-1,q;i=0}e=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,wt(a,e)}while(0!==e);a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i)),a.gzindex=0}a.status=91}if(91===a.status){if(a.gzhead.comment){let e,i=a.pending;do{if(a.pending===a.pending_buf_size){if(a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i)),ct(t),0!==a.pending)return a.last_flush=-1,q;i=0}e=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,wt(a,e)}while(0!==e);a.gzhead.hcrc&&a.pending>i&&(t.adler=N(t.adler,a.pending_buf,a.pending-i,i))}a.status=103}if(103===a.status){if(a.gzhead.hcrc){if(a.pending+2>a.pending_buf_size&&(ct(t),0!==a.pending))return a.last_flush=-1,q;wt(a,255&t.adler),wt(a,t.adler>>8&255),t.adler=0}if(a.status=113,ct(t),0!==a.pending)return a.last_flush=-1,q}if(0!==t.avail_in||0!==a.lookahead||e!==P&&666!==a.status){let i=0===a.level?kt(a,e):a.strategy===at?((t,e)=>{let a;for(;;){if(0===t.lookahead&&(pt(t),0===t.lookahead)){if(e===P)return 1;break}if(t.match_length=0,a=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2})(a,e):a.strategy===it?((t,e)=>{let a,i,n,s;const r=t.window;for(;;){if(t.lookahead<=258){if(pt(t),t.lookahead<=258&&e===P)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=t.strstart-1,i=r[n],i===r[++n]&&i===r[++n]&&i===r[++n])){s=t.strstart+258;do{}while(i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&i===r[++n]&&n<s);t.match_length=258-(s-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(a=j(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=j(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(ut(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===X?(ut(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&(ut(t,!1),0===t.strm.avail_out)?1:2})(a,e):zt[a.level].func(a,e);if(3!==i&&4!==i||(a.status=666),1===i||3===i)return 0===t.avail_out&&(a.last_flush=-1),q;if(2===i&&(e===Y?K(a):e!==W&&(H(a,0,0,!1),e===G&&(dt(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),ct(t),0===t.avail_out))return a.last_flush=-1,q}return e!==X?q:a.wrap<=0?J:(2===a.wrap?(wt(a,255&t.adler),wt(a,t.adler>>8&255),wt(a,t.adler>>16&255),wt(a,t.adler>>24&255),wt(a,255&t.total_in),wt(a,t.total_in>>8&255),wt(a,t.total_in>>16&255),wt(a,t.total_in>>24&255)):(mt(a,t.adler>>>16),mt(a,65535&t.adler)),ct(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?q:J)},deflateEnd:t=>{if(Et(t))return Q;const e=t.state.status;return t.state=null,113===e?lt(t,V):q},deflateSetDictionary:(t,e)=>{let a=e.length;if(Et(t))return Q;const i=t.state,n=i.wrap;if(2===n||1===n&&42!==i.status||i.lookahead)return Q;if(1===n&&(t.adler=F(t.adler,e,a,0)),i.wrap=0,a>=i.w_size){0===n&&(dt(i.head),i.strstart=0,i.block_start=0,i.insert=0);let t=new Uint8Array(i.w_size);t.set(e.subarray(a-i.w_size,a),0),e=t,a=i.w_size}const s=t.avail_in,r=t.next_in,o=t.input;for(t.avail_in=a,t.next_in=0,t.input=e,pt(i);i.lookahead>=3;){let t=i.strstart,e=i.lookahead-2;do{i.ins_h=ft(i,i.ins_h,i.window[t+3-1]),i.prev[t&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=t,t++}while(--e);i.strstart=t,i.lookahead=2,pt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=r,t.input=o,t.avail_in=s,i.wrap=n,q},deflateInfo:"pako deflate (from Nodeca project)"};const Dt=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Tt=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const a=e.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(const e in a)Dt(a,e)&&(t[e]=a[e])}}return t},Ot=t=>{let e=0;for(let a=0,i=t.length;a<i;a++)e+=t[a].length;const a=new Uint8Array(e);for(let e=0,i=0,n=t.length;e<n;e++){let n=t[e];a.set(n,i),i+=n.length}return a};let Ft=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Ft=!1}const Lt=new Uint8Array(256);for(let t=0;t<256;t++)Lt[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Lt[254]=Lt[254]=1;var Nt=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,a,i,n,s,r=t.length,o=0;for(n=0;n<r;n++)a=t.charCodeAt(n),55296==(64512&a)&&n+1<r&&(i=t.charCodeAt(n+1),56320==(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),n++)),o+=a<128?1:a<2048?2:a<65536?3:4;for(e=new Uint8Array(o),s=0,n=0;s<o;n++)a=t.charCodeAt(n),55296==(64512&a)&&n+1<r&&(i=t.charCodeAt(n+1),56320==(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),n++)),a<128?e[s++]=a:a<2048?(e[s++]=192|a>>>6,e[s++]=128|63&a):a<65536?(e[s++]=224|a>>>12,e[s++]=128|a>>>6&63,e[s++]=128|63&a):(e[s++]=240|a>>>18,e[s++]=128|a>>>12&63,e[s++]=128|a>>>6&63,e[s++]=128|63&a);return e},It=(t,e)=>{const a=e||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,e));let i,n;const s=new Array(2*a);for(n=0,i=0;i<a;){let e=t[i++];if(e<128){s[n++]=e;continue}let r=Lt[e];if(r>4)s[n++]=65533,i+=r-1;else{for(e&=2===r?31:3===r?15:7;r>1&&i<a;)e=e<<6|63&t[i++],r--;r>1?s[n++]=65533:e<65536?s[n++]=e:(e-=65536,s[n++]=55296|e>>10&1023,s[n++]=56320|1023&e)}}return((t,e)=>{if(e<65534&&t.subarray&&Ft)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let a="";for(let i=0;i<e;i++)a+=String.fromCharCode(t[i]);return a})(s,n)},Bt=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let a=e-1;for(;a>=0&&128==(192&t[a]);)a--;return a<0||0===a?e:a+Lt[t[a]]>e?a:e};var Ct=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ht=Object.prototype.toString,{Z_NO_FLUSH:Mt,Z_SYNC_FLUSH:jt,Z_FULL_FLUSH:Kt,Z_FINISH:Pt,Z_OK:Yt,Z_STREAM_END:Gt,Z_DEFAULT_COMPRESSION:Xt,Z_DEFAULT_STRATEGY:Wt,Z_DEFLATED:qt}=B;function Jt(t){this.options=Tt({level:Xt,method:qt,chunkSize:16384,windowBits:15,memLevel:8,strategy:Wt},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;let a=St.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==Yt)throw new Error(I[a]);if(e.header&&St.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?Nt(e.dictionary):"[object ArrayBuffer]"===Ht.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,a=St.deflateSetDictionary(this.strm,t),a!==Yt)throw new Error(I[a]);this._dict_set=!0}}function Qt(t,e){const a=new Jt(e);if(a.push(t,!0),a.err)throw a.msg||I[a.err];return a.result}Jt.prototype.push=function(t,e){const a=this.strm,i=this.options.chunkSize;let n,s;if(this.ended)return!1;for(s=e===~~e?e:!0===e?Pt:Mt,"string"==typeof t?a.input=Nt(t):"[object ArrayBuffer]"===Ht.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;)if(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),(s===jt||s===Kt)&&a.avail_out<=6)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else{if(n=St.deflate(a,s),n===Gt)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),n=St.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===Yt;if(0!==a.avail_out){if(s>0&&a.next_out>0)this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;else if(0===a.avail_in)break}else this.onData(a.output)}return!0},Jt.prototype.onData=function(t){this.chunks.push(t)},Jt.prototype.onEnd=function(t){t===Yt&&(this.result=Ot(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};var Vt={Deflate:Jt,deflate:Qt,deflateRaw:function(t,e){return(e=e||{}).raw=!0,Qt(t,e)},gzip:function(t,e){return(e=e||{}).gzip=!0,Qt(t,e)},constants:B};var $t=function(t,e){let a,i,n,s,r,o,l,h,d,_,f,c,u,w,m,b,g,p,k,v,y,x,z,A;const E=t.state;a=t.next_in,z=t.input,i=a+(t.avail_in-5),n=t.next_out,A=t.output,s=n-(e-t.avail_out),r=n+(t.avail_out-257),o=E.dmax,l=E.wsize,h=E.whave,d=E.wnext,_=E.window,f=E.hold,c=E.bits,u=E.lencode,w=E.distcode,m=(1<<E.lenbits)-1,b=(1<<E.distbits)-1;t:do{c<15&&(f+=z[a++]<<c,c+=8,f+=z[a++]<<c,c+=8),g=u[f&m];e:for(;;){if(p=g>>>24,f>>>=p,c-=p,p=g>>>16&255,0===p)A[n++]=65535&g;else{if(!(16&p)){if(0==(64&p)){g=u[(65535&g)+(f&(1<<p)-1)];continue e}if(32&p){E.mode=16191;break t}t.msg="invalid literal/length code",E.mode=16209;break t}k=65535&g,p&=15,p&&(c<p&&(f+=z[a++]<<c,c+=8),k+=f&(1<<p)-1,f>>>=p,c-=p),c<15&&(f+=z[a++]<<c,c+=8,f+=z[a++]<<c,c+=8),g=w[f&b];a:for(;;){if(p=g>>>24,f>>>=p,c-=p,p=g>>>16&255,!(16&p)){if(0==(64&p)){g=w[(65535&g)+(f&(1<<p)-1)];continue a}t.msg="invalid distance code",E.mode=16209;break t}if(v=65535&g,p&=15,c<p&&(f+=z[a++]<<c,c+=8,c<p&&(f+=z[a++]<<c,c+=8)),v+=f&(1<<p)-1,v>o){t.msg="invalid distance too far back",E.mode=16209;break t}if(f>>>=p,c-=p,p=n-s,v>p){if(p=v-p,p>h&&E.sane){t.msg="invalid distance too far back",E.mode=16209;break t}if(y=0,x=_,0===d){if(y+=l-p,p<k){k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}}else if(d<p){if(y+=l+d-p,p-=d,p<k){k-=p;do{A[n++]=_[y++]}while(--p);if(y=0,d<k){p=d,k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}}}else if(y+=d-p,p<k){k-=p;do{A[n++]=_[y++]}while(--p);y=n-v,x=A}for(;k>2;)A[n++]=x[y++],A[n++]=x[y++],A[n++]=x[y++],k-=3;k&&(A[n++]=x[y++],k>1&&(A[n++]=x[y++]))}else{y=n-v;do{A[n++]=A[y++],A[n++]=A[y++],A[n++]=A[y++],k-=3}while(k>2);k&&(A[n++]=A[y++],k>1&&(A[n++]=A[y++]))}break}}break}}while(a<i&&n<r);k=c>>3,a-=k,c-=k<<3,f&=(1<<c)-1,t.next_in=a,t.next_out=n,t.avail_in=a<i?i-a+5:5-(a-i),t.avail_out=n<r?r-n+257:257-(n-r),E.hold=f,E.bits=c};const te=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ee=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ae=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ie=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ne=(t,e,a,i,n,s,r,o)=>{const l=o.bits;let h,d,_,f,c,u,w=0,m=0,b=0,g=0,p=0,k=0,v=0,y=0,x=0,z=0,A=null;const E=new Uint16Array(16),R=new Uint16Array(16);let Z,U,S,D=null;for(w=0;w<=15;w++)E[w]=0;for(m=0;m<i;m++)E[e[a+m]]++;for(p=l,g=15;g>=1&&0===E[g];g--);if(p>g&&(p=g),0===g)return n[s++]=20971520,n[s++]=20971520,o.bits=1,0;for(b=1;b<g&&0===E[b];b++);for(p<b&&(p=b),y=1,w=1;w<=15;w++)if(y<<=1,y-=E[w],y<0)return-1;if(y>0&&(0===t||1!==g))return-1;for(R[1]=0,w=1;w<15;w++)R[w+1]=R[w]+E[w];for(m=0;m<i;m++)0!==e[a+m]&&(r[R[e[a+m]]++]=m);if(0===t?(A=D=r,u=20):1===t?(A=te,D=ee,u=257):(A=ae,D=ie,u=0),z=0,m=0,w=b,c=s,k=p,v=0,_=-1,x=1<<p,f=x-1,1===t&&x>852||2===t&&x>592)return 1;for(;;){Z=w-v,r[m]+1<u?(U=0,S=r[m]):r[m]>=u?(U=D[r[m]-u],S=A[r[m]-u]):(U=96,S=0),h=1<<w-v,d=1<<k,b=d;do{d-=h,n[c+(z>>v)+d]=Z<<24|U<<16|S|0}while(0!==d);for(h=1<<w-1;z&h;)h>>=1;if(0!==h?(z&=h-1,z+=h):z=0,m++,0==--E[w]){if(w===g)break;w=e[a+r[m]]}if(w>p&&(z&f)!==_){for(0===v&&(v=p),c+=b,k=w-v,y=1<<k;k+v<g&&(y-=E[k+v],!(y<=0));)k++,y<<=1;if(x+=1<<k,1===t&&x>852||2===t&&x>592)return 1;_=z&f,n[_]=p<<24|k<<16|c-s|0}}return 0!==z&&(n[c+z]=w-v<<24|64<<16|0),o.bits=p,0};const{Z_FINISH:se,Z_BLOCK:re,Z_TREES:oe,Z_OK:le,Z_STREAM_END:he,Z_NEED_DICT:de,Z_STREAM_ERROR:_e,Z_DATA_ERROR:fe,Z_MEM_ERROR:ce,Z_BUF_ERROR:ue,Z_DEFLATED:we}=B,me=16209,be=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function ge(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const pe=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<16180||e.mode>16211?1:0},ke=t=>{if(pe(t))return _e;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=16180,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,le},ve=t=>{if(pe(t))return _e;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,ke(t)},ye=(t,e)=>{let a;if(pe(t))return _e;const i=t.state;return e<0?(a=0,e=-e):(a=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?_e:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=a,i.wbits=e,ve(t))},xe=(t,e)=>{if(!t)return _e;const a=new ge;t.state=a,a.strm=t,a.window=null,a.mode=16180;const i=ye(t,e);return i!==le&&(t.state=null),i};let ze,Ae,Ee=!0;const Re=t=>{if(Ee){ze=new Int32Array(512),Ae=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(ne(1,t.lens,0,288,ze,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;ne(2,t.lens,0,32,Ae,0,t.work,{bits:5}),Ee=!1}t.lencode=ze,t.lenbits=9,t.distcode=Ae,t.distbits=5},Ze=(t,e,a,i)=>{let n;const s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(e.subarray(a-s.wsize,a),0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>i&&(n=i),s.window.set(e.subarray(a-i,a-i+n),s.wnext),(i-=n)?(s.window.set(e.subarray(a-i,a),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0};var Ue={inflateReset:ve,inflateReset2:ye,inflateResetKeep:ke,inflateInit:t=>xe(t,15),inflateInit2:xe,inflate:(t,e)=>{let a,i,n,s,r,o,l,h,d,_,f,c,u,w,m,b,g,p,k,v,y,x,z=0;const A=new Uint8Array(4);let E,R;const Z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(pe(t)||!t.output||!t.input&&0!==t.avail_in)return _e;a=t.state,16191===a.mode&&(a.mode=16192),r=t.next_out,n=t.output,l=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,_=o,f=l,x=le;t:for(;;)switch(a.mode){case 16180:if(0===a.wrap){a.mode=16192;break}for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(2&a.wrap&&35615===h){0===a.wbits&&(a.wbits=15),a.check=0,A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0),h=0,d=0,a.mode=16181;break}if(a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",a.mode=me;break}if((15&h)!==we){t.msg="unknown compression method",a.mode=me;break}if(h>>>=4,d-=4,y=8+(15&h),0===a.wbits&&(a.wbits=y),y>15||y>a.wbits){t.msg="invalid window size",a.mode=me;break}a.dmax=1<<a.wbits,a.flags=0,t.adler=a.check=1,a.mode=512&h?16189:16191,h=0,d=0;break;case 16181:for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(a.flags=h,(255&a.flags)!==we){t.msg="unknown compression method",a.mode=me;break}if(57344&a.flags){t.msg="unknown header flags set",a.mode=me;break}a.head&&(a.head.text=h>>8&1),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0)),h=0,d=0,a.mode=16182;case 16182:for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.head&&(a.head.time=h),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,A[2]=h>>>16&255,A[3]=h>>>24&255,a.check=N(a.check,A,4,0)),h=0,d=0,a.mode=16183;case 16183:for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.head&&(a.head.xflags=255&h,a.head.os=h>>8),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0)),h=0,d=0,a.mode=16184;case 16184:if(1024&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.length=h,a.head&&(a.head.extra_len=h),512&a.flags&&4&a.wrap&&(A[0]=255&h,A[1]=h>>>8&255,a.check=N(a.check,A,2,0)),h=0,d=0}else a.head&&(a.head.extra=null);a.mode=16185;case 16185:if(1024&a.flags&&(c=a.length,c>o&&(c=o),c&&(a.head&&(y=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Uint8Array(a.head.extra_len)),a.head.extra.set(i.subarray(s,s+c),y)),512&a.flags&&4&a.wrap&&(a.check=N(a.check,i,c,s)),o-=c,s+=c,a.length-=c),a.length))break t;a.length=0,a.mode=16186;case 16186:if(2048&a.flags){if(0===o)break t;c=0;do{y=i[s+c++],a.head&&y&&a.length<65536&&(a.head.name+=String.fromCharCode(y))}while(y&&c<o);if(512&a.flags&&4&a.wrap&&(a.check=N(a.check,i,c,s)),o-=c,s+=c,y)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=16187;case 16187:if(4096&a.flags){if(0===o)break t;c=0;do{y=i[s+c++],a.head&&y&&a.length<65536&&(a.head.comment+=String.fromCharCode(y))}while(y&&c<o);if(512&a.flags&&4&a.wrap&&(a.check=N(a.check,i,c,s)),o-=c,s+=c,y)break t}else a.head&&(a.head.comment=null);a.mode=16188;case 16188:if(512&a.flags){for(;d<16;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(4&a.wrap&&h!==(65535&a.check)){t.msg="header crc mismatch",a.mode=me;break}h=0,d=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=16191;break;case 16189:for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}t.adler=a.check=be(h),h=0,d=0,a.mode=16190;case 16190:if(0===a.havedict)return t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,de;t.adler=a.check=1,a.mode=16191;case 16191:if(e===re||e===oe)break t;case 16192:if(a.last){h>>>=7&d,d-=7&d,a.mode=16206;break}for(;d<3;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}switch(a.last=1&h,h>>>=1,d-=1,3&h){case 0:a.mode=16193;break;case 1:if(Re(a),a.mode=16199,e===oe){h>>>=2,d-=2;break t}break;case 2:a.mode=16196;break;case 3:t.msg="invalid block type",a.mode=me}h>>>=2,d-=2;break;case 16193:for(h>>>=7&d,d-=7&d;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if((65535&h)!=(h>>>16^65535)){t.msg="invalid stored block lengths",a.mode=me;break}if(a.length=65535&h,h=0,d=0,a.mode=16194,e===oe)break t;case 16194:a.mode=16195;case 16195:if(c=a.length,c){if(c>o&&(c=o),c>l&&(c=l),0===c)break t;n.set(i.subarray(s,s+c),r),o-=c,s+=c,l-=c,r+=c,a.length-=c;break}a.mode=16191;break;case 16196:for(;d<14;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(a.nlen=257+(31&h),h>>>=5,d-=5,a.ndist=1+(31&h),h>>>=5,d-=5,a.ncode=4+(15&h),h>>>=4,d-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=me;break}a.have=0,a.mode=16197;case 16197:for(;a.have<a.ncode;){for(;d<3;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.lens[Z[a.have++]]=7&h,h>>>=3,d-=3}for(;a.have<19;)a.lens[Z[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,E={bits:a.lenbits},x=ne(0,a.lens,0,19,a.lencode,0,a.work,E),a.lenbits=E.bits,x){t.msg="invalid code lengths set",a.mode=me;break}a.have=0,a.mode=16198;case 16198:for(;a.have<a.nlen+a.ndist;){for(;z=a.lencode[h&(1<<a.lenbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(g<16)h>>>=m,d-=m,a.lens[a.have++]=g;else{if(16===g){for(R=m+2;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(h>>>=m,d-=m,0===a.have){t.msg="invalid bit length repeat",a.mode=me;break}y=a.lens[a.have-1],c=3+(3&h),h>>>=2,d-=2}else if(17===g){for(R=m+3;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=m,d-=m,y=0,c=3+(7&h),h>>>=3,d-=3}else{for(R=m+7;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=m,d-=m,y=0,c=11+(127&h),h>>>=7,d-=7}if(a.have+c>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=me;break}for(;c--;)a.lens[a.have++]=y}}if(a.mode===me)break;if(0===a.lens[256]){t.msg="invalid code -- missing end-of-block",a.mode=me;break}if(a.lenbits=9,E={bits:a.lenbits},x=ne(1,a.lens,0,a.nlen,a.lencode,0,a.work,E),a.lenbits=E.bits,x){t.msg="invalid literal/lengths set",a.mode=me;break}if(a.distbits=6,a.distcode=a.distdyn,E={bits:a.distbits},x=ne(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,E),a.distbits=E.bits,x){t.msg="invalid distances set",a.mode=me;break}if(a.mode=16199,e===oe)break t;case 16199:a.mode=16200;case 16200:if(o>=6&&l>=258){t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,$t(t,f),r=t.next_out,n=t.output,l=t.avail_out,s=t.next_in,i=t.input,o=t.avail_in,h=a.hold,d=a.bits,16191===a.mode&&(a.back=-1);break}for(a.back=0;z=a.lencode[h&(1<<a.lenbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(b&&0==(240&b)){for(p=m,k=b,v=g;z=a.lencode[v+((h&(1<<p+k)-1)>>p)],m=z>>>24,b=z>>>16&255,g=65535&z,!(p+m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=m,d-=m,a.back+=m,a.length=g,0===b){a.mode=16205;break}if(32&b){a.back=-1,a.mode=16191;break}if(64&b){t.msg="invalid literal/length code",a.mode=me;break}a.extra=15&b,a.mode=16201;case 16201:if(a.extra){for(R=a.extra;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.length+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=16202;case 16202:for(;z=a.distcode[h&(1<<a.distbits)-1],m=z>>>24,b=z>>>16&255,g=65535&z,!(m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(0==(240&b)){for(p=m,k=b,v=g;z=a.distcode[v+((h&(1<<p+k)-1)>>p)],m=z>>>24,b=z>>>16&255,g=65535&z,!(p+m<=d);){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}h>>>=p,d-=p,a.back+=p}if(h>>>=m,d-=m,a.back+=m,64&b){t.msg="invalid distance code",a.mode=me;break}a.offset=g,a.extra=15&b,a.mode=16203;case 16203:if(a.extra){for(R=a.extra;d<R;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}a.offset+=h&(1<<a.extra)-1,h>>>=a.extra,d-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=me;break}a.mode=16204;case 16204:if(0===l)break t;if(c=f-l,a.offset>c){if(c=a.offset-c,c>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=me;break}c>a.wnext?(c-=a.wnext,u=a.wsize-c):u=a.wnext-c,c>a.length&&(c=a.length),w=a.window}else w=n,u=r-a.offset,c=a.length;c>l&&(c=l),l-=c,a.length-=c;do{n[r++]=w[u++]}while(--c);0===a.length&&(a.mode=16200);break;case 16205:if(0===l)break t;n[r++]=a.length,l--,a.mode=16200;break;case 16206:if(a.wrap){for(;d<32;){if(0===o)break t;o--,h|=i[s++]<<d,d+=8}if(f-=l,t.total_out+=f,a.total+=f,4&a.wrap&&f&&(t.adler=a.check=a.flags?N(a.check,n,f,r-f):F(a.check,n,f,r-f)),f=l,4&a.wrap&&(a.flags?h:be(h))!==a.check){t.msg="incorrect data check",a.mode=me;break}h=0,d=0}a.mode=16207;case 16207:if(a.wrap&&a.flags){for(;d<32;){if(0===o)break t;o--,h+=i[s++]<<d,d+=8}if(4&a.wrap&&h!==(4294967295&a.total)){t.msg="incorrect length check",a.mode=me;break}h=0,d=0}a.mode=16208;case 16208:x=he;break t;case me:x=fe;break t;case 16210:return ce;default:return _e}return t.next_out=r,t.avail_out=l,t.next_in=s,t.avail_in=o,a.hold=h,a.bits=d,(a.wsize||f!==t.avail_out&&a.mode<me&&(a.mode<16206||e!==se))&&Ze(t,t.output,t.next_out,f-t.avail_out),_-=t.avail_in,f-=t.avail_out,t.total_in+=_,t.total_out+=f,a.total+=f,4&a.wrap&&f&&(t.adler=a.check=a.flags?N(a.check,n,f,t.next_out-f):F(a.check,n,f,t.next_out-f)),t.data_type=a.bits+(a.last?64:0)+(16191===a.mode?128:0)+(16199===a.mode||16194===a.mode?256:0),(0===_&&0===f||e===se)&&x===le&&(x=ue),x},inflateEnd:t=>{if(pe(t))return _e;let e=t.state;return e.window&&(e.window=null),t.state=null,le},inflateGetHeader:(t,e)=>{if(pe(t))return _e;const a=t.state;return 0==(2&a.wrap)?_e:(a.head=e,e.done=!1,le)},inflateSetDictionary:(t,e)=>{const a=e.length;let i,n,s;return pe(t)?_e:(i=t.state,0!==i.wrap&&16190!==i.mode?_e:16190===i.mode&&(n=1,n=F(n,e,a,0),n!==i.check)?fe:(s=Ze(t,e,a,a),s?(i.mode=16210,ce):(i.havedict=1,le)))},inflateInfo:"pako inflate (from Nodeca project)"};var Se=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const De=Object.prototype.toString,{Z_NO_FLUSH:Te,Z_FINISH:Oe,Z_OK:Fe,Z_STREAM_END:Le,Z_NEED_DICT:Ne,Z_STREAM_ERROR:Ie,Z_DATA_ERROR:Be,Z_MEM_ERROR:Ce}=B;function He(t){this.options=Tt({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ct,this.strm.avail_out=0;let a=Ue.inflateInit2(this.strm,e.windowBits);if(a!==Fe)throw new Error(I[a]);if(this.header=new Se,Ue.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=Nt(e.dictionary):"[object ArrayBuffer]"===De.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(a=Ue.inflateSetDictionary(this.strm,e.dictionary),a!==Fe)))throw new Error(I[a])}He.prototype.push=function(t,e){const a=this.strm,i=this.options.chunkSize,n=this.options.dictionary;let s,r,o;if(this.ended)return!1;for(r=e===~~e?e:!0===e?Oe:Te,"[object ArrayBuffer]"===De.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;;){for(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),s=Ue.inflate(a,r),s===Ne&&n&&(s=Ue.inflateSetDictionary(a,n),s===Fe?s=Ue.inflate(a,r):s===Be&&(s=Ne));a.avail_in>0&&s===Le&&a.state.wrap>0&&0!==t[a.next_in];)Ue.inflateReset(a),s=Ue.inflate(a,r);switch(s){case Ie:case Be:case Ne:case Ce:return this.onEnd(s),this.ended=!0,!1}if(o=a.avail_out,a.next_out&&(0===a.avail_out||s===Le))if("string"===this.options.to){let t=Bt(a.output,a.next_out),e=a.next_out-t,n=It(a.output,t);a.next_out=e,a.avail_out=i-e,e&&a.output.set(a.output.subarray(t,t+e),0),this.onData(n)}else this.onData(a.output.length===a.next_out?a.output:a.output.subarray(0,a.next_out));if(s!==Fe||0!==o){if(s===Le)return s=Ue.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(0===a.avail_in)break}}return!0},He.prototype.onData=function(t){this.chunks.push(t)},He.prototype.onEnd=function(t){t===Fe&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ot(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};const{Deflate:Me,deflate:je,deflateRaw:Ke,gzip:Pe}=Vt;var Ye=Me,Ge=je,Xe=B;const We=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const e=this._hasEvents?",":"";this.deflate.push(e+t,Xe.Z_SYNC_FLUSH),this._hasEvents=!0}finish(){if(this.deflate.push("]",Xe.Z_FINISH),this.deflate.err)throw this.deflate.err;const t=this.deflate.result;return this._init(),t}_init(){this._hasEvents=!1,this.deflate=new Ye,this.deflate.push("[",Xe.Z_NO_FLUSH)}},qe={clear:()=>{We.clear()},addEvent:t=>We.addEvent(t),finish:()=>We.finish(),compress:t=>function(t){return Ge(t)}(t)};addEventListener("message",(function(t){const e=t.data.method,a=t.data.id,i=t.data.arg;if(e in qe&&"function"==typeof qe[e])try{const t=qe[e](i);postMessage({id:a,method:e,success:!0,response:t})}catch(t){postMessage({id:a,method:e,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});`;function sd(){const t=new Blob([rd]);return URL.createObjectURL(t)}function $(t,e){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&(m.info(t),e&&yi(t))}function Yt(t,e){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&(m.info(t),e&&setTimeout(()=>{yi(t)},0))}function yi(t){w().addBreadcrumb({category:"console",data:{logger:"replay"},level:"info",message:t},{level:"info"})}class ar extends Error{constructor(){super(`Event buffer exceeded maximum size of ${tr}.`)}}class bi{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const n=JSON.stringify(e).length;if(this._totalSize+=n,this._totalSize>tr)throw new ar;this.events.push(e)}finish(){return new Promise(e=>{const n=this.events;this.clear(),e(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map(n=>n.timestamp).sort()[0];return e?sr(e):null}}class id{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((e,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?e():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){$("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,n){const r=this._getAndIncrementId();return new Promise((s,i)=>{const a=({data:o})=>{const c=o;if(c.method===e&&c.id===r){if(this._worker.removeEventListener("message",a),!c.success){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error("[Replay]",c.response),i(new Error("Error in compression worker"));return}s(c.response)}};this._worker.addEventListener("message",a),this._worker.postMessage({id:r,method:e,arg:n})})}_getAndIncrementId(){return this._id++}}class ad{constructor(e){this._worker=new id(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const n=sr(e.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(e);return this._totalSize+=r.length,this._totalSize>tr?Promise.reject(new ar):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear")}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class od{constructor(e){this._fallback=new bi,this._compression=new ad(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch{$("[Replay] Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:n}=this._fallback,r=[];for(const s of e)r.push(this._compression.addEvent(s));this._compression.hasCheckout=n,this._used=this._compression;try{await Promise.all(r)}catch(s){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("[Replay] Failed to add events when switching buffers.",s)}}}function cd({useCompression:t}){if(t&&window.Worker)try{const e=sd();$("[Replay] Using compression worker");const n=new Worker(e);return new od(n)}catch{$("[Replay] Failed to create compression worker")}return $("[Replay] Using simple buffer"),new bi}function or(){try{return"sessionStorage"in M&&!!M.sessionStorage}catch{return!1}}function ld(t){ud(),t.session=void 0}function ud(){if(or())try{M.sessionStorage.removeItem(Xn)}catch{}}function Ei(t){return t===void 0?!1:Math.random()<t}function cr(t){if(or())try{M.sessionStorage.setItem(Xn,JSON.stringify(t))}catch{}}function Si(t){const e=Date.now(),n=t.id||tn(),r=t.started||e,s=t.lastActivity||e,i=t.segmentId||0,a=t.sampled,o=t.previousSessionId;return{id:n,started:r,lastActivity:s,segmentId:i,sampled:a,previousSessionId:o}}function dd(t,e){return Ei(t)?"session":e?"buffer":!1}function rs({sessionSampleRate:t,allowBuffering:e,stickySession:n=!1},{previousSessionId:r}={}){const s=dd(t,e),i=Si({sampled:s,previousSessionId:r});return n&&cr(i),i}function fd(t){if(!or())return null;try{const e=M.sessionStorage.getItem(Xn);if(!e)return null;const n=JSON.parse(e);return Yt("[Replay] Loading existing session",t),Si(n)}catch{return null}}function On(t,e,n=+new Date){return t===null||e===void 0||e<0?!0:e===0?!1:t+e<=n}function wi(t,{maxReplayDuration:e,sessionIdleExpire:n,targetTime:r=Date.now()}){return On(t.started,e,r)||On(t.lastActivity,n,r)}function Ii(t,{sessionIdleExpire:e,maxReplayDuration:n}){return!(!wi(t,{sessionIdleExpire:e,maxReplayDuration:n})||t.sampled==="buffer"&&t.segmentId===0)}function yn({traceInternals:t,sessionIdleExpire:e,maxReplayDuration:n,previousSessionId:r},s){const i=s.stickySession&&fd(t);return i?Ii(i,{sessionIdleExpire:e,maxReplayDuration:n})?(Yt("[Replay] Session in sessionStorage is expired, creating new one..."),rs(s,{previousSessionId:i.id})):i:(Yt("[Replay] Creating new session",t),rs(s,{previousSessionId:r}))}const hd=5;function pd(t){return t.type===R.Custom}function lr(t,e,n){return Ci(t,e)?(vi(t,e,n),!0):!1}function _d(t,e,n){return Ci(t,e)?vi(t,e,n):Promise.resolve(null)}async function vi(t,e,n){if(!t.eventBuffer)return null;try{n&&t.recordingMode==="buffer"&&t.eventBuffer.clear(),n&&(t.eventBuffer.hasCheckout=!0);const r=t.getOptions(),s=md(e,r.beforeAddRecordingEvent);return s?await t.eventBuffer.addEvent(s):void 0}catch(r){const s=r&&r instanceof ar?"addEventSizeExceeded":"addEvent";(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error(r),await t.stop({reason:s});const i=w().getClient();i&&i.recordDroppedEvent("internal_sdk_error","replay")}}function Ci(t,e){if(!t.eventBuffer||t.isPaused()||!t.isEnabled())return!1;const n=sr(e.timestamp);return n+t.timeouts.sessionIdlePause<Date.now()?!1:n>t.getContext().initialTimestamp+t.getOptions().maxReplayDuration?($(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,t.getOptions()._experiments.traceInternals),!1):!0}function md(t,e){try{if(typeof e=="function"&&pd(t))return e(t)}catch(n){return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",n),null}return t}function ki(t){return!t.type}function Bn(t){return t.type==="transaction"}function gd(t){return t.type==="replay_event"}function Ri(t){const e=Ed();return(n,r)=>{if(!t.isEnabled()||!ki(n)&&!Bn(n))return;const s=r&&r.statusCode;if(!(e&&(!s||s<200||s>=300))){if(Bn(n)){yd(t,n);return}bd(t,n)}}}function yd(t,e){const n=t.getContext();e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(e.contexts.trace.trace_id)}function bd(t,e){const n=t.getContext();e.event_id&&n.errorIds.size<100&&n.errorIds.add(e.event_id),t.recordingMode==="buffer"&&e.tags&&e.tags.replayId&&setTimeout(()=>{t.sendBufferedReplayOrFlush()})}function Ed(){const t=w().getClient();if(!t)return!1;const e=t.getTransport();return e&&e.send.__sentry__baseTransport__||!1}function Sd(t,e){return t.type||!t.exception||!t.exception.values||!t.exception.values.length?!1:e.originalException&&e.originalException.__rrweb__?!0:t.exception.values.some(n=>!n.stacktrace||!n.stacktrace.frames||!n.stacktrace.frames.length?!1:n.stacktrace.frames.some(r=>r.filename&&r.filename.includes("/rrweb/src/")))}function wd(t,e){return t.recordingMode!=="buffer"||e.message===Qn||!e.exception||e.type?!1:Ei(t.getOptions().errorSampleRate)}function Id(t,e=!1){const n=e?Ri(t):void 0;return Object.assign((r,s)=>t.isEnabled()?gd(r)?(delete r.breadcrumbs,r):!ki(r)&&!Bn(r)||!t.checkAndHandleExpiredSession()?r:Sd(r,s)&&!t.getOptions()._experiments.captureExceptions?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Replay] Ignoring error from rrweb internals",r),null):((wd(t,r)||t.recordingMode==="session")&&(r.tags={...r.tags,replayId:t.getSessionId()}),n&&n(r,{statusCode:200}),r):r,{id:"Replay"})}function on(t,e){return e.map(({type:n,start:r,end:s,name:i,data:a})=>{const o=t.throttledAddEvent({type:R.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:s,data:a}}});return typeof o=="string"?Promise.resolve(null):o})}function vd(t){const{from:e,to:n}=t,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:e}}}function Cd(t){return e=>{if(!t.isEnabled())return;const n=vd(e);n!==null&&(t.getContext().urls.push(n.name),t.triggerUserActivity(),t.addUpdate(()=>(on(t,[n]),!1)))}}function kd(t,e){return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&t.getOptions()._experiments.traceInternals?!1:Fo(e,w())}function cn(t,e){t.isEnabled()&&e!==null&&(kd(t,e.name)||t.addUpdate(()=>(on(t,[e]),!0)))}function Rd(t){const{startTimestamp:e,endTimestamp:n,fetchData:r,response:s}=t;if(!n)return null;const{method:i,url:a}=r;return{type:"resource.fetch",start:e/1e3,end:n/1e3,name:a,data:{method:i,statusCode:s?s.status:void 0}}}function Ad(t){return e=>{if(!t.isEnabled())return;const n=Rd(e);cn(t,n)}}function Td(t){const{startTimestamp:e,endTimestamp:n,xhr:r}=t,s=r[$n];if(!e||!n||!s)return null;const{method:i,url:a,status_code:o}=s;return a===void 0?null:{type:"resource.xhr",name:a,start:e/1e3,end:n/1e3,data:{method:i,statusCode:o}}}function xd(t){return e=>{if(!t.isEnabled())return;const n=Td(e);cn(t,n)}}const bt=10,ur=11,Un=12,ht=13,Ln=14,Xt=15,dt=20,st=21,Fn=22,Qt=23,Ai=["true","false","null"];function Nd(t,e){if(!e.length)return t;let n=t;const r=e.length-1,s=e[r];n=Dd(n,s);for(let i=r;i>=0;i--)switch(e[i]){case bt:n=`${n}}`;break;case dt:n=`${n}]`;break}return n}function Dd(t,e){switch(e){case bt:return`${t}"~~":"~~"`;case ur:return`${t}:"~~"`;case Un:return`${t}~~":"~~"`;case ht:return Bd(t);case Ln:return`${t}~~"`;case Xt:return`${t},"~~":"~~"`;case dt:return`${t}"~~"`;case st:return Md(t);case Fn:return`${t}~~"`;case Qt:return`${t},"~~"`}return t}function Md(t){const e=Od(t);if(e>-1){const n=t.slice(e+1);return Ai.includes(n.trim())?`${t},"~~"`:`${t.slice(0,e+1)}"~~"`}return t}function Od(t){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n===","||n==="[")return e}return-1}function Bd(t){const e=t.lastIndexOf(":"),n=t.slice(e+1);return Ai.includes(n.trim())?`${t},"~~":"~~"`:`${t.slice(0,e+1)}"~~"`}function Ud(t){const e=[];for(let n=0;n<t.length;n++)Ld(e,t,n);return e}function Ld(t,e,n){const r=t[t.length-1],s=e[n];if(!/\s/.test(s)){if(s==='"'&&!Ti(e,n)){Fd(t,r);return}switch(s){case"{":zd(t,r);break;case"[":Pd(t,r);break;case":":Gd(t,r);break;case",":Yd(t,r);break;case"}":Wd(t,r);break;case"]":Hd(t,r);break}}}function Fd(t,e){if(e===Ln){t.pop(),t.push(Xt);return}if(e===Fn){t.pop(),t.push(Qt);return}if(e===ht){t.push(Ln);return}if(e===st){t.push(Fn);return}if(e===bt){t.push(Un);return}if(e===Un){t.pop(),t.push(ur);return}}function zd(t,e){if(!e){t.push(bt);return}if(e===ht){t.push(bt);return}if(e===st&&t.push(bt),e===dt){t.push(bt);return}}function Pd(t,e){if(!e){t.push(dt),t.push(st);return}if(e===ht){t.push(dt),t.push(st);return}if(e===st&&(t.push(dt),t.push(st)),e===dt){t.push(dt),t.push(st);return}}function Gd(t,e){e===ur&&(t.pop(),t.push(ht))}function Yd(t,e){if(e===ht){t.pop();return}if(e===Xt){t.pop(),t.pop();return}if(e!==st&&e===Qt){t.pop();return}}function Wd(t,e){e===bt&&t.pop(),e===ht&&(t.pop(),t.pop()),e===Xt&&(t.pop(),t.pop(),t.pop()),t[t.length-1]===ht&&t.push(Xt),t[t.length-1]===st&&t.push(Qt)}function Hd(t,e){e===dt&&t.pop(),e===st&&(t.pop(),t.pop()),e===Qt&&(t.pop(),t.pop(),t.pop()),t[t.length-1]===ht&&t.push(Xt),t[t.length-1]===st&&t.push(Qt)}function Ti(t,e){return t[e-1]==="\\"&&!Ti(t,e-1)}function xi(t){const e=Ud(t);return Nd(t,e)}function Je(t,e){if(t)try{if(typeof t=="string")return e.encode(t).length;if(t instanceof URLSearchParams)return e.encode(t.toString()).length;if(t instanceof FormData){const n=Oi(t);return e.encode(n).length}if(t instanceof Blob)return t.size;if(t instanceof ArrayBuffer)return t.byteLength}catch{}}function Ni(t){if(!t)return;const e=parseInt(t,10);return isNaN(e)?void 0:e}function Di(t){if(typeof t=="string")return t;if(t instanceof URLSearchParams)return t.toString();if(t instanceof FormData)return Oi(t)}function Mi(t,e){if(!e)return null;const{startTimestamp:n,endTimestamp:r,url:s,method:i,statusCode:a,request:o,response:c}=e;return{type:t,start:n/1e3,end:r/1e3,name:s,data:Qe({method:i,statusCode:a,request:o,response:c})}}function he(t){return{headers:{},size:t,_meta:{warnings:["URL_SKIPPED"]}}}function Et(t,e,n){if(!e&&Object.keys(t).length===0)return;if(!e)return{headers:t};if(!n)return{headers:t,size:e};const r={headers:t,size:e},{body:s,warnings:i}=Zd(n);return r.body=s,i.length>0&&(r._meta={warnings:i}),r}function zn(t,e){return Object.keys(t).reduce((n,r)=>{const s=r.toLowerCase();return e.includes(s)&&t[r]&&(n[s]=t[r]),n},{})}function Oi(t){return new URLSearchParams(t).toString()}function Zd(t){if(!t||typeof t!="string")return{body:t,warnings:[]};const e=t.length>xe;if(Vd(t))try{const n=e?xi(t.slice(0,xe)):t;return{body:JSON.parse(n),warnings:e?["JSON_TRUNCATED"]:[]}}catch{return{body:e?`${t.slice(0,xe)}`:t,warnings:e?["INVALID_JSON","TEXT_TRUNCATED"]:["INVALID_JSON"]}}return{body:e?`${t.slice(0,xe)}`:t,warnings:e?["TEXT_TRUNCATED"]:[]}}function Vd(t){const e=t[0],n=t[t.length-1];return e==="["&&n==="]"||e==="{"&&n==="}"}function Xe(t,e){const n=$d(t);return me(n,e)}function $d(t,e=M.document.baseURI){if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith(M.location.origin))return t;const n=new URL(t,e);if(n.origin!==new URL(e).origin)return t;const r=n.href;return!t.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function Kd(t,e,n){try{const r=await qd(t,e,n),s=Mi("resource.fetch",r);cn(n.replay,s)}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error("[Replay] Failed to capture fetch breadcrumb",r)}}function jd(t,e,n){const{input:r,response:s}=e,i=Bi(r),a=Je(i,n.textEncoder),o=s?Ni(s.headers.get("content-length")):void 0;a!==void 0&&(t.data.request_body_size=a),o!==void 0&&(t.data.response_body_size=o)}async function qd(t,e,n){const{startTimestamp:r,endTimestamp:s}=e,{url:i,method:a,status_code:o=0,request_body_size:c,response_body_size:l}=t.data,u=Xe(i,n.networkDetailAllowUrls)&&!Xe(i,n.networkDetailDenyUrls),d=u?Jd(n,e.input,c):he(c),f=await Xd(u,n,e.response,l);return{startTimestamp:r,endTimestamp:s,url:i,method:a,statusCode:o,request:d,response:f}}function Jd({networkCaptureBodies:t,networkRequestHeaders:e},n,r){const s=tf(n,e);if(!t)return Et(s,r,void 0);const i=Bi(n),a=Di(i);return Et(s,r,a)}async function Xd(t,{networkCaptureBodies:e,textEncoder:n,networkResponseHeaders:r},s,i){if(!t&&i!==void 0)return he(i);const a=Ui(s.headers,r);if(!e&&i!==void 0)return Et(a,i,void 0);try{const o=s.clone(),c=await Qd(o),l=c&&c.length&&i===void 0?Je(c,n):i;return t?e?Et(a,l,c):Et(a,l,void 0):he(l)}catch{return Et(a,i,void 0)}}async function Qd(t){try{return await t.text()}catch{return}}function Bi(t=[]){if(!(t.length!==2||typeof t[1]!="object"))return t[1].body}function Ui(t,e){const n={};return e.forEach(r=>{t.get(r)&&(n[r]=t.get(r))}),n}function tf(t,e){return t.length===1&&typeof t[0]!="string"?ss(t[0],e):t.length===2?ss(t[1],e):{}}function ss(t,e){if(!t)return{};const n=t.headers;return n?n instanceof Headers?Ui(n,e):Array.isArray(n)?{}:zn(n,e):{}}async function ef(t,e,n){try{const r=rf(t,e,n),s=Mi("resource.xhr",r);cn(n.replay,s)}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error("[Replay] Failed to capture fetch breadcrumb",r)}}function nf(t,e,n){const{xhr:r,input:s}=e,i=Je(s,n.textEncoder),a=r.getResponseHeader("content-length")?Ni(r.getResponseHeader("content-length")):Je(r.response,n.textEncoder);i!==void 0&&(t.data.request_body_size=i),a!==void 0&&(t.data.response_body_size=a)}function rf(t,e,n){const{startTimestamp:r,endTimestamp:s,input:i,xhr:a}=e,{url:o,method:c,status_code:l=0,request_body_size:u,response_body_size:d}=t.data;if(!o)return null;if(!Xe(o,n.networkDetailAllowUrls)||Xe(o,n.networkDetailDenyUrls)){const y=he(u),I=he(d);return{startTimestamp:r,endTimestamp:s,url:o,method:c,statusCode:l,request:y,response:I}}const f=a[$n],h=f?zn(f.request_headers,n.networkRequestHeaders):{},_=zn(sf(a),n.networkResponseHeaders),p=Et(h,u,n.networkCaptureBodies?Di(i):void 0),g=Et(_,d,n.networkCaptureBodies?e.xhr.responseText:void 0);return{startTimestamp:r,endTimestamp:s,url:o,method:c,statusCode:l,request:p,response:g}}function sf(t){const e=t.getAllResponseHeaders();return e?e.split(`\r
`).reduce((n,r)=>{const[s,i]=r.split(": ");return n[s.toLowerCase()]=i,n},{}):{}}function af(t){const e=w().getClient();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:i,networkRequestHeaders:a,networkResponseHeaders:o}=t.getOptions(),c={replay:t,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:s,networkCaptureBodies:i,networkRequestHeaders:a,networkResponseHeaders:o};e&&e.on?e.on("beforeAddBreadcrumb",(l,u)=>of(c,l,u)):(rt("fetch",Ad(t)),rt("xhr",xd(t)))}catch{}}function of(t,e,n){if(e.data)try{cf(e)&&uf(n)&&(nf(e,n,t),ef(e,n,t)),lf(e)&&df(n)&&(jd(e,n,t),Kd(e,n,t))}catch{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("Error when enriching network breadcrumb")}}function cf(t){return t.category==="xhr"}function lf(t){return t.category==="fetch"}function uf(t){return t&&t.xhr}function df(t){return t&&t.response}let is=null;function ff(t){return!!t.category}const hf=t=>e=>{if(!t.isEnabled())return;const n=pf(e);n&&an(t,n)};function pf(t){const e=t.getLastBreadcrumb&&t.getLastBreadcrumb();return is===e||!e||(is=e,!ff(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui."))?null:e.category==="console"?_f(e):ft(e)}function _f(t){const e=t.data&&t.data.arguments;if(!Array.isArray(e)||e.length===0)return ft(t);let n=!1;const r=e.map(s=>{if(!s)return s;if(typeof s=="string")return s.length>Ne?(n=!0,`${s.slice(0,Ne)}`):s;if(typeof s=="object")try{const i=ot(s,7),a=JSON.stringify(i);if(a.length>Ne){const o=xi(a.slice(0,Ne)),c=JSON.parse(o);return n=!0,c}return i}catch{}return s});return ft({...t,data:{...t.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function mf(t){const e=w().getScope(),n=w().getClient();e.addScopeListener(hf(t)),rt("dom",Wu(t)),rt("history",Cd(t)),af(t);const r=Id(t,!as(n));n&&n.addEventProcessor?n.addEventProcessor(r):Wn(r),as(n)&&(n.on("afterSendEvent",Ri(t)),n.on("createDsc",s=>{const i=t.getSessionId();i&&t.isEnabled()&&t.recordingMode==="session"&&(s.replay_id=i)}),n.on("startTransaction",s=>{t.lastTransaction=s}),n.on("finishTransaction",s=>{t.lastTransaction=s}))}function as(t){return!!(t&&t.on)}async function gf(t){try{return Promise.all(on(t,[yf(M.performance.memory)]))}catch{return[]}}function yf(t){const{jsHeapSizeLimit:e,totalJSHeapSize:n,usedJSHeapSize:r}=t,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:e,totalJSHeapSize:n,usedJSHeapSize:r}}}}function bf(t,e,n){let r,s,i;const a=n&&n.maxWait?Math.max(n.maxWait,e):0;function o(){return c(),r=t(),r}function c(){s!==void 0&&clearTimeout(s),i!==void 0&&clearTimeout(i),s=i=void 0}function l(){return s!==void 0||i!==void 0?o():r}function u(){return s&&clearTimeout(s),s=setTimeout(o,e),a&&i===void 0&&(i=setTimeout(o,a)),r}return u.cancel=c,u.flush=l,u}function Ef(t){let e=!1;return(n,r)=>{if(!t.checkAndHandleExpiredSession()){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("[Replay] Received replay event after session expired.");return}const s=r||!e;e=!0,t.addUpdate(()=>{if(t.recordingMode==="buffer"&&s&&t.setInitialState(),!lr(t,n,s))return!0;if(!s)return!1;if(wf(t,s),t.session&&t.session.previousSessionId)return!0;if(t.recordingMode==="buffer"&&t.session&&t.eventBuffer){const i=t.eventBuffer.getEarliestTimestamp();i&&($(`[Replay] Updating session start time to earliest event in buffer to ${new Date(i)}`,t.getOptions()._experiments.traceInternals),t.session.started=i,t.getOptions().stickySession&&cr(t.session))}return t.recordingMode==="session"&&t.flush(),!0})}}function Sf(t){const e=t.getOptions();return{type:R.Custom,timestamp:Date.now(),data:{tag:"options",payload:{sessionSampleRate:e.sessionSampleRate,errorSampleRate:e.errorSampleRate,useCompressionOption:e.useCompression,blockAllMedia:e.blockAllMedia,maskAllText:e.maskAllText,maskAllInputs:e.maskAllInputs,useCompression:t.eventBuffer?t.eventBuffer.type==="worker":!1,networkDetailHasUrls:e.networkDetailAllowUrls.length>0,networkCaptureBodies:e.networkCaptureBodies,networkRequestHasHeaders:e.networkRequestHeaders.length>0,networkResponseHasHeaders:e.networkResponseHeaders.length>0}}}}function wf(t,e){!e||!t.session||t.session.segmentId!==0||lr(t,Sf(t),!1)}function If(t,e,n,r){return ee(xs(t,Kn(t),r,n),[[{type:"replay_event"},t],[{type:"replay_recording",length:typeof e=="string"?new TextEncoder().encode(e).length:e.length},e]])}function vf({recordingData:t,headers:e}){let n;const r=`${JSON.stringify(e)}
`;if(typeof t=="string")n=`${r}${t}`;else{const i=new TextEncoder().encode(r);n=new Uint8Array(i.length+t.length),n.set(i),n.set(t,i.length)}return n}async function Cf({client:t,scope:e,replayId:n,event:r}){const s=typeof t._integrations=="object"&&t._integrations!==null&&!Array.isArray(t._integrations)?Object.keys(t._integrations):void 0,i={event_id:n,integrations:s};t.emit&&t.emit("preprocessEvent",r,i);const a=await Us(t.getOptions(),r,i,e,t);if(!a)return null;a.platform=a.platform||"javascript";const o=t.getSdkMetadata&&t.getSdkMetadata(),{name:c,version:l}=o&&o.sdk||{};return a.sdk={...a.sdk,name:c||"sentry.javascript.unknown",version:l||"0.0.0"},a}async function kf({recordingData:t,replayId:e,segmentId:n,eventContext:r,timestamp:s,session:i}){const a=vf({recordingData:t,headers:{segment_id:n}}),{urls:o,errorIds:c,traceIds:l,initialTimestamp:u}=r,d=w(),f=d.getClient(),h=d.getScope(),_=f&&f.getTransport(),p=f&&f.getDsn();if(!f||!_||!p||!i.sampled)return;const g={type:el,replay_start_timestamp:u/1e3,timestamp:s/1e3,error_ids:c,trace_ids:l,urls:o,replay_id:e,segment_id:n,replay_type:i.sampled},y=await Cf({scope:h,client:f,replayId:e,event:g});if(!y){f.recordDroppedEvent("event_processor","replay",g),$("An event processor returned `null`, will not send event.");return}delete y.sdkProcessingMetadata;const I=If(y,a,p,f.getOptions().tunnel);let T;try{T=await _.send(I)}catch(A){const P=new Error(Qn);try{P.cause=A}catch{}throw P}if(!T)return T;if(typeof T.statusCode=="number"&&(T.statusCode<200||T.statusCode>=300))throw new Li(T.statusCode);return T}class Li extends Error{constructor(e){super(`Transport returned status code ${e}`)}}async function Fi(t,e={count:0,interval:ol}){const{recordingData:n,options:r}=t;if(n.length)try{return await kf(t),!0}catch(s){if(s instanceof Li)throw s;if(Qa("Replays",{_retryCount:e.count}),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&r._experiments&&r._experiments.captureExceptions&&nn(s),e.count>=cl){const i=new Error(`${Qn} - max retries exceeded`);try{i.cause=s}catch{}throw i}return e.interval*=++e.count,new Promise((i,a)=>{setTimeout(async()=>{try{await Fi(t,e),i(!0)}catch(o){a(o)}},e.interval)})}}const zi="__THROTTLED",Rf="__SKIPPED";function Af(t,e,n){const r=new Map,s=o=>{const c=o-n;r.forEach((l,u)=>{u<c&&r.delete(u)})},i=()=>[...r.values()].reduce((o,c)=>o+c,0);let a=!1;return(...o)=>{const c=Math.floor(Date.now()/1e3);if(s(c),i()>=e){const u=a;return a=!0,u?Rf:zi}a=!1;const l=r.get(c)||0;return r.set(c,l+1),t(...o)}}class mt{constructor({options:e,recordingOptions:n}){mt.prototype.__init.call(this),mt.prototype.__init2.call(this),mt.prototype.__init3.call(this),mt.prototype.__init4.call(this),mt.prototype.__init5.call(this),mt.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:nl,sessionIdleExpire:rl},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=e,this._debouncedFlush=bf(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Af((a,o)=>_d(this,a,o),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:s}=this.getOptions(),i=r?{threshold:Math.min(ll,r),timeout:r,scrollTimeout:ul,ignoreSelector:s?s.join(","):""}:void 0;i&&(this.clickDetector=new Lu(this,i))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}getOptions(){return this._options}initializeSampling(e){const{errorSampleRate:n,sessionSampleRate:r}=this._options;if(!(n<=0&&r<=0)){if(this._initializeSessionForSampling(e),!this.session){this._handleException(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",Yt(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session")throw new Error("Replay recording is already in progress");if(this._isEnabled&&this.recordingMode==="buffer")throw new Error("Replay buffering is in progress, call `flush()` to save the replay");Yt("[Replay] Starting replay in session mode",this._options._experiments.traceInternals);const e=yn({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");Yt("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const e=yn({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{this._stopRecording=lt({...this._recordingOptions,...this.recordingMode==="buffer"&&{checkoutEveryNms:al},emit:Ef(this),onMutation:this._onMutationHandler})}catch(e){this._handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}async stop({forceFlush:e=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1;try{$(`[Replay] Stopping Replay${n?` triggered by ${n}`:""}`,this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,ld(this)}catch(r){this._handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),$("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),$("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();$("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const r=this.stopRecording();!e||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const n=e();this.recordingMode!=="buffer"&&n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&On(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const e=`${M.location.pathname}${M.location.hash}${M.location.search}`,n=`${M.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(e,n){const r=this._throttledAddEvent(e,n);if(r===zi){const s=ft({category:"replay.throttled"});this.addUpdate(()=>!lr(this,{type:hd,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}}))}return r}getCurrentRoute(){const e=this.lastTransaction||w().getScope().getTransaction();if(!(!e||!["route","custom"].includes(e.metadata.source)))return e.name}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=cd({useCompression:this._options.useCompression}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(e){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error("[Replay]",e),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&this._options._experiments&&this._options._experiments.captureExceptions&&nn(e)}_initializeSessionForSampling(e){const n=this._options.errorSampleRate>0,r=yn({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const e=this.session;return Ii(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(e),!1):!0}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{M.document.addEventListener("visibilitychange",this._handleVisibilityChange),M.addEventListener("blur",this._handleWindowBlur),M.addEventListener("focus",this._handleWindowFocus),M.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(mf(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=nd(this)}_removeListeners(){try{M.document.removeEventListener("visibilitychange",this._handleVisibilityChange),M.removeEventListener("blur",this._handleWindowBlur),M.removeEventListener("focus",this._handleWindowFocus),M.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}__init(){this._handleVisibilityChange=()=>{M.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=ft({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=ft({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{$u(this,e)}}_doChangeToBackgroundTasks(e){!this.session||wi(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){$("[Replay] Document has become active, but session has expired");return}e&&this._createCustomBreadcrumb(e)}_triggerFullSnapshot(e=!0){try{$("[Replay] Taking full rrweb snapshot"),lt.takeFullSnapshot(e)}catch(n){this._handleException(n)}}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate(()=>{this.throttledAddEvent({type:R.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})})}_addPerformanceEntries(){const e=qu(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(on(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:n}=this;if(!e||!n||e.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(!this.session||!this.eventBuffer||!e){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error("[Replay] No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await gf(this),!!this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),s=this.session.segmentId++;this._maybeSaveSession();const i=await this.eventBuffer.finish();await Fi({replayId:e,recordingData:i,segmentId:s,eventContext:r,session:this.session,options:this.getOptions(),timestamp:n})}catch(n){this._handleException(n),this.stop({reason:"sendReplay"});const r=w().getClient();r&&r.recordDroppedEvent("send_error","replay")}}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession()){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error("[Replay] Attempting to finish replay event after session expired.");return}if(!this.session){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error("[Replay] No session found to flush.");return}const n=this.session.started,s=Date.now()-n;this._debouncedFlush.cancel();const i=s<this._options.minReplayDuration,a=s>this._options.maxReplayDuration+5e3;if(i||a){$(`[Replay] Session duration (${Math.floor(s/1e3)}s) is too ${i?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),i&&this._debouncedFlush();return}const o=this.eventBuffer;if(o&&this.session.segmentId===0&&!o.hasCheckout&&$("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=void 0;return}try{await this._flushLock}catch(c){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.error(c)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&cr(this.session)}__init6(){this._onMutationHandler=e=>{const n=e.length,r=this._options.mutationLimit,s=this._options.mutationBreadcrumbLimit,i=r&&n>r;if(n>s||i){const a=ft({category:"replay.mutations",data:{count:n,limit:i}});this._createCustomBreadcrumb(a)}return i?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}function ie(t,e,n,r){const s=typeof r=="string"?r.split(","):[],i=[...t,...s,...e];return typeof n<"u"&&(typeof n=="string"&&i.push(`.${n}`),console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")),i.join(",")}function Tf({mask:t,unmask:e,block:n,unblock:r,ignore:s,blockClass:i,blockSelector:a,maskTextClass:o,maskTextSelector:c,ignoreClass:l}){const u=['base[href="/"]'],d=ie(t,[".sentry-mask","[data-sentry-mask]"],o,c),f=ie(e,[".sentry-unmask","[data-sentry-unmask]"]),h={maskTextSelector:d,unmaskTextSelector:f,blockSelector:ie(n,[".sentry-block","[data-sentry-block]",...u],i,a),unblockSelector:ie(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:ie(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],l)};return i instanceof RegExp&&(h.blockClass=i),o instanceof RegExp&&(h.maskTextClass=o),h}function xf({el:t,key:e,maskAttributes:n,maskAllText:r,privacyOptions:s,value:i}){return!r||s.unmaskTextSelector&&t.matches(s.unmaskTextSelector)?i:n.includes(e)||e==="value"&&t.tagName==="INPUT"&&["submit","button"].includes(t.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}const os='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Nf=["content-length","content-type","accept"];let cs=!1;class dr{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=sl,flushMaxDelay:n=il,minReplayDuration:r=dl,maxReplayDuration:s=Wr,stickySession:i=!0,useCompression:a=!0,_experiments:o={},sessionSampleRate:c,errorSampleRate:l,maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:f=!0,mutationBreadcrumbLimit:h=750,mutationLimit:_=1e4,slowClickTimeout:p=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:y=[],networkDetailDenyUrls:I=[],networkCaptureBodies:T=!0,networkRequestHeaders:A=[],networkResponseHeaders:P=[],mask:v=[],maskAttributes:E=["title","placeholder"],unmask:N=[],block:G=[],unblock:b=[],ignore:k=[],maskFn:B,beforeAddRecordingEvent:Z,blockClass:V,blockSelector:X,maskInputOptions:O,maskTextClass:tt,maskTextSelector:Y,ignoreClass:et}={}){this.name=dr.id;const nt=Tf({mask:v,unmask:N,block:G,unblock:b,ignore:k,blockClass:V,blockSelector:X,maskTextClass:tt,maskTextSelector:Y,ignoreClass:et});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{...O||{},password:!0},maskTextFn:B,maskInputFn:B,maskAttributeFn:(wt,It,se)=>xf({maskAttributes:E,maskAllText:u,privacyOptions:nt,key:wt,value:It,el:se}),...nt,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:wt=>{try{wt.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:n,minReplayDuration:Math.min(r,fl),maxReplayDuration:Math.min(s,Wr),stickySession:i,sessionSampleRate:c,errorSampleRate:l,useCompression:a,blockAllMedia:f,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:h,mutationLimit:_,slowClickTimeout:p,slowClickIgnoreSelectors:g,networkDetailAllowUrls:y,networkDetailDenyUrls:I,networkCaptureBodies:T,networkRequestHeaders:ls(A),networkResponseHeaders:ls(P),beforeAddRecordingEvent:Z,_experiments:o},typeof c=="number"&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysSessionSampleRate: ${c} })`),this._initialOptions.sessionSampleRate=c),typeof l=="number"&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysOnErrorSampleRate: ${l} })`),this._initialOptions.errorSampleRate=l),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${os}`:os),this._isInitialized&&Ar())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return cs}set _isInitialized(e){cs=e}setupOnce(){Ar()&&(this._setup(),setTimeout(()=>this._initialize()))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(e){return!this._replay||!this._replay.isEnabled()?Promise.resolve():this._replay.sendBufferedReplayOrFlush(e)}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(){this._replay&&this._replay.initializeSampling()}_setup(){const e=Df(this._initialOptions);this._replay=new mt({options:e,recordingOptions:this._recordingOptions})}}dr.__initStatic();function Df(t){const e=w().getClient(),n=e&&e.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...Qe(t)};return n?(t.sessionSampleRate==null&&t.errorSampleRate==null&&n.replaysSessionSampleRate==null&&n.replaysOnErrorSampleRate==null&&console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set."),typeof n.replaysSessionSampleRate=="number"&&(r.sessionSampleRate=n.replaysSessionSampleRate),typeof n.replaysOnErrorSampleRate=="number"&&(r.errorSampleRate=n.replaysOnErrorSampleRate),r):(console.warn("SDK client is not available."),r)}function ls(t){return[...Nf,...t.map(e=>e.toLowerCase())]}function pe(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function Mf(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=pe(n);return s=>r.then(i=>s(i.transaction(e,"readwrite").objectStore(e)))}function Pi(t){return pe(t.getAllKeys())}function Of(t,e,n){return t(r=>Pi(r).then(s=>{if(!(s.length>=n))return r.put(e,Math.max(...s,0)+1),pe(r.transaction)}))}function Bf(t){return t(e=>Pi(e).then(n=>{if(n.length!==0)return pe(e.get(n[0])).then(r=>(e.delete(n[0]),pe(e.transaction).then(()=>r)))}))}function Uf(t){let e;function n(){return e==null&&(e=Mf(t.dbName||"sentry-offline",t.storeName||"queue")),e}return{insert:async r=>{try{const s=await Ts(r,t.textEncoder);await Of(n(),s,t.maxQueueSize||30)}catch{}},pop:async()=>{try{const r=await Bf(n());if(r)return Ha(r,t.textEncoder||new TextEncoder,t.textDecoder||new TextDecoder)}catch{}}}}function Lf(t){return e=>t({...e,createStore:Uf})}function Oh(t){return Lf(vo(t))}const us=1e6,ze=String(0),Ff="main";let Gi="",Yi="",Wi="",Pn=S.navigator&&S.navigator.userAgent||"",Hi="";const zf=S.navigator&&S.navigator.language||S.navigator&&S.navigator.languages&&S.navigator.languages[0]||"";function Pf(t){return typeof t=="object"&&t!==null&&"getHighEntropyValues"in t}const ds=S.navigator&&S.navigator.userAgentData;Pf(ds)&&ds.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(t=>{if(Gi=t.platform||"",Wi=t.architecture||"",Hi=t.model||"",Yi=t.platformVersion||"",t.fullVersionList&&t.fullVersionList.length>0){const e=t.fullVersionList[t.fullVersionList.length-1];Pn=`${e.brand} ${e.version}`}}).catch(t=>{});function Gf(t){return!("thread_metadata"in t)}function Yf(t){return Gf(t)?Zf(t):t}function Wf(t){const e=t&&t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id;return typeof e=="string"&&e.length!==32&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`[Profiling] Invalid traceId: ${e} on profiled event`),typeof e!="string"?"":e}function Hf(t,e,n){if(t.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(e==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${e} instead.`);const r=Wf(t),s=Yf(e),i=typeof t.start_timestamp=="number"?t.start_timestamp*1e3:Date.now(),a=typeof t.timestamp=="number"?t.timestamp*1e3:Date.now();return{event_id:n,timestamp:new Date(i).toISOString(),platform:"javascript",version:"1",release:t.release||"",environment:t.environment||Es,runtime:{name:"javascript",version:S.navigator.userAgent},os:{name:Gi,version:Yi,build_number:Pn},device:{locale:zf,model:Hi,manufacturer:Pn,architecture:Wi,is_emulator:!1},debug_meta:{images:Kf(e.resources)},profile:s,transactions:[{name:t.transaction||"",id:t.event_id||tn(),trace_id:r,active_thread_id:ze,relative_start_ns:"0",relative_end_ns:((a-i)*1e6).toFixed(0)}]}}function Zf(t){let e,n=0;const r={samples:[],stacks:[],frames:[],thread_metadata:{[ze]:{name:Ff}}};if(!t.samples.length)return r;const s=t.samples[0].timestamp,i=typeof performance.timeOrigin=="number"?performance.timeOrigin:wn||0,a=i-(wn||i);for(let o=0;o<t.samples.length;o++){const c=t.samples[o];if(c.stackId===void 0){e===void 0&&(e=n,r.stacks[e]=[],n++),r.samples[o]={elapsed_since_start_ns:((c.timestamp+a-s)*us).toFixed(0),stack_id:e,thread_id:ze};continue}let l=t.stacks[c.stackId];const u=[];for(;l;){u.push(l.frameId);const f=t.frames[l.frameId];r.frames[l.frameId]===void 0&&(r.frames[l.frameId]={function:f.name,abs_path:typeof f.resourceId=="number"?t.resources[f.resourceId]:void 0,lineno:f.line,colno:f.column}),l=l.parentId===void 0?void 0:t.stacks[l.parentId]}const d={elapsed_since_start_ns:((c.timestamp+a-s)*us).toFixed(0),stack_id:n,thread_id:ze};r.stacks[n]=u,r.samples[o]=d,n++}return r}function Vf(t,e){if(!e.length)return t;for(const n of e)t[1].push([{type:"profile"},n]);return t}function $f(t){const e=[];return $t(t,(n,r)=>{if(r==="transaction")for(let s=1;s<n.length;s++){const i=n[s];i&&i.contexts&&i.contexts.profile&&i.contexts.profile.profile_id&&e.push(n[s])}}),e}const fs=new WeakMap;function Kf(t){const e=xt._sentryDebugIds;if(!e)return[];const n=w();if(!n)return[];const r=n.getClient();if(!r)return[];const s=r.getOptions();if(!s)return[];const i=s.stackParser;if(!i)return[];let a;const o=fs.get(i);o?a=o:(a=new Map,fs.set(i,a));const c=Object.keys(e).reduce((u,d)=>{let f;const h=a.get(d);h?f=h:(f=i(d),a.set(d,f));for(let _=f.length-1;_>=0;_--){const p=f[_],g=p&&p.filename;if(p&&g){u[g]=e[d];break}}return u},{}),l=[];for(const u of t)u&&c[u]&&l.push({type:"sourcemap",code_file:u,debug_id:c[u]});return l}function jf(t){return typeof t!="number"&&typeof t!="boolean"||typeof t=="number"&&isNaN(t)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`),!1):t===!0||t===!1?!0:t<0||t>1?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${t}.`),!1):!0}function qf(t){return t.samples.length<2?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):t.frames.length?!0:((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Profiling] Discarding profile because it contains no frames"),!1)}function Jf(t,e,n){return qf(e)?Hf(n,e,t):null}const Tt=new Map;function Xf(t,e){if(Tt.set(t,e),Tt.size>30){const n=Tt.keys().next().value;Tt.delete(n)}}const hs=3e4;let ps=!1;function Qf(t){return typeof t=="function"}function Bh(t){return t?Zi(t):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Profiling] Transaction is undefined, skipping profiling"),t)}function Zi(t){const e=S.Profiler;if(!Qf(e))return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object."),t;if(ps)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Profiling] Profiling has been disabled for the duration of the current user session."),t;const n=w().getClient(),r=n&&n.getOptions();if(!r)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Profiling] Profiling disabled, no options found."),t;const s=r.profilesSampleRate;if(!jf(s))return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("[Profiling] Discarding profile because of invalid sample rate."),t;if(!s)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),t;if(!(s===!0?!0:Math.random()<s))return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(s)})`),t;const a=10,o=Math.floor(hs/a);let c;try{c=new e({sampleInterval:a,maxBufferSize:o})}catch{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&(m.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),m.log("[Profiling] Disabling profiling for current user session.")),ps=!0}if(!c)return t;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`[Profiling] started profiling transaction: ${t.name||t.description}`);const l=tn();async function u(){if(!t||!c)return null;const _=t.startChild({description:"profiler.stop",op:"profiler",origin:"auto.profiler.browser"});return c.stop().then(p=>(_.finish(),d&&(S.clearTimeout(d),d=void 0),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`[Profiling] stopped profiling of transaction: ${t.name||t.description}`),p?(Xf(l,p),null):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`[Profiling] profiler returned null profile for: ${t.name||t.description}`,"this may indicate an overlapping transaction or a call to stopProfiling with a profile title that was never started"),null))).catch(p=>(_.finish(),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Profiling] error while stopping profiler:",p),null))}let d=S.setTimeout(()=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Profiling] max profile duration elapsed, stopping profiling for:",t.name||t.description),u()},hs);const f=t.finish.bind(t);function h(){return t?(u().then(()=>{t.setContext("profile",{profile_id:l}),f()},()=>{f()}),t):f()}return t.finish=h,t}class fr{static __initStatic(){this.id="BrowserProfilingIntegration"}constructor(){this.name=fr.id}setupOnce(e,n){this.getCurrentHub=n;const r=this.getCurrentHub().getClient();r&&typeof r.on=="function"?(r.on("startTransaction",s=>{Zi(s)}),r.on("beforeEnvelope",s=>{if(!Tt.size)return;const i=$f(s);if(!i.length)return;const a=[];for(const o of i){const c=o&&o.contexts,l=c&&c.profile&&c.profile.profile_id;if(!l){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log("[Profiling] cannot find profile for a transaction without a profile context");continue}c&&c.profile&&delete c.profile;const u=Tt.get(l);if(!u){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.log(`[Profiling] Could not retrieve profile for transaction: ${l}`);continue}Tt.delete(l);const d=Jf(l,u,o);d&&a.push(d)}Vf(s,a)})):m.warn("[Profiling] Client does not support hooks, profiling will be disabled")}}fr.__initStatic();let Vi={};S.Sentry&&S.Sentry.Integrations&&(Vi=S.Sentry.Integrations);const Uh={...Vi,...Lo,...tl};function Lh(t){const e={_metadata:{},...t};e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.react",packages:[{name:"npm:@sentry/react",version:Ye}],version:Ye},Xc(e)}const $i="ui.react.render",th="ui.react.update",Ki="ui.react.mount",_s="/home/runner/work/sentry-javascript/sentry-javascript/packages/react/src/profiler.tsx",eh="unknown";class ji extends Q.Component{static __initStatic(){this.defaultProps={disabled:!1,includeRender:!0,includeUpdates:!0}}constructor(e){super(e);const{name:n,disabled:r=!1}=this.props;if(r)return;const s=qi();s&&(this._mountSpan=s.startChild({description:`<${n}>`,op:Ki,origin:"auto.ui.react.profiler"}))}componentDidMount(){this._mountSpan&&this._mountSpan.finish()}shouldComponentUpdate({updateProps:e,includeUpdates:n=!0}){if(n&&this._mountSpan&&e!==this.props.updateProps){const r=Object.keys(e).filter(s=>e[s]!==this.props.updateProps[s]);if(r.length>0){const s=In();this._updateSpan=this._mountSpan.startChild({data:{changedProps:r},description:`<${this.props.name}>`,op:th,origin:"auto.ui.react.profiler",startTimestamp:s})}}return!0}componentDidUpdate(){this._updateSpan&&(this._updateSpan.finish(),this._updateSpan=void 0)}componentWillUnmount(){const{name:e,includeRender:n=!0}=this.props;this._mountSpan&&n&&this._mountSpan.startChild({description:`<${e}>`,endTimestamp:In(),op:$i,origin:"auto.ui.react.profiler",startTimestamp:this._mountSpan.endTimestamp})}render(){return this.props.children}}ji.__initStatic();function Fh(t,e){const n=e&&e.name||t.displayName||t.name||eh,r=s=>Q.createElement(ji,{...e,name:n,updateProps:s,__self:this,__source:{fileName:_s,lineNumber:149}},Q.createElement(t,{...s,__self:this,__source:{fileName:_s,lineNumber:150}}));return r.displayName=`profiler(${n})`,en(r,t),r}function zh(t,e={disabled:!1,hasRenderSpan:!0}){const[n]=Q.useState(()=>{if(e&&e.disabled)return;const r=qi();if(r)return r.startChild({description:`<${t}>`,op:Ki,origin:"auto.ui.react.profiler"})});Q.useEffect(()=>(n&&n.finish(),()=>{n&&e.hasRenderSpan&&n.startChild({description:`<${t}>`,endTimestamp:In(),op:$i,origin:"auto.ui.react.profiler",startTimestamp:n.endTimestamp})}),[])}function qi(t=w()){if(t)return t.getScope().getTransaction()}const ms="/home/runner/work/sentry-javascript/sentry-javascript/packages/react/src/errorboundary.tsx";function nh(t){const e=t.match(/^([^.]+)/);return e!==null&&parseInt(e[0])>=17}const rh="unknown",gs={componentStack:null,error:null,eventId:null};function sh(t,e){const n=new WeakMap;function r(s,i){if(!n.has(s)){if(s.cause)return n.set(s,!0),r(s.cause,i);s.cause=i}}r(t,e)}class hr extends Q.Component{constructor(e){super(e),hr.prototype.__init.call(this),this.state=gs,this._openFallbackReportDialog=!0;const n=w().getClient();n&&n.on&&e.showDialog&&(this._openFallbackReportDialog=!1,n.on("afterSendEvent",r=>{!r.type&&r.event_id===this._lastEventId&&Gr({...e.dialogOptions,eventId:this._lastEventId})}))}componentDidCatch(e,{componentStack:n}){const{beforeCapture:r,onError:s,showDialog:i,dialogOptions:a}=this.props;Ds(o=>{if(nh(Q.version)&&Is(e)){const l=new Error(e.message);l.name=`React ErrorBoundary ${e.name}`,l.stack=n,sh(e,l)}r&&r(o,e,n),o.addEventProcessor(l=>(Vt(l,{handled:!1}),l));const c=nn(e,{contexts:{react:{componentStack:n}}});s&&s(e,n,c),i&&(this._lastEventId=c,this._openFallbackReportDialog&&Gr({...a,eventId:c})),this.setState({error:e,componentStack:n,eventId:c})})}componentDidMount(){const{onMount:e}=this.props;e&&e()}componentWillUnmount(){const{error:e,componentStack:n,eventId:r}=this.state,{onUnmount:s}=this.props;s&&s(e,n,r)}__init(){this.resetErrorBoundary=()=>{const{onReset:e}=this.props,{error:n,componentStack:r,eventId:s}=this.state;e&&e(n,r,s),this.setState(gs)}}render(){const{fallback:e,children:n}=this.props,r=this.state;if(r.error){let s;return typeof e=="function"?s=e({error:r.error,componentStack:r.componentStack,resetError:this.resetErrorBoundary,eventId:r.eventId}):s=e,Q.isValidElement(s)?s:(e&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("fallback did not produce a valid ReactElement"),null)}return typeof n=="function"?n():n}}function Ph(t,e){const n=t.displayName||t.name||rh,r=s=>Q.createElement(hr,{...e,__self:this,__source:{fileName:ms,lineNumber:234}},Q.createElement(t,{...s,__self:this,__source:{fileName:ms,lineNumber:235}}));return r.displayName=`errorBoundary(${n})`,en(r,t),r}const ih="redux.action",ah="info",oh={attachReduxState:!0,actionTransformer:t=>t,stateTransformer:t=>t||null};function Gh(t){const e={...oh,...t};return n=>(r,s)=>(e.attachReduxState&&Wn((a,o)=>{try{a.type===void 0&&a.contexts.state.state.type==="redux"&&(o.attachments=[...o.attachments||[],{filename:"redux_state.json",data:JSON.stringify(a.contexts.state.state.value)}])}catch{}return a}),n((a,o)=>{const c=r(a,o);return Xa(l=>{const u=e.actionTransformer(o);typeof u<"u"&&u!==null&&l.addBreadcrumb({category:ih,data:u,type:ah});const d=e.stateTransformer(c);if(typeof d<"u"&&d!==null){const h=w().getClient(),_=h&&h.getOptions(),p=_&&_.normalizeDepth||3,g={state:{type:"redux",value:d}};ws(g,"__sentry_override_normalization_depth__",3+p),l.setContext("state",g)}else l.setContext("state",null);const{configureScopeWithState:f}=e;typeof f=="function"&&f(l,c)}),c},s))}function Yh(t,e,n){return(r,s=!0,i=!0)=>{let a,o;s&&S&&S.location&&ys(e,S.location,n,(c,l="url")=>{o=c,a=r({name:o,op:"pageload",origin:"auto.pageload.react.reactrouterv3",tags:{"routing.instrumentation":"react-router-v3"},metadata:{source:l}})}),i&&t.listen&&t.listen(c=>{if(c.action==="PUSH"||c.action==="POP"){a&&a.finish();const l={"routing.instrumentation":"react-router-v3"};o&&(l.from=o),ys(e,c,n,(u,d="url")=>{o=u,a=r({name:o,op:"navigation",origin:"auto.navigation.react.reactrouterv3",tags:l,metadata:{source:d}})})}})}}function ys(t,e,n,r){let s=e.pathname;n({location:e,routes:t},(i,a,o)=>{if(i||!o)return r(s);const c=ch(o.routes||[]);return c.length===0||c==="/*"?r(s):(s=c,r(s,"route"))})}function ch(t){if(!Array.isArray(t)||t.length===0)return"";const e=t.filter(r=>!!r.path);let n=-1;for(let r=e.length-1;r>=0;r--){const s=e[r];if(s.path&&s.path.startsWith("/")){n=r;break}}return e.slice(n).filter(({path:r})=>!!r).map(({path:r})=>r).join("")}const lh="/home/runner/work/sentry-javascript/sentry-javascript/packages/react/src/reactrouter.tsx";let Gt;function Wh(t,e,n){return Ji(t,"react-router-v4",e,n)}function Hh(t,e,n){return Ji(t,"react-router-v5",e,n)}function Ji(t,e,n=[],r){function s(){if(t&&t.location)return t.location.pathname;if(S&&S.location)return S.location.pathname}function i(o){if(n.length===0||!r)return[o,"url"];const c=Xi(n,o,r);for(let l=0;l<c.length;l++)if(c[l].match.isExact)return[c[l].match.path,"route"];return[o,"url"]}const a={"routing.instrumentation":e};return(o,c=!0,l=!0)=>{const u=s();if(c&&u){const[d,f]=i(u);Gt=o({name:d,op:"pageload",origin:"auto.pageload.react.reactrouter",tags:a,metadata:{source:f}})}l&&t.listen&&t.listen((d,f)=>{if(f&&(f==="PUSH"||f==="POP")){Gt&&Gt.finish();const[h,_]=i(d.pathname);Gt=o({name:h,op:"navigation",origin:"auto.navigation.react.reactrouter",tags:a,metadata:{source:_}})}})}}function Xi(t,e,n,r=[]){return t.some(s=>{const i=s.path?n(e,s):r.length?r[r.length-1].match:uh(e);return i&&(r.push({route:s,match:i}),s.routes&&Xi(s.routes,e,n,r)),!!i}),r}function uh(t){return{path:"/",url:"/",params:{},isExact:t==="/"}}function Zh(t){const e=t.displayName||t.name,n=r=>(Gt&&r&&r.computedMatch&&r.computedMatch.isExact&&Gt.setName(r.computedMatch.path,"route"),Q.createElement(t,{...r,__self:this,__source:{fileName:lh,lineNumber:174}}));return n.displayName=`sentryRoute(${e})`,en(n,t),n}const Qi="/home/runner/work/sentry-javascript/sentry-javascript/packages/react/src/reactrouterv6.tsx";let St,Wt,Ht,Zt,Pe,te,_e,pr;const ta={"routing.instrumentation":"react-router-v6"};function Vh(t,e,n,r,s){return(i,a=!0,o=!0)=>{const c=S&&S.location&&S.location.pathname;a&&c&&(St=i({name:c,op:"pageload",origin:"auto.pageload.react.reactrouterv6",tags:ta,metadata:{source:"url"}})),Wt=t,Ht=e,Zt=n,te=s,Pe=r,_e=i,pr=o}}function ea(t,e,n,r=""){if(!t||t.length===0)return[e.pathname,"url"];let s="";if(n)for(let i=0;i<n.length;i++){const a=n[i],o=a.route;if(o){if(o.index)return[a.pathname,"route"];const c=o.path;if(c){const l=c[0]==="/"||s[s.length-1]==="/"?c:`/${c}`;if(s+=l,r+a.pathname===e.pathname)return Cr(s)!==Cr(a.pathname)&&s.slice(-2)!=="/*"?[r+l,"route"]:[r+s,"route"]}}}return[e.pathname,"url"]}function _r(t,e,n,r){const s=Array.isArray(n)?n:te(e,t,r);St&&s&&St.setName(...ea(e,t,s,r))}function mr(t,e,n,r,s){const i=Array.isArray(r)?r:te(e,t,s);if(pr&&(n==="PUSH"||n==="POP")&&i){St&&St.finish();const[a,o]=ea(e,t,i,s);St=_e({name:a,op:"navigation",origin:"auto.navigation.react.reactrouterv6",tags:ta,metadata:{source:o}})}}function $h(t){if(!Wt||!Ht||!Zt||!Pe||!te||!_e)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn(`reactRouterV6Instrumentation was unable to wrap Routes because of one or more missing parameters.
      useEffect: ${Wt}. useLocation: ${Ht}. useNavigationType: ${Zt}.
      createRoutesFromChildren: ${Pe}. matchRoutes: ${te}. customStartTransaction: ${_e}.`),t;let e=!0;const n=r=>{const s=Ht(),i=Zt();return Wt(()=>{const a=Pe(r.children);e?(_r(s,a),e=!1):mr(s,a,i)},[s,i]),Q.createElement(t,{...r,__self:this,__source:{fileName:Qi,lineNumber:209}})};return en(n,t),n}function Kh(t){if(!Wt||!Ht||!Zt||!te||!_e)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&m.warn("reactRouterV6Instrumentation was unable to wrap `useRoutes` because of one or more missing parameters."),t;let e=!0;const n=r=>{const{routes:s,locationArg:i}=r,a=t(s,i),o=Ht(),c=Zt(),l=typeof i=="string"||i&&i.pathname?i:o;return Wt(()=>{const u=typeof l=="string"?{pathname:l}:l;e?(_r(u,s),e=!1):mr(u,s,c)},[c,l]),a};return(r,s)=>Q.createElement(n,{routes:r,locationArg:s,__self:this,__source:{fileName:Qi,lineNumber:266}})}function jh(t){return function(e,n){const r=t(e,n),s=n&&n.basename;return r.state.historyAction==="POP"&&St&&_r(r.state.location,e,void 0,s),r.subscribe(i=>{const a=i.location;pr&&(i.historyAction==="PUSH"||i.historyAction==="POP")&&St&&mr(a,e,i.historyAction,void 0,s)}),r}}export{we as Breadcrumbs,nc as BrowserClient,fr as BrowserProfilingIntegration,Xh as BrowserTracing,Ce as Dedupe,hr as ErrorBoundary,ye as FunctionToString,Ot as GlobalHandlers,ve as HttpContext,Qh as Hub,be as InboundFilters,Uh as Integrations,Ie as LinkedErrors,jn as ModuleMetadata,ji as Profiler,dr as Replay,Ye as SDK_VERSION,da as Scope,Se as TryCatch,S as WINDOW,mh as addBreadcrumb,Wn as addGlobalEventProcessor,kh as addIntegration,tp as addTracingExtensions,_h as captureEvent,nn as captureException,ph as captureMessage,Mh as captureUserFeedback,mc as chromeStackLineParser,vh as close,Xa as configureScope,ep as continueTrace,Gh as createReduxEnhancer,zs as createTransport,tc as createUserFeedbackEnvelope,Jc as defaultIntegrations,np as defaultRequestInstrumentationOptions,Ac as defaultStackLineParsers,Tc as defaultStackParser,qo as eventFromException,Jo as eventFromMessage,Ws as exceptionFromError,rp as extractTraceparentData,Ih as flush,xh as forceLoad,Ec as geckoStackLineParser,sp as getActiveSpan,ca as getActiveTransaction,w as getCurrentHub,ip as getHubFromCarrier,Lh as init,ap as instrumentOutgoingRequests,Ch as lastEventId,Oh as makeBrowserOfflineTransport,ic as makeFetchTransport,op as makeMain,Rh as makeMultiplexedTransport,oc as makeXHRTransport,Nh as onLoad,Bh as onProfilingStartRouteTransaction,Ah as opera10StackLineParser,Th as opera11StackLineParser,Yh as reactRouterV3Instrumentation,Wh as reactRouterV4Instrumentation,Hh as reactRouterV5Instrumentation,Vh as reactRouterV6Instrumentation,Qa as setContext,yh as setExtra,gh as setExtras,hh as setMeasurement,Eh as setTag,bh as setTags,Sh as setUser,Gr as showReportDialog,cp as spanStatusfromHttpCode,lp as startInactiveSpan,up as startSpan,dp as startSpanManual,wh as startTransaction,fp as trace,zh as useProfiler,Ic as winjsStackLineParser,Ph as withErrorBoundary,Fh as withProfiler,Ds as withScope,$h as withSentryReactRouterV6Routing,Zh as withSentryRouting,Dh as wrap,jh as wrapCreateBrowserRouter,Kh as wrapUseRoutes};
