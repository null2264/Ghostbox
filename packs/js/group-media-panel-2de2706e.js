import{d as x,r as v,au as y,q as I,kT as G,O,kU as S,a as i,aC as T,F as c,y as k,aE as m}from"../index-4238fef4.js";import{W as D}from"./widget-77cd22a0.js";import{M as N}from"./media-item-e772bead.js";import"./arrow-right-b75290c7.js";import"./volume-08f8a8f1.js";import"./es.array.last-index-of-0e19cc23.js";var q=function(f){var r,e=f.group,s=x(),g=v.useState(!0),u=y(g,2),M=u[0],l=u[1],d=!!(e!=null&&(r=e.relationship)!==null&&r!==void 0&&r.member),n=e==null?void 0:e.locked,_=I(function(o){return e?G(o,e==null?void 0:e.id):O()}),A=function(a){if(a.type==="video")s(m("VIDEO",{media:a,status:a.status}));else{var t=a.getIn(["status","media_attachments"]),p=t.findIndex(function(h){return h.id===a.id});s(m("MEDIA",{media:t,index:p,status:a.status,account:a.account}))}};v.useEffect(function(){l(!0),e&&!e.deleted_at&&(d||!n)&&s(S(e.id)).then(function(){return l(!1)}).catch(function(){})},[e==null?void 0:e.id,d,n]);var E=function(){var a=_.slice(0,9);return a.isEmpty()?i(k,{size:"sm",theme:"muted"},void 0,i(c,{id:"media_panel.empty_message",defaultMessage:"No media found."})):i("div",{className:"grid grid-cols-3 gap-1"},void 0,a.map(function(t,p){return i(N,{attachment:t,onOpenMedia:A},"".concat(t.getIn(["status","id"]),"+").concat(t.id))}))};return n&&!d||e!=null&&e.deleted_at?null:i(D,{title:i(c,{id:"media_panel.title",defaultMessage:"Media"})},void 0,e&&i("div",{className:"w-full"},void 0,M?i(T,{}):E()))};export{q as default};
