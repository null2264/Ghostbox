import{d as N,r,aM as P,q as H,aV as $,f as Y,au as M,dd as w,et as j,a as e,R as o,F as u,y as l,a3 as d,H as c,A as g,hE as B,hD as G,d8 as y,hF as O,aD as Q,cL as J,gO as K,bR as U,kg as W,aE as X}from"../index-4238fef4.js";var te=function(k){var v=k.params,m=N(),x=r.useCallback(P(),[]),a=H(function(i){return x(i,{id:v.statusId})}),D=$(),E=D.tileServer,I=Y(),p=I.get("showSensitiveMedia"),F=r.useState(!!a),f=M(F,2),C=f[0],h=f[1],R=r.useState(w(a,p)),S=M(R,2),_=S[0],b=S[1];r.useEffect(function(){m(j(v.statusId)).then(function(){h(!0)}).catch(function(){h(!0)}),b(w(a,p))},[v.statusId]);var q=function(){b(!_)},T=function(t){t.preventDefault(),m(X("EVENT_MAP",{statusId:a.id}))},L=r.useCallback(function(){var i,t=a.event;if(!t.location)return null;var n=[e(o.Fragment,{},"event-name",t.location.get("name"))];(i=t.location.get("street"))!==null&&i!==void 0&&i.trim()&&n.push(e(o.Fragment,{},"event-street",e("br",{}),t.location.get("street")));var s=[t.location.get("postalCode"),t.location.get("locality"),t.location.get("country")].filter(function(A){return A}).join(", ");return s&&n.push(e(o.Fragment,{},"event-address",e("br",{}),s)),E&&t.location.get("latitude")&&n.push(e(o.Fragment,{},"event-map",e("br",{}),e("a",{href:"#",className:"text-primary-600 hover:underline dark:text-accent-blue",onClick:T},void 0,e(u,{id:"event.show_on_map",defaultMessage:"Show on map"})))),t.location&&e(d,{space:1},void 0,e(l,{size:"xl",weight:"bold"},void 0,e(u,{id:"event.location",defaultMessage:"Location"})),e(c,{space:2,alignItems:"center"},void 0,e(g,{src:B}),e(l,{},void 0,n)))},[a]),V=r.useCallback(function(){var i=a.event;if(!i.start_time)return null;var t=new Date(i.start_time),n=i.end_time&&new Date(i.end_time),s=n&&t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear();return e(d,{space:1},void 0,e(l,{size:"xl",weight:"bold"},void 0,e(u,{id:"event.date",defaultMessage:"Date"})),e(c,{space:2,alignItems:"center"},void 0,e(g,{src:G}),e(l,{},void 0,e(y,{value:t,year:"numeric",month:"long",day:"2-digit",weekday:"long",hour:"2-digit",minute:"2-digit"}),n&&o.createElement(o.Fragment,null," - ",e(y,{value:n,year:s?void 0:"numeric",month:s?void 0:"long",day:s?void 0:"2-digit",weekday:s?void 0:"long",hour:"2-digit",minute:"2-digit"})))))},[a]),z=r.useCallback(function(){var i;return(i=a.event)!==null&&i!==void 0&&i.links.size?e(d,{space:1},void 0,e(l,{size:"xl",weight:"bold"},void 0,e(u,{id:"event.website",defaultMessage:"External links"})),a.event.links.map(function(t){return e(c,{space:2,alignItems:"center"},void 0,e(g,{src:O}),e("a",{href:t.remote_url||t.url,className:"text-primary-600 hover:underline dark:text-accent-blue",target:"_blank"},void 0,(t.remote_url||t.url).replace(/^https?:\/\//,"")))})):null},[a]);return!a&&C?e(Q,{}):a?e(d,{className:"mt-4 sm:p-2",space:2},void 0,!!a.contentHtml.trim()&&e(d,{space:1},void 0,e(l,{size:"xl",weight:"bold"},void 0,e(u,{id:"event.description",defaultMessage:"Description"})),e(U,{status:a,collapsable:!1,translatable:!0}),e(W,{status:a})),e(K,{status:a,showMedia:_,onToggleVisibility:q}),a.quote&&a.pleroma.get("quote_visible",!0)&&e(J,{statusId:a.quote}),L(),V(),z()):null};export{te as default};
