const de=Object.prototype.toString;function Pe(e){switch(de.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return P(e,Error)}}function L(e,t){return de.call(e)===`[object ${t}]`}function ki(e){return L(e,"ErrorEvent")}function Gi(e){return L(e,"DOMError")}function Ui(e){return L(e,"DOMException")}function A(e){return L(e,"String")}function wi(e){return e===null||typeof e!="object"&&typeof e!="function"}function Ut(e){return L(e,"Object")}function xe(e){return typeof Event<"u"&&P(e,Event)}function Le(e){return typeof Element<"u"&&P(e,Element)}function He(e){return L(e,"RegExp")}function X(e){return!!(e&&e.then&&typeof e.then=="function")}function Oi(e){return Ut(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function Me(e){return typeof e=="number"&&e!==e}function P(e,t){try{return e instanceof t}catch{return!1}}function $e(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function Ft(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function Yi(e,t){if(!Array.isArray(e))return"";const n=[];for(let i=0;i<e.length;i++){const s=e[i];try{$e(s)?n.push("[VueViewModel]"):n.push(String(s))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function Fe(e,t,n=!1){return A(e)?He(t)?t.test(e):A(t)?n?e===t:e.includes(t):!1:!1}function je(e,t=[],n=!1){return t.some(i=>Fe(e,i,n))}function Q(e){return e&&e.Math==Math?e:void 0}const y=typeof globalThis=="object"&&Q(globalThis)||typeof window=="object"&&Q(window)||typeof self=="object"&&Q(self)||typeof global=="object"&&Q(global)||function(){return this}()||{};function V(){return y}function _e(e,t,n){const i=n||y,s=i.__SENTRY__=i.__SENTRY__||{};return s[e]||(s[e]=t())}const rt=V(),qe=80;function ut(e,t={}){if(!e)return"<unknown>";try{let n=e;const i=5,s=[];let r=0,a=0;const o=" > ",c=o.length;let u;const d=Array.isArray(t)?t:t.keyAttrs,f=!Array.isArray(t)&&t.maxStringLength||qe;for(;n&&r++<i&&(u=We(n,d),!(u==="html"||r>1&&a+s.length*c+u.length>=f));)s.push(u),a+=u.length,n=n.parentNode;return s.reverse().join(o)}catch{return"<unknown>"}}function We(e,t){const n=e,i=[];let s,r,a,o,c;if(!n||!n.tagName)return"";i.push(n.tagName.toLowerCase());const u=t&&t.length?t.filter(f=>n.getAttribute(f)).map(f=>[f,n.getAttribute(f)]):null;if(u&&u.length)u.forEach(f=>{i.push(`[${f[0]}="${f[1]}"]`)});else if(n.id&&i.push(`#${n.id}`),s=n.className,s&&A(s))for(r=s.split(/\s+/),c=0;c<r.length;c++)i.push(`.${r[c]}`);const d=["aria-label","type","name","title","alt"];for(c=0;c<d.length;c++)a=d[c],o=n.getAttribute(a),o&&i.push(`[${a}="${o}"]`);return i.join("")}function Ci(){try{return rt.document.location.href}catch{return""}}function Xe(e){return rt.document&&rt.document.querySelector?rt.document.querySelector(e):null}const Ve="Sentry Logger ",Et=["debug","info","warn","error","log","assert","trace"],dt={};function fe(e){if(!("console"in y))return e();const t=y.console,n={},i=Object.keys(dt);i.forEach(s=>{const r=dt[s];n[s]=t[s],t[s]=r});try{return e()}finally{i.forEach(s=>{t[s]=n[s]})}}function ze(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?Et.forEach(n=>{t[n]=(...i)=>{e&&fe(()=>{y.console[n](`${Ve}[${n}]:`,...i)})}}):Et.forEach(n=>{t[n]=()=>{}}),t}const _=ze();function k(e,t,n){if(!(t in e))return;const i=e[t],s=n(i);typeof s=="function"&&Je(s,i),e[t]=s}function wt(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Je(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,wt(e,"__sentry_original__",t)}catch{}}function Ai(e){return e.__sentry_original__}function Pi(e){return Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function Ke(e){if(Pe(e))return{message:e.message,name:e.name,stack:e.stack,...qt(e)};if(xe(e)){const t={type:e.type,target:jt(e.target),currentTarget:jt(e.currentTarget),...qt(e)};return typeof CustomEvent<"u"&&P(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function jt(e){try{return Le(e)?ut(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function qt(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function xi(e,t=40){const n=Object.keys(Ke(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Ft(n[0],t);for(let i=n.length;i>0;i--){const s=n.slice(0,i).join(", ");if(!(s.length>t))return i===n.length?s:Ft(s,t)}return""}function w(e){return St(e,new Map)}function St(e,t){if(Ut(e)){const n=t.get(e);if(n!==void 0)return n;const i={};t.set(e,i);for(const s of Object.keys(e))typeof e[s]<"u"&&(i[s]=St(e[s],t));return i}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const i=[];return t.set(e,i),e.forEach(s=>{i.push(St(s,t))}),i}return e}const he=50,Wt=/\(error: (.*)\)/,Xt=/captureMessage|captureException/;function Qe(...e){const t=e.sort((n,i)=>n[0]-i[0]).map(n=>n[1]);return(n,i=0)=>{const s=[],r=n.split(`
`);for(let a=i;a<r.length;a++){const o=r[a];if(o.length>1024)continue;const c=Wt.test(o)?o.replace(Wt,"$1"):o;if(!c.match(/\S*Error: /)){for(const u of t){const d=u(c);if(d){s.push(d);break}}if(s.length>=he)break}}return Ze(s)}}function Li(e){return Array.isArray(e)?Qe(...e):e}function Ze(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),Xt.test(t[t.length-1].function||"")&&(t.pop(),Xt.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,he).map(n=>({...n,filename:n.filename||t[t.length-1].filename,function:n.function||"?"}))}const mt="<anonymous>";function le(e){try{return!e||typeof e!="function"?mt:e.name||mt}catch{return mt}}const yt=V();function tn(){if(!("fetch"in yt))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function Vt(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function en(){if(!tn())return!1;if(Vt(yt.fetch))return!0;let e=!1;const t=yt.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Vt(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}const Z=V();function nn(){const e=Z.chrome,t=e&&e.app&&e.app.runtime,n="history"in Z&&!!Z.history.pushState&&!!Z.history.replaceState;return!t&&n}const S=V(),$="__sentry_xhr_v2__",F={},zt={};function sn(e){if(!zt[e])switch(zt[e]=!0,e){case"console":rn();break;case"dom":hn();break;case"xhr":cn();break;case"fetch":an();break;case"history":un();break;case"error":ln();break;case"unhandledrejection":pn();break;default:(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn("unknown instrumentation type:",e);return}}function W(e,t){F[e]=F[e]||[],F[e].push(t),sn(e)}function D(e,t){if(!(!e||!F[e]))for(const n of F[e]||[])try{n(t)}catch(i){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${le(n)}
Error:`,i)}}function rn(){"console"in y&&Et.forEach(function(e){e in y.console&&k(y.console,e,function(t){return dt[e]=t,function(...n){D("console",{args:n,level:e});const i=dt[e];i&&i.apply(y.console,n)}})})}function an(){en()&&k(y,"fetch",function(e){return function(...t){const{method:n,url:i}=on(t),s={args:t,fetchData:{method:n,url:i},startTimestamp:Date.now()};return D("fetch",{...s}),e.apply(y,t).then(r=>(D("fetch",{...s,endTimestamp:Date.now(),response:r}),r),r=>{throw D("fetch",{...s,endTimestamp:Date.now(),error:r}),r})}})}function bt(e,t){return!!e&&typeof e=="object"&&!!e[t]}function Jt(e){return typeof e=="string"?e:e?bt(e,"url")?e.url:e.toString?e.toString():"":""}function on(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,i]=e;return{url:Jt(n),method:bt(i,"method")?String(i.method).toUpperCase():"GET"}}const t=e[0];return{url:Jt(t),method:bt(t,"method")?String(t.method).toUpperCase():"GET"}}function cn(){if(!S.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;k(e,"open",function(t){return function(...n){const i=Date.now(),s=n[1],r=this[$]={method:A(n[0])?n[0].toUpperCase():n[0],url:n[1],request_headers:{}};A(s)&&r.method==="POST"&&s.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const a=()=>{const o=this[$];if(o&&this.readyState===4){try{o.status_code=this.status}catch{}D("xhr",{args:n,endTimestamp:Date.now(),startTimestamp:i,xhr:this})}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?k(this,"onreadystatechange",function(o){return function(...c){return a(),o.apply(this,c)}}):this.addEventListener("readystatechange",a),k(this,"setRequestHeader",function(o){return function(...c){const[u,d]=c,f=this[$];return f&&(f.request_headers[u.toLowerCase()]=d),o.apply(this,c)}}),t.apply(this,n)}}),k(e,"send",function(t){return function(...n){const i=this[$];return i&&n[0]!==void 0&&(i.body=n[0]),D("xhr",{args:n,startTimestamp:Date.now(),xhr:this}),t.apply(this,n)}})}let tt;function un(){if(!nn())return;const e=S.onpopstate;S.onpopstate=function(...n){const i=S.location.href,s=tt;if(tt=i,D("history",{from:s,to:i}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...i){const s=i.length>2?i[2]:void 0;if(s){const r=tt,a=String(s);tt=a,D("history",{from:r,to:a})}return n.apply(this,i)}}k(S.history,"pushState",t),k(S.history,"replaceState",t)}const dn=1e3;let Kt,et;function _n(e,t){if(e.type!==t.type)return!1;try{if(e.target!==t.target)return!1}catch{}return!0}function fn(e){if(e.type!=="keypress")return!1;try{const t=e.target;if(!t||!t.tagName)return!0;if(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)return!1}catch{}return!0}function Qt(e,t=!1){return n=>{if(!n||n._sentryCaptured||fn(n))return;wt(n,"_sentryCaptured",!0);const i=n.type==="keypress"?"input":n.type;(et===void 0||!_n(et,n))&&(e({event:n,name:i,global:t}),et=n),clearTimeout(Kt),Kt=S.setTimeout(()=>{et=void 0},dn)}}function hn(){if(!S.document)return;const e=D.bind(null,"dom"),t=Qt(e,!0);S.document.addEventListener("click",t,!1),S.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const i=S[n]&&S[n].prototype;!i||!i.hasOwnProperty||!i.hasOwnProperty("addEventListener")||(k(i,"addEventListener",function(s){return function(r,a,o){if(r==="click"||r=="keypress")try{const c=this,u=c.__sentry_instrumentation_handlers__=c.__sentry_instrumentation_handlers__||{},d=u[r]=u[r]||{refCount:0};if(!d.handler){const f=Qt(e);d.handler=f,s.call(this,r,f,o)}d.refCount++}catch{}return s.call(this,r,a,o)}}),k(i,"removeEventListener",function(s){return function(r,a,o){if(r==="click"||r=="keypress")try{const c=this,u=c.__sentry_instrumentation_handlers__||{},d=u[r];d&&(d.refCount--,d.refCount<=0&&(s.call(this,r,d.handler,o),d.handler=void 0,delete u[r]),Object.keys(u).length===0&&delete c.__sentry_instrumentation_handlers__)}catch{}return s.call(this,r,a,o)}}))})}let nt=null;function ln(){nt=S.onerror,S.onerror=function(e,t,n,i,s){return D("error",{column:i,error:s,line:n,msg:e,url:t}),nt&&!nt.__SENTRY_LOADER__?nt.apply(this,arguments):!1},S.onerror.__SENTRY_INSTRUMENTED__=!0}let it=null;function pn(){it=S.onunhandledrejection,S.onunhandledrejection=function(e){return D("unhandledrejection",e),it&&!it.__SENTRY_LOADER__?it.apply(this,arguments):!0},S.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function mn(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Hi(){return"npm"}function gn(){return!mn()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function at(e,t){return e.require(t)}function Mi(e){let t;try{t=at(module,e)}catch{}try{const{cwd:n}=at(module,"process");t=at(module,`${n()}/node_modules/${e}`)}catch{}return t}function b(){const e=y,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>t.getRandomValues(new Uint8Array(1))[0])}catch{}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,i=>(i^(n()&15)>>i/4).toString(16))}function pe(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function $i(e){const{message:t,event_id:n}=e;if(t)return t;const i=pe(e);return i?i.type&&i.value?`${i.type}: ${i.value}`:i.type||i.value||n||"<unknown>":n||"<unknown>"}function Fi(e,t,n){const i=e.exception=e.exception||{},s=i.values=i.values||[],r=s[0]=s[0]||{};r.value||(r.value=t||""),r.type||(r.type=n||"Error")}function ji(e,t){const n=pe(e);if(!n)return;const i={type:"generic",handled:!0},s=n.mechanism;if(n.mechanism={...i,...s,...t},t&&"data"in t){const r={...s&&s.data,...t.data};n.mechanism.data=r}}function qi(e){if(e&&e.__sentry_captured__)return!0;try{wt(e,"__sentry_captured__",!0)}catch{}return!1}function Tn(e){return Array.isArray(e)?e:[e]}var U;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const i=2;e[e.REJECTED=i]="REJECTED"})(U||(U={}));function Wi(e){return new B(t=>{t(e)})}function Xi(e){return new B((t,n)=>{n(e)})}class B{constructor(t){B.prototype.__init.call(this),B.prototype.__init2.call(this),B.prototype.__init3.call(this),B.prototype.__init4.call(this),this._state=U.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new B((i,s)=>{this._handlers.push([!1,r=>{if(!t)i(r);else try{i(t(r))}catch(a){s(a)}},r=>{if(!n)s(r);else try{i(n(r))}catch(a){s(a)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new B((n,i)=>{let s,r;return this.then(a=>{r=!1,s=a,t&&t()},a=>{r=!0,s=a,t&&t()}).then(()=>{if(r){i(s);return}n(s)})})}__init(){this._resolve=t=>{this._setResult(U.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(U.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===U.PENDING){if(X(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===U.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===U.RESOLVED&&n[1](this._value),this._state===U.REJECTED&&n[2](this._value),n[0]=!0)})}}}function Vi(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",i=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:i,relative:t[5]+n+i}}function zi(e){return e.split(/[\?#]/,1)[0]}function Ji(e){return e.split(/\\?\//).filter(t=>t.length>0&&t!==",").length}const me=V(),Rt={nowSeconds:()=>Date.now()/1e3};function En(){const{performance:e}=me;if(!e||!e.now)return;const t=Date.now()-e.now();return{now:()=>e.now(),timeOrigin:t}}function Sn(){try{return at(module,"perf_hooks").performance}catch{return}}const gt=gn()?Sn():En(),Zt=gt===void 0?Rt:{nowSeconds:()=>(gt.timeOrigin+gt.now())/1e3},ge=Rt.nowSeconds.bind(Rt),O=Zt.nowSeconds.bind(Zt),G=(()=>{const{performance:e}=me;if(!e||!e.now)return;const t=3600*1e3,n=e.now(),i=Date.now(),s=e.timeOrigin?Math.abs(e.timeOrigin+n-i):t,r=s<t,a=e.timing&&e.timing.navigationStart,c=typeof a=="number"?Math.abs(a+n-i):t,u=c<t;return r||u?s<=c?e.timeOrigin:a:i})(),Nt="baggage",Te="sentry-",yn=/^sentry-/,bn=8192;function Rn(e){if(!A(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce((i,s)=>{const r=te(s);return{...i,...r}},{});else{if(!e)return;t=te(e)}const n=Object.entries(t).reduce((i,[s,r])=>{if(s.match(yn)){const a=s.slice(Te.length);i[a]=r}return i},{});if(Object.keys(n).length>0)return n}function Dt(e){if(!e)return;const t=Object.entries(e).reduce((n,[i,s])=>(s&&(n[`${Te}${i}`]=s),n),{});return Nn(t)}function te(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,i])=>(t[n]=i,t),{})}function Nn(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,i],s)=>{const r=`${encodeURIComponent(n)}=${encodeURIComponent(i)}`,a=s===0?r:`${t},${r}`;return a.length>bn?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn(`Not adding key: ${n} with val: ${i} to baggage header due to exceeding baggage size limits.`),t):a},"")}const Dn=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function vn(e){if(!e)return;const t=e.match(Dn);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function Ee(e,t){const n=vn(e),i=Rn(t),{traceId:s,parentSpanId:r,parentSampled:a}=n||{},o={traceId:s||b(),spanId:b().substring(16),sampled:a};return r&&(o.parentSpanId=r),i&&(o.dsc=i),{traceparentData:n,dynamicSamplingContext:i,propagationContext:o}}function Ot(e=b(),t=b().substring(16),n){let i="";return n!==void 0&&(i=n?"-1":"-0"),`${e}-${t}${i}`}const Se="production";function ye(){return _e("globalEventProcessors",()=>[])}function Ki(e){ye().push(e)}function vt(e,t,n,i=0){return new B((s,r)=>{const a=e[i];if(t===null||typeof a!="function")s(t);else{const o=a({...t},n);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&a.id&&o===null&&_.log(`Event processor "${a.id}" dropped event`),X(o)?o.then(c=>vt(e,c,n,i+1).then(s)).then(null,r):vt(e,o,n,i+1).then(s).then(null,r)}})}function In(e){const t=O(),n={sid:b(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>kn(n)};return e&&ft(n,e),n}function ft(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||O(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:b()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Bn(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),ft(e,n)}function kn(e){return w({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}const Gn=100;class C{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=ee()}static clone(t){const n=new C;return t&&(n._breadcrumbs=[...t._breadcrumbs],n._tags={...t._tags},n._extra={...t._extra},n._contexts={...t._contexts},n._user=t._user,n._level=t._level,n._span=t._span,n._session=t._session,n._transactionName=t._transactionName,n._fingerprint=t._fingerprint,n._eventProcessors=[...t._eventProcessors],n._requestSession=t._requestSession,n._attachments=[...t._attachments],n._sdkProcessingMetadata={...t._sdkProcessingMetadata},n._propagationContext={...t._propagationContext}),n}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{},this._session&&ft(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this.getSpan();return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;if(typeof t=="function"){const n=t(this);return n instanceof C?n:this}return t instanceof C?(this._tags={...this._tags,...t._tags},this._extra={...this._extra,...t._extra},this._contexts={...this._contexts,...t._contexts},t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession),t._propagationContext&&(this._propagationContext=t._propagationContext)):Ut(t)&&(t=t,this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=ee(),this}addBreadcrumb(t,n){const i=typeof n=="number"?n:Gn;if(i<=0)return this;const s={timestamp:ge(),...t},r=this._breadcrumbs;return r.push(s),this._breadcrumbs=r.length>i?r.slice(-i):r,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(t,n={},i){if(this._extra&&Object.keys(this._extra).length&&(t.extra={...this._extra,...t.extra}),this._tags&&Object.keys(this._tags).length&&(t.tags={...this._tags,...t.tags}),this._user&&Object.keys(this._user).length&&(t.user={...this._user,...t.user}),this._contexts&&Object.keys(this._contexts).length&&(t.contexts={...this._contexts,...t.contexts}),this._level&&(t.level=this._level),this._transactionName&&(t.transaction=this._transactionName),this._span){t.contexts={trace:this._span.getTraceContext(),...t.contexts};const a=this._span.transaction;if(a){t.sdkProcessingMetadata={dynamicSamplingContext:a.getDynamicSamplingContext(),...t.sdkProcessingMetadata};const o=a.name;o&&(t.tags={transaction:o,...t.tags})}}this._applyFingerprint(t);const s=this._getBreadcrumbs(),r=[...t.breadcrumbs||[],...s];return t.breadcrumbs=r.length>0?r:void 0,t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},vt([...i||[],...ye(),...this._eventProcessors],t,n)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}_getBreadcrumbs(){return this._breadcrumbs}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}_applyFingerprint(t){t.fingerprint=t.fingerprint?Tn(t.fingerprint):[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}}function ee(){return{traceId:b(),spanId:b().substring(16)}}const be=4,Un=100;class Re{constructor(t,n=new C,i=be){this._version=i,this._stack=[{scope:n}],t&&this.bindClient(t)}isOlderThan(t){return this._version<t}bindClient(t){const n=this.getStackTop();n.client=t,t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=C.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){const n=this.pushScope();try{t(n)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,n){const i=this._lastEventId=n&&n.event_id?n.event_id:b(),s=new Error("Sentry syntheticException");return this._withClient((r,a)=>{r.captureException(t,{originalException:t,syntheticException:s,...n,event_id:i},a)}),i}captureMessage(t,n,i){const s=this._lastEventId=i&&i.event_id?i.event_id:b(),r=new Error(t);return this._withClient((a,o)=>{a.captureMessage(t,n,{originalException:t,syntheticException:r,...i,event_id:s},o)}),s}captureEvent(t,n){const i=n&&n.event_id?n.event_id:b();return t.type||(this._lastEventId=i),this._withClient((s,r)=>{s.captureEvent(t,{...n,event_id:i},r)}),i}lastEventId(){return this._lastEventId}addBreadcrumb(t,n){const{scope:i,client:s}=this.getStackTop();if(!s)return;const{beforeBreadcrumb:r=null,maxBreadcrumbs:a=Un}=s.getOptions&&s.getOptions()||{};if(a<=0)return;const c={timestamp:ge(),...t},u=r?fe(()=>r(c,n)):c;u!==null&&(s.emit&&s.emit("beforeAddBreadcrumb",u,n),i.addBreadcrumb(u,a))}setUser(t){this.getScope().setUser(t)}setTags(t){this.getScope().setTags(t)}setExtras(t){this.getScope().setExtras(t)}setTag(t,n){this.getScope().setTag(t,n)}setExtra(t,n){this.getScope().setExtra(t,n)}setContext(t,n){this.getScope().setContext(t,n)}configureScope(t){const{scope:n,client:i}=this.getStackTop();i&&t(n)}run(t){const n=ne(this);try{t(this)}finally{ne(n)}}getIntegration(t){const n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,n){const i=this._callExtensionMethod("startTransaction",t,n);if((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&!i){const s=this.getClient();console.warn(s?`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`:"Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return i}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,i=n.getSession();i&&Bn(i),this._sendSessionUpdate(),n.setSession()}startSession(t){const{scope:n,client:i}=this.getStackTop(),{release:s,environment:r=Se}=i&&i.getOptions()||{},{userAgent:a}=y.navigator||{},o=In({release:s,environment:r,user:n.getUser(),...a&&{userAgent:a},...t}),c=n.getSession&&n.getSession();return c&&c.status==="ok"&&ft(c,{status:"exited"}),this.endSession(),n.setSession(o),o}shouldSendDefaultPii(){const t=this.getClient(),n=t&&t.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:n}=this.getStackTop(),i=t.getSession();i&&n&&n.captureSession&&n.captureSession(i)}_withClient(t){const{scope:n,client:i}=this.getStackTop();i&&t(i,n)}_callExtensionMethod(t,...n){const s=z().__SENTRY__;if(s&&s.extensions&&typeof s.extensions[t]=="function")return s.extensions[t].apply(this,n);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function z(){return y.__SENTRY__=y.__SENTRY__||{extensions:{},hub:void 0},y}function ne(e){const t=z(),n=It(t);return Ne(t,e),n}function R(){const e=z();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return wn(e)}function wn(e=z()){return(!On(e)||It(e).isOlderThan(be))&&Ne(e,new Re),It(e)}function On(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function It(e){return _e("hub",()=>new Re,e)}function Ne(e,t){if(!e)return!1;const n=e.__SENTRY__=e.__SENTRY__||{};return n.hub=t,!0}function J(e){return(e||R()).getScope().getTransaction()}let ie=!1;function Yn(){ie||(ie=!0,W("error",Bt),W("unhandledrejection",Bt))}function Bt(){const e=J();if(e){const t="internal_error";(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}Bt.tag="sentry_tracingErrorCallback";class De{constructor(t=1e3){this._maxlen=t,this.spans=[]}add(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}}class Yt{constructor(t={}){this.traceId=t.traceId||b(),this.spanId=t.spanId||b().substring(16),this.startTimestamp=t.startTimestamp||O(),this.tags=t.tags||{},this.data=t.data||{},this.instrumenter=t.instrumenter||"sentry",this.origin=t.origin||"manual",t.parentSpanId&&(this.parentSpanId=t.parentSpanId),"sampled"in t&&(this.sampled=t.sampled),t.op&&(this.op=t.op),t.description&&(this.description=t.description),t.name&&(this.description=t.name),t.status&&(this.status=t.status),t.endTimestamp&&(this.endTimestamp=t.endTimestamp)}get name(){return this.description||""}set name(t){this.setName(t)}startChild(t){const n=new Yt({...t,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n),n.transaction=this.transaction,(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&n.transaction){const i=t&&t.op||"< unknown op >",s=n.transaction.name||"< unknown name >",r=n.transaction.spanId,a=`[Tracing] Starting '${i}' span on transaction '${s}' (${r}).`;n.transaction.metadata.spanMetadata[n.spanId]={logMessage:a},_.log(a)}return n}setTag(t,n){return this.tags={...this.tags,[t]:n},this}setData(t,n){return this.data={...this.data,[t]:n},this}setStatus(t){return this.status=t,this}setHttpStatus(t){this.setTag("http.status_code",String(t)),this.setData("http.response.status_code",t);const n=Cn(t);return n!=="unknown_error"&&this.setStatus(n),this}setName(t){this.description=t}isSuccess(){return this.status==="ok"}finish(t){if((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage:n}=this.transaction.metadata.spanMetadata[this.spanId];n&&_.log(n.replace("Starting","Finishing"))}this.endTimestamp=typeof t=="number"?t:O()}toTraceparent(){return Ot(this.traceId,this.spanId,this.sampled)}toContext(){return w({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(t){return this.data=t.data||{},this.description=t.description,this.endTimestamp=t.endTimestamp,this.op=t.op,this.parentSpanId=t.parentSpanId,this.sampled=t.sampled,this.spanId=t.spanId||this.spanId,this.startTimestamp=t.startTimestamp||this.startTimestamp,this.status=t.status,this.tags=t.tags||{},this.traceId=t.traceId||this.traceId,this}getTraceContext(){return w({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})}toJSON(){return w({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId,origin:this.origin})}}function Cn(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}function Ct(e,t,n){const i=t.getOptions(),{publicKey:s}=t.getDsn()||{},{segment:r}=n&&n.getUser()||{},a=w({environment:i.environment||Se,release:i.release,user_segment:r,public_key:s,trace_id:e});return t.emit&&t.emit("createDsc",a),a}class ve extends Yt{constructor(t,n){super(t),delete this.description,this._measurements={},this._contexts={},this._hub=n||R(),this._name=t.name||"",this.metadata={source:"custom",...t.metadata,spanMetadata:{}},this._trimEnd=t.trimEnd,this.transaction=this;const i=this.metadata.dynamicSamplingContext;i&&(this._frozenDynamicSamplingContext={...i})}get name(){return this._name}set name(t){this.setName(t)}setName(t,n="custom"){this._name=t,this.metadata.source=n}initSpanRecorder(t=1e3){this.spanRecorder||(this.spanRecorder=new De(t)),this.spanRecorder.add(this)}setContext(t,n){n===null?delete this._contexts[t]:this._contexts[t]=n}setMeasurement(t,n,i=""){this._measurements[t]={value:n,unit:i}}setMetadata(t){this.metadata={...this.metadata,...t}}finish(t){const n=this._finishTransaction(t);if(n)return this._hub.captureEvent(n)}toContext(){const t=super.toContext();return w({...t,name:this.name,trimEnd:this._trimEnd})}updateWithContext(t){return super.updateWithContext(t),this.name=t.name||"",this._trimEnd=t.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;const t=this._hub||R(),n=t.getClient();if(!n)return{};const i=t.getScope(),s=Ct(this.traceId,n,i),r=this.metadata.sampleRate;r!==void 0&&(s.sample_rate=`${r}`);const a=this.metadata.source;return a&&a!=="url"&&(s.transaction=this.name),this.sampled!==void 0&&(s.sampled=String(this.sampled)),s}setHub(t){this._hub=t}_finishTransaction(t){if(this.endTimestamp!==void 0)return;this.name||((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),super.finish(t);const n=this._hub.getClient();if(n&&n.emit&&n.emit("finishTransaction",this),this.sampled!==!0){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","transaction");return}const i=this.spanRecorder?this.spanRecorder.spans.filter(o=>o!==this&&o.endTimestamp):[];this._trimEnd&&i.length>0&&(this.endTimestamp=i.reduce((o,c)=>o.endTimestamp&&c.endTimestamp?o.endTimestamp>c.endTimestamp?o:c:o).endTimestamp);const s=this.metadata,r={contexts:{...this._contexts,trace:this.getTraceContext()},spans:i,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...s,dynamicSamplingContext:this.getDynamicSamplingContext()},...s.source&&{transaction_info:{source:s.source}}};return Object.keys(this._measurements).length>0&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),r.measurements=this._measurements),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),r}}const ot={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},An="finishReason",Y=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class Pn extends De{constructor(t,n,i,s){super(s),this._pushActivity=t,this._popActivity=n,this.transactionSpanId=i}add(t){t.spanId!==this.transactionSpanId&&(t.finish=n=>{t.endTimestamp=typeof n=="number"?n:O(),this._popActivity(t.spanId)},t.endTimestamp===void 0&&this._pushActivity(t.spanId)),super.add(t)}}class xn extends ve{constructor(t,n,i=ot.idleTimeout,s=ot.finalTimeout,r=ot.heartbeatInterval,a=!1){super(t,n),this._idleHub=n,this._idleTimeout=i,this._finalTimeout=s,this._heartbeatInterval=r,this._onScope=a,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=Y[4],a&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`Setting idle transaction on scope. Span ID: ${this.spanId}`),n.configureScope(o=>o.setSpan(this))),this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=Y[3],this.finish())},this._finalTimeout)}finish(t=O()){if(this._finished=!0,this.activities={},this.op==="ui.action.click"&&this.setTag(An,this._finishReason),this.spanRecorder){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Tracing] finishing IdleTransaction",new Date(t*1e3).toISOString(),this.op);for(const n of this._beforeFinishCallbacks)n(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter(n=>{if(n.spanId===this.spanId)return!0;n.endTimestamp||(n.endTimestamp=t,n.setStatus("cancelled"),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(n,void 0,2)));const i=n.startTimestamp<t,s=(this._finalTimeout+this._idleTimeout)/1e3,r=n.endTimestamp-this.startTimestamp<s;if(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__){const a=JSON.stringify(n,void 0,2);i?r||_.log("[Tracing] discarding Span since it finished after Transaction final timeout",a):_.log("[Tracing] discarding Span since it happened after Transaction was finished",a)}return i&&r}),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Tracing] flushing IdleTransaction")}else(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Tracing] No active IdleTransaction");if(this._onScope){const n=this._idleHub.getScope();n.getTransaction()===this&&n.setSpan(void 0)}return super.finish(t)}registerBeforeFinishCallback(t){this._beforeFinishCallbacks.push(t)}initSpanRecorder(t){if(!this.spanRecorder){const n=s=>{this._finished||this._pushActivity(s)},i=s=>{this._finished||this._popActivity(s)};this.spanRecorder=new Pn(n,i,this.spanId,t),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(t,{restartOnChildSpanChange:n}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=n===!1,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,Object.keys(this.activities).length===0&&this._idleTimeoutCanceledPermanently&&(this._finishReason=Y[5],this.finish(t)))}setFinishReason(t){this._finishReason=t}_restartIdleTimeout(t){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{!this._finished&&Object.keys(this.activities).length===0&&(this._finishReason=Y[1],this.finish(t))},this._idleTimeout)}_pushActivity(t){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] pushActivity: ${t}`),this.activities[t]=!0,(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(t){if(this.activities[t]&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] popActivity ${t}`),delete this.activities[t],(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){const n=O();this._idleTimeoutCanceledPermanently?(this._finishReason=Y[5],this.finish(n)):this._restartIdleTimeout(n+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const t=Object.keys(this.activities).join("");t===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=t,this._heartbeatCounter>=3?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=Y[0],this.finish()):this._pingHeartbeat()}_pingHeartbeat(){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}}function K(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=R().getClient(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function Ie(e,t,n){if(!K(t))return e.sampled=!1,e;if(e.sampled!==void 0)return e.setMetadata({sampleRate:Number(e.sampled)}),e;let i;return typeof t.tracesSampler=="function"?(i=t.tracesSampler(n),e.setMetadata({sampleRate:Number(i)})):n.parentSampled!==void 0?i=n.parentSampled:typeof t.tracesSampleRate<"u"?(i=t.tracesSampleRate,e.setMetadata({sampleRate:Number(i)})):(i=1,e.setMetadata({sampleRate:i})),Ln(i)?i?(e.sampled=Math.random()<i,e.sampled?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] starting ${e.op} transaction - ${e.name}`),e):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(i)})`),e)):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),e.sampled=!1,e):((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function Ln(e){return Me(e)||!(typeof e=="number"||typeof e=="boolean")?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e<0||e>1?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function Hn(){const t=this.getScope().getSpan();return t?{"sentry-trace":t.toTraceparent()}:{}}function Mn(e,t){const n=this.getClient(),i=n&&n.getOptions()||{},s=i.instrumenter||"sentry",r=e.instrumenter||"sentry";s!==r&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.error(`A transaction was started with instrumenter=\`${r}\`, but the SDK is configured with the \`${s}\` instrumenter.
The transaction will not be sampled. Please use the ${s} instrumentation to start transactions.`),e.sampled=!1);let a=new ve(e,this);return a=Ie(a,i,{parentSampled:e.parentSampled,transactionContext:e,...t}),a.sampled&&a.initSpanRecorder(i._experiments&&i._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",a),a}function se(e,t,n,i,s,r,a){const o=e.getClient(),c=o&&o.getOptions()||{};let u=new xn(t,e,n,i,a,s);return u=Ie(u,c,{parentSampled:t.parentSampled,transactionContext:t,...r}),u.sampled&&u.initSpanRecorder(c._experiments&&c._experiments.maxSpans),o&&o.emit&&o.emit("startTransaction",u),u}function $n(){const e=z();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=Mn),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=Hn),Yn())}function Qi(e,t,n=()=>{}){const i=Pt(e),s=R(),r=s.getScope(),a=r.getSpan(),o=At(s,a,i);r.setSpan(o);function c(){o&&o.finish(),s.getScope().setSpan(a)}let u;try{u=t(o)}catch(d){throw o&&o.setStatus("internal_error"),n(d),c(),d}return X(u)?Promise.resolve(u).then(()=>{c()},d=>{o&&o.setStatus("internal_error"),n(d),c()}):c(),u}function Zi(e,t){const n=Pt(e),i=R(),s=i.getScope(),r=s.getSpan(),a=At(i,r,n);s.setSpan(a);function o(){a&&a.finish(),i.getScope().setSpan(r)}let c;try{c=t(a)}catch(u){throw a&&a.setStatus("internal_error"),o(),u}return X(c)?Promise.resolve(c).then(()=>{o()},()=>{a&&a.setStatus("internal_error"),o()}):o(),c}function ts(e,t){const n=Pt(e),i=R(),s=i.getScope(),r=s.getSpan(),a=At(i,r,n);s.setSpan(a);function o(){a&&a.finish(),i.getScope().setSpan(r)}let c;try{c=t(a,o)}catch(u){throw a&&a.setStatus("internal_error"),u}return X(c)&&Promise.resolve(c).then(void 0,()=>{a&&a.setStatus("internal_error")}),c}function es(e){if(!K())return;const t={...e};t.name!==void 0&&t.description===void 0&&(t.description=t.name);const n=R(),i=Fn();return i?i.startChild(t):n.startTransaction(t)}function Fn(){return R().getScope().getSpan()}function ns({sentryTrace:e,baggage:t},n){const s=R().getScope(),{traceparentData:r,dynamicSamplingContext:a,propagationContext:o}=Ee(e,t);s.setPropagationContext(o),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&r&&_.log(`[Tracing] Continuing trace ${r.traceId}.`);const c={...r,metadata:w({dynamicSamplingContext:r&&!a?{}:a})};return n(c)}function At(e,t,n){if(K())return t?t.startChild(n):e.startTransaction(n)}function Pt(e){const t={...e};return t.name!==void 0&&t.description===void 0&&(t.description=t.name),t}const l=y;function jn(){l&&l.document?l.document.addEventListener("visibilitychange",()=>{const e=J();if(l.document.hidden&&e){const t="cancelled";(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${e.op}`),e.status||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.finish()}}):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const xt=(e,t,n)=>{let i,s;return r=>{t.value>=0&&(r||n)&&(s=t.value-(i||0),(s||i===void 0)&&(i=t.value,t.delta=s,e(t)))}},qn=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Wn=()=>{const e=l.performance.timing,t=l.performance.navigation.type,n={entryType:"navigation",startTime:0,type:t==2?"back_forward":t===1?"reload":"navigate"};for(const i in e)i!=="navigationStart"&&i!=="toJSON"&&(n[i]=Math.max(e[i]-e.navigationStart,0));return n},Be=()=>l.__WEB_VITALS_POLYFILL__?l.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||Wn()):l.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],ke=()=>{const e=Be();return e&&e.activationStart||0},Lt=(e,t)=>{const n=Be();let i="navigate";return n&&(l.document.prerendering||ke()>0?i="prerender":i=n.type.replace(/_/g,"-")),{name:e,value:typeof t>"u"?-1:t,rating:"good",delta:0,entries:[],id:qn(),navigationType:i}},ht=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const i=new PerformanceObserver(s=>{t(s.getEntries())});return i.observe(Object.assign({type:e,buffered:!0},n||{})),i}}catch{}},lt=(e,t)=>{const n=i=>{(i.type==="pagehide"||l.document.visibilityState==="hidden")&&(e(i),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},Xn=e=>{const t=Lt("CLS",0);let n,i=0,s=[];const r=o=>{o.forEach(c=>{if(!c.hadRecentInput){const u=s[0],d=s[s.length-1];i&&s.length!==0&&c.startTime-d.startTime<1e3&&c.startTime-u.startTime<5e3?(i+=c.value,s.push(c)):(i=c.value,s=[c]),i>t.value&&(t.value=i,t.entries=s,n&&n())}})},a=ht("layout-shift",r);if(a){n=xt(e,t);const o=()=>{r(a.takeRecords()),n(!0)};return lt(o),o}};let ct=-1;const Vn=()=>l.document.visibilityState==="hidden"&&!l.document.prerendering?0:1/0,zn=()=>{lt(({timeStamp:e})=>{ct=e},!0)},Ht=()=>(ct<0&&(ct=Vn(),zn()),{get firstHiddenTime(){return ct}}),Jn=e=>{const t=Ht(),n=Lt("FID");let i;const s=o=>{o.startTime<t.firstHiddenTime&&(n.value=o.processingStart-o.startTime,n.entries.push(o),i(!0))},r=o=>{o.forEach(s)},a=ht("first-input",r);i=xt(e,n),a&&lt(()=>{r(a.takeRecords()),a.disconnect()},!0)},re={},Kn=e=>{const t=Ht(),n=Lt("LCP");let i;const s=a=>{const o=a[a.length-1];if(o){const c=Math.max(o.startTime-ke(),0);c<t.firstHiddenTime&&(n.value=c,n.entries=[o],i())}},r=ht("largest-contentful-paint",s);if(r){i=xt(e,n);const a=()=>{re[n.id]||(s(r.takeRecords()),r.disconnect(),re[n.id]=!0,i(!0))};return["keydown","click"].forEach(o=>{addEventListener(o,a,{once:!0,capture:!0})}),lt(a,!0),a}},j={},_t={};let Ge,Ue,we;function Qn(e){return $t("cls",e,ei,Ge)}function Zn(e){return $t("lcp",e,ii,we)}function ti(e){return $t("fid",e,ni,Ue)}function Mt(e,t){return Oe(e,t),_t[e]||(si(e),_t[e]=!0),Ye(e,t)}function pt(e,t){const n=j[e];if(!(!n||!n.length))for(const i of n)try{i(t)}catch(s){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${le(i)}
Error:`,s)}}function ei(){Xn(e=>{pt("cls",{metric:e}),Ge=e})}function ni(){Jn(e=>{pt("fid",{metric:e}),Ue=e})}function ii(){Kn(e=>{pt("lcp",{metric:e}),we=e})}function $t(e,t,n,i){return Oe(e,t),_t[e]||(n(),_t[e]=!0),i&&t({metric:i}),Ye(e,t)}function si(e){const t={};e==="event"&&(t.durationThreshold=0),ht(e,n=>{pt(e,{entries:n})},t)}function Oe(e,t){j[e]=j[e]||[],j[e].push(t)}function Ye(e,t){return()=>{const n=j[e];if(!n)return;const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}function Tt(e){return typeof e=="number"&&isFinite(e)}function x(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}function E(e){return e/1e3}function Ce(){return l&&l.addEventListener&&l.performance}let ae=0,g={},I,q;function ri(){const e=Ce();if(e&&G){e.mark&&l.performance.mark("sentry-tracing-init");const t=di(),n=ci(),i=ui();return()=>{t(),n(),i()}}return()=>{}}function ai(){Mt("longtask",({entries:e})=>{for(const t of e){const n=J();if(!n)return;const i=E(G+t.startTime),s=E(t.duration);n.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:i,endTimestamp:i+s})}})}function oi(){Mt("event",({entries:e})=>{for(const t of e){const n=J();if(!n)return;if(t.name==="click"){const i=E(G+t.startTime),s=E(t.duration);n.startChild({description:ut(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:i,endTimestamp:i+s})}}})}function ci(){return Qn(({metric:e})=>{const t=e.entries.pop();t&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Measurements] Adding CLS"),g.cls={value:e.value,unit:""},q=t)})}function ui(){return Zn(({metric:e})=>{const t=e.entries.pop();t&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Measurements] Adding LCP"),g.lcp={value:e.value,unit:"millisecond"},I=t)})}function di(){return ti(({metric:e})=>{const t=e.entries.pop();if(!t)return;const n=E(G),i=E(t.startTime);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Measurements] Adding FID"),g.fid={value:e.value,unit:"millisecond"},g["mark.fid"]={value:n+i,unit:"second"}})}function _i(e){const t=Ce();if(!t||!l.performance.getEntries||!G)return;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Tracing] Adding & adjusting spans using Performance API");const n=E(G),i=t.getEntries();let s,r;if(i.slice(ae).forEach(a=>{const o=E(a.startTime),c=E(a.duration);if(!(e.op==="navigation"&&n+o<e.startTimestamp))switch(a.entryType){case"navigation":{hi(e,a,n),s=n+E(a.responseStart),r=n+E(a.requestStart);break}case"mark":case"paint":case"measure":{fi(e,a,o,c,n);const u=Ht(),d=a.startTime<u.firstHiddenTime;a.name==="first-paint"&&d&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Measurements] Adding FP"),g.fp={value:a.startTime,unit:"millisecond"}),a.name==="first-contentful-paint"&&d&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Measurements] Adding FCP"),g.fcp={value:a.startTime,unit:"millisecond"});break}case"resource":{const u=a.name.replace(l.location.origin,"");pi(e,a,u,o,c,n);break}}}),ae=Math.max(i.length-1,0),mi(e),e.op==="pageload"){typeof s=="number"&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Measurements] Adding TTFB"),g.ttfb={value:(s-e.startTimestamp)*1e3,unit:"millisecond"},typeof r=="number"&&r<=s&&(g["ttfb.requestTime"]={value:(s-r)*1e3,unit:"millisecond"})),["fcp","fp","lcp"].forEach(o=>{if(!g[o]||n>=e.startTimestamp)return;const c=g[o].value,u=n+E(c),d=Math.abs((u-e.startTimestamp)*1e3),f=d-c;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Measurements] Normalized ${o} from ${c} to ${d} (${f})`),g[o].value=d});const a=g["mark.fid"];a&&g.fid&&(x(e,{description:"first input delay",endTimestamp:a.value+E(g.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:a.value}),delete g["mark.fid"]),"fcp"in g||delete g.cls,Object.keys(g).forEach(o=>{e.setMeasurement(o,g[o].value,g[o].unit)}),gi(e)}I=void 0,q=void 0,g={}}function fi(e,t,n,i,s){const r=s+n,a=r+i;return x(e,{description:t.name,endTimestamp:a,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:r}),r}function hi(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(i=>{st(e,t,i,n)}),st(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),st(e,t,"fetch",n,"cache","domainLookupStart"),st(e,t,"domainLookup",n,"DNS"),li(e,t,n)}function st(e,t,n,i,s,r){const a=r?t[r]:t[`${n}End`],o=t[`${n}Start`];!o||!a||x(e,{op:"browser",origin:"auto.browser.browser.metrics",description:s||n,startTimestamp:i+E(o),endTimestamp:i+E(a)})}function li(e,t,n){x(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+E(t.requestStart),endTimestamp:n+E(t.responseEnd)}),x(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+E(t.responseStart),endTimestamp:n+E(t.responseEnd)})}function pi(e,t,n,i,s,r){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const a={};"transferSize"in t&&(a["http.response_transfer_size"]=t.transferSize),"encodedBodySize"in t&&(a["http.response_content_length"]=t.encodedBodySize),"decodedBodySize"in t&&(a["http.decoded_response_content_length"]=t.decodedBodySize),"renderBlockingStatus"in t&&(a["resource.render_blocking_status"]=t.renderBlockingStatus);const o=r+i,c=o+s;x(e,{description:n,endTimestamp:c,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:o,data:a})}function mi(e){const t=l.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),Tt(n.rtt)&&(g["connection.rtt"]={value:n.rtt,unit:"millisecond"})),Tt(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`),Tt(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}function gi(e){I&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Measurements] Adding LCP Data"),I.element&&e.setTag("lcp.element",ut(I.element)),I.id&&e.setTag("lcp.id",I.id),I.url&&e.setTag("lcp.url",I.url.trim().slice(0,200)),e.setTag("lcp.size",I.size)),q&&q.sources&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log("[Measurements] Adding CLS Data"),q.sources.forEach((t,n)=>e.setTag(`cls.source.${n+1}`,ut(t.node))))}const kt=["localhost",/^\/(?!\/)/],Gt={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:kt,tracePropagationTargets:kt};function Ti(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:i,tracingOrigins:s,shouldCreateSpanForRequest:r,enableHTTPTimings:a}={traceFetch:Gt.traceFetch,traceXHR:Gt.traceXHR,...e},o=typeof r=="function"?r:d=>!0,c=d=>bi(d,i||s),u={};t&&W("fetch",d=>{const f=Ri(d,o,c,u);a&&f&&oe(f)}),n&&W("xhr",d=>{const f=Di(d,o,c,u);a&&f&&oe(f)})}function Ei(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function oe(e){const t=e.data.url;if(!t)return;const n=Mt("resource",({entries:i})=>{i.forEach(s=>{Ei(s)&&s.name.endsWith(t)&&(yi(s).forEach(a=>e.setData(...a)),setTimeout(n))})})}function Si(e){let t="unknown",n="unknown",i="";for(const s of e){if(s==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(s))){t=i==="h"?"http":i,n=e.split(i)[1];break}i+=s}return i===e&&(t=i),{name:t,version:n}}function v(e=0){return((G||performance.timeOrigin)+e)/1e3}function yi(e){const{name:t,version:n}=Si(e.nextHopProtocol),i=[];return i.push(["network.protocol.version",n],["network.protocol.name",t]),G?[...i,["http.request.redirect_start",v(e.redirectStart)],["http.request.fetch_start",v(e.fetchStart)],["http.request.domain_lookup_start",v(e.domainLookupStart)],["http.request.domain_lookup_end",v(e.domainLookupEnd)],["http.request.connect_start",v(e.connectStart)],["http.request.secure_connection_start",v(e.secureConnectionStart)],["http.request.connection_end",v(e.connectEnd)],["http.request.request_start",v(e.requestStart)],["http.request.response_start",v(e.responseStart)],["http.request.response_end",v(e.responseEnd)]]:i}function bi(e,t){return je(e,t||kt)}function Ri(e,t,n,i){if(!K()||!e.fetchData)return;const s=t(e.fetchData.url);if(e.endTimestamp&&s){const p=e.fetchData.__span;if(!p)return;const h=i[p];if(h){if(e.response){h.setHttpStatus(e.response.status);const T=e.response&&e.response.headers&&e.response.headers.get("content-length"),m=parseInt(T);m>0&&h.setData("http.response_content_length",m)}else e.error&&h.setStatus("internal_error");h.finish(),delete i[p]}return}const r=R(),a=r.getScope(),o=r.getClient(),c=a.getSpan(),{method:u,url:d}=e.fetchData,f=s&&c?c.startChild({data:{url:d,type:"fetch","http.method":u},description:`${u} ${d}`,op:"http.client",origin:"auto.http.browser"}):void 0;if(f&&(e.fetchData.__span=f.spanId,i[f.spanId]=f),n(e.fetchData.url)&&o){const p=e.args[0];e.args[1]=e.args[1]||{};const h=e.args[1];h.headers=Ni(p,o,a,h,f)}return f}function Ni(e,t,n,i,s){const r=s||n.getSpan(),a=r&&r.transaction,{traceId:o,sampled:c,dsc:u}=n.getPropagationContext(),d=r?r.toTraceparent():Ot(o,void 0,c),f=a?a.getDynamicSamplingContext():u||Ct(o,t,n),p=Dt(f),h=typeof Request<"u"&&P(e,Request)?e.headers:i.headers;if(h)if(typeof Headers<"u"&&P(h,Headers)){const T=new Headers(h);return T.append("sentry-trace",d),p&&T.append(Nt,p),T}else if(Array.isArray(h)){const T=[...h,["sentry-trace",d]];return p&&T.push([Nt,p]),T}else{const T="baggage"in h?h.baggage:void 0,m=[];return Array.isArray(T)?m.push(...T):T&&m.push(T),p&&m.push(p),{...h,"sentry-trace":d,baggage:m.length>0?m.join(","):void 0}}else return{"sentry-trace":d,baggage:p}}function Di(e,t,n,i){const s=e.xhr,r=s&&s[$];if(!K()||s&&s.__sentry_own_request__||!s||!r)return;const a=t(r.url);if(e.endTimestamp&&a){const f=s.__sentry_xhr_span_id__;if(!f)return;const p=i[f];p&&(p.setHttpStatus(r.status_code),p.finish(),delete i[f]);return}const o=R(),c=o.getScope(),u=c.getSpan(),d=a&&u?u.startChild({data:{...r.data,type:"xhr","http.method":r.method,url:r.url},description:`${r.method} ${r.url}`,op:"http.client",origin:"auto.http.browser"}):void 0;if(d&&(s.__sentry_xhr_span_id__=d.spanId,i[s.__sentry_xhr_span_id__]=d),s.setRequestHeader&&n(r.url))if(d){const f=d&&d.transaction,p=f&&f.getDynamicSamplingContext(),h=Dt(p);ce(s,d.toTraceparent(),h)}else{const f=o.getClient(),{traceId:p,sampled:h,dsc:T}=c.getPropagationContext(),m=Ot(p,void 0,h),H=T||(f?Ct(p,f,c):void 0),N=Dt(H);ce(s,m,N)}return d}function ce(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(Nt,n)}catch{}}function vi(e,t=!0,n=!0){if(!l||!l.location){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn("Could not initialize routing instrumentation due to invalid location");return}let i=l.location.href,s;t&&(s=e({name:l.location.pathname,startTimestamp:G?G/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&W("history",({to:r,from:a})=>{if(a===void 0&&i&&i.indexOf(r)!==-1){i=void 0;return}a!==r&&(i=void 0,s&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] Finishing current transaction with op: ${s.op}`),s.finish()),s=e({name:l.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))})}const Ii="BrowserTracing",Bi={...ot,markBackgroundTransactions:!0,routingInstrumentation:vi,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,_experiments:{},...Gt};class is{constructor(t){this.name=Ii,this._hasSetTracePropagationTargets=!1,$n(),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&(this._hasSetTracePropagationTargets=!!(t&&(t.tracePropagationTargets||t.tracingOrigins))),this.options={...Bi,...t},this.options._experiments.enableLongTask!==void 0&&(this.options.enableLongTask=this.options._experiments.enableLongTask),t&&!t.tracePropagationTargets&&t.tracingOrigins&&(this.options.tracePropagationTargets=t.tracingOrigins),this._collectWebVitals=ri(),this.options.enableLongTask&&ai(),this.options._experiments.enableInteractions&&oi()}setupOnce(t,n){this._getCurrentHub=n;const s=n().getClient(),r=s&&s.getOptions(),{routingInstrumentation:a,startTransactionOnLocationChange:o,startTransactionOnPageLoad:c,markBackgroundTransactions:u,traceFetch:d,traceXHR:f,shouldCreateSpanForRequest:p,enableHTTPTimings:h,_experiments:T}=this.options,m=r&&r.tracePropagationTargets,H=m||this.options.tracePropagationTargets;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&this._hasSetTracePropagationTargets&&m&&_.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),a(N=>{const M=this._createRouteTransaction(N);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(M,N,n),M},c,o),u&&jn(),T.enableInteractions&&this._registerInteractionListener(),Ti({traceFetch:d,traceXHR:f,tracePropagationTargets:H,shouldCreateSpanForRequest:p,enableHTTPTimings:h})}_createRouteTransaction(t){if(!this._getCurrentHub){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn(`[Tracing] Did not create ${t.op} transaction because _getCurrentHub is invalid.`);return}const n=this._getCurrentHub(),{beforeNavigate:i,idleTimeout:s,finalTimeout:r,heartbeatInterval:a}=this.options,o=t.op==="pageload",c=o?ue("sentry-trace"):"",u=o?ue("baggage"):"",{traceparentData:d,dynamicSamplingContext:f,propagationContext:p}=Ee(c,u),h={...t,...d,metadata:{...t.metadata,dynamicSamplingContext:d&&!f?{}:f},trimEnd:!0},T=typeof i=="function"?i(h):h,m=T===void 0?{...h,sampled:!1}:T;m.metadata=m.name!==h.name?{...m.metadata,source:"custom"}:m.metadata,this._latestRouteName=m.name,this._latestRouteSource=m.metadata&&m.metadata.source,m.sampled===!1&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] Will not send ${m.op} transaction because of beforeNavigate.`),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.log(`[Tracing] Starting ${m.op} transaction on scope`);const{location:H}=l,N=se(n,m,s,r,!0,{location:H},a),M=n.getScope();return o&&d?M.setPropagationContext(p):M.setPropagationContext({traceId:N.traceId,spanId:N.spanId,parentSpanId:N.parentSpanId,sampled:N.sampled}),N.registerBeforeFinishCallback(Ae=>{this._collectWebVitals(),_i(Ae)}),N}_registerInteractionListener(){let t;const n=()=>{const{idleTimeout:i,finalTimeout:s,heartbeatInterval:r}=this.options,a="ui.action.click",o=J();if(o&&o.op&&["navigation","pageload"].includes(o.op)){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn(`[Tracing] Did not create ${a} transaction because a pageload or navigation transaction is in progress.`);return}if(t&&(t.setFinishReason("interactionInterrupted"),t.finish(),t=void 0),!this._getCurrentHub){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn(`[Tracing] Did not create ${a} transaction because _getCurrentHub is invalid.`);return}if(!this._latestRouteName){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&_.warn(`[Tracing] Did not create ${a} transaction because _latestRouteName is missing.`);return}const c=this._getCurrentHub(),{location:u}=l,d={name:this._latestRouteName,op:a,trimEnd:!0,metadata:{source:this._latestRouteSource||"url"}};t=se(c,d,i,s,!0,{location:u},r)};["click"].forEach(i=>{addEventListener(i,n,{once:!1,capture:!0})})}}function ue(e){const t=Xe(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}export{$,X as A,Ut as B,Ai as C,Se as D,$i as E,je as F,y as G,Je as H,wt as I,Fi as J,ji as K,ki as L,Gi as M,Ui as N,Pe as O,xe as P,xi as Q,Hi as R,B as S,Vt as T,Qe as U,W as V,A as W,Ci as X,k as Y,ut as Z,Yi as _,gn as a,Vi as a0,Li as a1,tn as a2,Mt as a3,Zn as a4,G as a5,O as a6,Ji as a7,Re as a8,$n as a9,ns as aa,vn as ab,Fn as ac,It as ad,ne as ae,Cn as af,es as ag,Zi as ah,ts as ai,Qi as aj,is as ak,Gt as al,Ti as am,zi as an,He as ao,Mi as ap,z as aq,at as ar,ve as as,Yt as at,Ii as au,K as av,Dn as aw,xn as ax,se as ay,Me as b,Ke as c,$e as d,Oi as e,Wi as f,le as g,w as h,P as i,ge as j,J as k,_ as l,R as m,Tn as n,Ki as o,b as p,C as q,Xi as r,vt as s,Ft as t,Pi as u,ye as v,qi as w,wi as x,ft as y,Ct as z};
