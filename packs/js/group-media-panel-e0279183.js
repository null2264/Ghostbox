import{d as y,r as v,at as E,q as I,kT as G,O,kU as S,a as i,aB as D,F as c,y as T,aD as m}from"../index-7380452a.js";import{W as k}from"./widget-2ac720e4.js";import{M as N}from"./media-item-9b67131c.js";import"./arrow-right-b75290c7.js";import"./volume-08f8a8f1.js";import"./es.array.last-index-of-ca8fdd84.js";var q=function(f){var r,e=f.group,s=y(),g=v.useState(!0),u=E(g,2),M=u[0],l=u[1],d=!!(e!=null&&(r=e.relationship)!==null&&r!==void 0&&r.member),n=e==null?void 0:e.locked,_=I(function(o){return e?G(o,e==null?void 0:e.id):O()}),A=function(a){if(a.type==="video")s(m("VIDEO",{media:a,status:a.status}));else{var t=a.getIn(["status","media_attachments"]),p=t.findIndex(function(x){return x.id===a.id});s(m("MEDIA",{media:t,index:p,status:a.status,account:a.account}))}};v.useEffect(function(){l(!0),e&&!e.deleted_at&&(d||!n)&&s(S(e.id)).then(function(){return l(!1)}).catch(function(){})},[e==null?void 0:e.id,d,n]);var h=function(){var a=_.slice(0,9);return a.isEmpty()?i(T,{size:"sm",theme:"muted"},void 0,i(c,{id:"media_panel.empty_message",defaultMessage:"No media found."})):i("div",{className:"grid grid-cols-3 gap-1"},void 0,a.map(function(t,p){return i(N,{attachment:t,onOpenMedia:A},"".concat(t.getIn(["status","id"]),"+").concat(t.id))}))};return n&&!d||e!=null&&e.deleted_at?null:i(k,{title:i(c,{id:"media_panel.title",defaultMessage:"Media"})},void 0,e&&i("div",{className:"w-full"},void 0,M?i(D,{}):h()))};export{q as default};
