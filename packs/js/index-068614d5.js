import{d as C,u as P,r as i,aM as T,q as E,au as M,Q as L,aN as N,a as t,aO as y,aD as B,aP as G,X as w,w as H,o as Q,aQ as $,aR as j}from"../index-4238fef4.js";import{P as q}from"./pull-to-refresh-1570aae3.js";import{T as F}from"./thread-c581b3a4.js";import"./scrollable-list-0412df1c.js";import"./index-eec5f2ea.js";import"./load-more-2d4a7322.js";import"./pending-status-58406f63.js";import"./poll-preview-92abdca6.js";import"./noop-23f58e45.js";import"./status-container-8972338f.js";var S=Q({title:{id:"status.title",defaultMessage:"Post Details"},titleDirect:{id:"status.title_direct",defaultMessage:"Direct message"},deleteConfirm:{id:"confirmations.delete.confirm",defaultMessage:"Delete"},deleteHeading:{id:"confirmations.delete.heading",defaultMessage:"Delete post"},deleteMessage:{id:"confirmations.delete.message",defaultMessage:"Are you sure you want to delete this post?"},redraftConfirm:{id:"confirmations.redraft.confirm",defaultMessage:"Delete & redraft"},redraftHeading:{id:"confirmations.redraft.heading",defaultMessage:"Delete & redraft"},redraftMessage:{id:"confirmations.redraft.message",defaultMessage:"Are you sure you want to delete this post and re-draft it? Favorites and reposts will be lost, and replies to the original post will be orphaned."},blockConfirm:{id:"confirmations.block.confirm",defaultMessage:"Block"},revealAll:{id:"status.show_more_all",defaultMessage:"Show more for all"},hideAll:{id:"status.show_less_all",defaultMessage:"Show less for all"},detailedStatus:{id:"status.detailed_status",defaultMessage:"Detailed conversation view"},replyConfirm:{id:"confirmations.reply.confirm",defaultMessage:"Reply"},replyMessage:{id:"confirmations.reply.message",defaultMessage:"Replying now will overwrite the message you are currently composing. Are you sure you want to proceed?"},blockAndReport:{id:"confirmations.block.block_and_report",defaultMessage:"Block & Report"}}),ae=function(s){var l=C(),_=P(),D=i.useCallback(T(),[]),e=E(function(a){return D(a,{id:s.params.statusId})}),R=i.useState(!!e),u=M(R,2),b=u[0],d=u[1],k=i.useState(),c=M(k,2),o=c[0],f=c[1],m=function(){var a=$(regeneratorRuntime.mark(function n(){var g,p,h,v;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return g=s.params,p=g.statusId,r.next=4,l(j(p));case 4:h=r.sent,v=h.next,f(v);case 7:case"end":return r.stop()}},n)}));return function(){return a.apply(this,arguments)}}();i.useEffect(function(){m().then(function(){d(!0)}).catch(function(){d(!0)})},[s.params.statusId]);var I=i.useCallback(L(function(){o&&e&&l(N(e.id,o)).then(function(a){var n=a.next;f(n)}).catch(function(){})},300,{leading:!0}),[o,e]),A=function(){return m()};if(e!=null&&e.event)return t(y,{to:"/@".concat(e.getIn(["account","acct"]),"/events/").concat(e.id)});if(!e&&b)return t(B,{});if(!e)return t(w,{},void 0,t(G,{showPrivacyIndicator:!0}));if(e.group&&H(e.group)==="object"&&e.group.slug&&!s.params.groupSlug)return t(y,{to:"/group/".concat(e.group.slug,"/posts/").concat(s.params.statusId)});var x=function(){return e.visibility==="direct"?S.titleDirect:S.title};return t(w,{label:_.formatMessage(x())},void 0,t(q,{onRefresh:A},void 0,t(F,{status:e,next:o,handleLoadMore:I})))};export{ae as default};
