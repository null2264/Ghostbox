import{u as T,d as A,g as q,R as n,at as p,_ as j,fi as G,bp as _,a as s,bE as H,bF as m,bG as g,fj as N,bI as V,aa as M,X as B,o as K}from"../index-be605fd2.js";import"./es.promise.finally-0ef07e66.js";function O(r,e){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(d){return Object.getOwnPropertyDescriptor(r,d).enumerable})),a.push.apply(a,t)}return a}function C(r){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?O(Object(a),!0).forEach(function(t){j(r,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(a,t))})}return r}var o=K({updatePasswordSuccess:{id:"security.update_password.success",defaultMessage:"Password successfully updated."},updatePasswordFail:{id:"security.update_password.fail",defaultMessage:"Update password failed."},oldPasswordFieldLabel:{id:"security.fields.old_password.label",defaultMessage:"Current password"},newPasswordFieldLabel:{id:"security.fields.new_password.label",defaultMessage:"New password"},confirmationFieldLabel:{id:"security.fields.password_confirmation.label",defaultMessage:"New password (again)"},header:{id:"edit_password.header",defaultMessage:"Change Password"},submit:{id:"security.submit",defaultMessage:"Save changes"},cancel:{id:"common.cancel",defaultMessage:"Cancel"}}),F={currentPassword:"",newPassword:"",newPasswordConfirmation:""},z=function(){var e=T(),a=A(),t=q(),d=t.passwordRequirements,R=n.useState(F),b=p(R,2),c=b[0],P=b[1],L=n.useState(!1),v=p(L,2),E=v[0],y=v[1],$=n.useState(!d),h=p($,2),D=h[0],I=h[1],l=c.currentPassword,i=c.newPassword,w=c.newPasswordConfirmation,S=function(){return P(F)},f=n.useCallback(function(u){u.persist(),P(function(x){return C(C({},x),{},j({},u.target.name,u.target.value))})},[]),k=n.useCallback(function(){y(!0),a(G(l,i,w)).then(function(){S(),_.success(e.formatMessage(o.updatePasswordSuccess))}).finally(function(){y(!1)}).catch(function(){S(),_.error(e.formatMessage(o.updatePasswordFail))})},[l,i,w,a,e]);return s(B,{label:e.formatMessage(o.header),backHref:"/settings"},void 0,s(H,{onSubmit:k},void 0,s(m,{labelText:e.formatMessage(o.oldPasswordFieldLabel)},void 0,s(g,{type:"password",name:"currentPassword",onChange:f,value:l})),s(m,{labelText:e.formatMessage(o.newPasswordFieldLabel)},void 0,s(g,{type:"password",name:"newPassword",onChange:f,value:i}),d&&s(N,{password:i,onChange:I})),s(m,{labelText:e.formatMessage(o.confirmationFieldLabel)},void 0,s(g,{type:"password",name:"newPasswordConfirmation",onChange:f,value:w})),s(V,{},void 0,s(M,{to:"/settings",theme:"tertiary"},void 0,e.formatMessage(o.cancel)),s(M,{type:"submit",theme:"primary",disabled:E||!D},void 0,e.formatMessage(o.submit)))))};export{z as default};
