import{d as z,a9 as L,r as c,ax as N,q as v,b7 as F,Z as k,iE as q,iF as g,R as T,az as U,W as $,a as e,b2 as D,a3 as j,hN as G,iG as J,cB as W,H as Z,A as K,hE as O,b5 as Q,y as h,hC as u,a2 as V,F as p,iH as X}from"../index-301f2eff.js";import{u as Y}from"./usePopper-5286e35b.js";import{u as ee}from"./usePatronUser-7d8cfb4c.js";var ae=function(t,r){var s=[];return t!=null&&t.admin?s.push(e(u,{slug:"admin",title:e(p,{id:"account_moderation_modal.roles.admin",defaultMessage:"Admin"})},"admin")):t!=null&&t.moderator&&s.push(e(u,{slug:"moderator",title:e(p,{id:"account_moderation_modal.roles.moderator",defaultMessage:"Moderator"})},"moderator")),r!=null&&r.is_patron&&s.push(e(u,{slug:"patron",title:e(p,{id:"account.patron",defaultMessage:"Patron"})},"patron")),s},te=function(t){return function(){t(X())}},oe=function(t){return function(){t(g(!0))}},ne=function(t){var r,s=t.visible,f=s===void 0?!0:s,i=z(),y=L(),b=c.useState(null),m=N(b,2),P=m[0],E=m[1],M=v(function(o){return o.me}),n=v(function(o){return o.profile_hover_card.accountId||void 0}),w=F(n,{withRelationship:!0}),a=w.account,C=ee(a==null?void 0:a.url),H=C.patronUser,x=v(function(o){var d;return(d=o.profile_hover_card.ref)===null||d===void 0?void 0:d.current}),B=ae(a,H);c.useEffect(function(){n&&i(k([n]))},[i,n]),c.useEffect(function(){var o=y.listen(function(){q.cancel(),i(g())});return function(){o()}},[]);var _=Y(x,P),S=_.styles,A=_.attributes;if(!a)return null;var R={__html:a.note_emojified},I=M!==a.id&&((r=a.relationship)===null||r===void 0?void 0:r.followed_by)===!0;return T.createElement("div",U({className:$({"absolute transition-opacity w-[320px] z-[101] top-0 left-0":!0,"opacity-100":f,"opacity-0 pointer-events-none":!f}),ref:E,style:S.popper},A.popper,{onMouseEnter:te(i),onMouseLeave:oe(i)}),e(V,{variant:"rounded",className:"relative isolate overflow-hidden"},void 0,e(D,{},void 0,e(j,{space:2},void 0,e(G,{fetchComponent:J},void 0,function(o){return e(o,{accountId:a.id,action:e(W,{account:a,small:!0}),badges:B})}),a.local&&e(Z,{alignItems:"center",space:.5},void 0,e(K,{src:O,className:"h-4 w-4 text-gray-800 dark:text-gray-200"}),e(Q,{id:"account-Status--member-since",vars:{date:new Date(a.created_at)}},void 0,e(h,{size:"sm"},void 0,"Joined ",a.created_at))),a.note.length>0&&e(h,{size:"sm",dangerouslySetInnerHTML:R})),I&&e("div",{className:"absolute left-2 top-2"},void 0,e(u,{slug:"opaque",id:"account-Status--follows-you",title:"Follows you"})))))};export{ne as ProfileHoverCard,ne as default};
