import{u as P,a7 as k,d as T,t as x,ek as F,q as N,am as z,g as U,r as D,at as j,a as e,a2 as H,y as d,F as t,bu as h,bE as V,bG as q,aa as B,o as G,el as J,bp as Y}from"../index-0cdf0652.js";var y=G({close:{id:"lightbox.close",defaultMessage:"Close"},accountPlaceholder:{id:"remote_interaction.account_placeholder",defaultMessage:"Enter your username@domain you want to act from"},userNotFoundError:{id:"remote_interaction.user_not_found_error",defaultMessage:"Couldn't find given user"}}),W=function(s){var i=s.action,u=s.onClose,C=s.account,A=s.ap_id,c=P(),f=k(),I=T(),m=x(),R=F(),r=R.isOpen,S=N(function(n){var o;return(o=z(n,C))===null||o===void 0?void 0:o.display_name}),g=U(),b=D.useState(""),v=j(b,2),_=v[0],E=v[1],L=function(o){E(o.target.value)},l=function(){u("UNAUTHORIZED")},w=function(o){o.preventDefault(),I(J(A,_)).then(function(a){window.open(a,"_new","noopener,noreferrer"),u("UNAUTHORIZED")}).catch(function(a){a.message==="Couldn't find user"&&Y.error(c.formatMessage(y.userNotFoundError))})},p=function(){f.push("/login"),l()},M=function(){f.push("/signup"),l()},O=function(){var o,a;return i==="FOLLOW"?(o=e(t,{id:"remote_interaction.follow_title",defaultMessage:"Follow {user} remotely",values:{user:S}}),a=e(t,{id:"remote_interaction.follow",defaultMessage:"Proceed to follow"})):i==="REPLY"?(o=e(t,{id:"remote_interaction.reply_title",defaultMessage:"Reply to a post remotely"}),a=e(t,{id:"remote_interaction.reply",defaultMessage:"Proceed to reply"})):i==="REBLOG"?(o=e(t,{id:"remote_interaction.reblog_title",defaultMessage:"Reblog a post remotely"}),a=e(t,{id:"remote_interaction.reblog",defaultMessage:"Proceed to repost"})):i==="FAVOURITE"?(o=e(t,{id:"remote_interaction.favourite_title",defaultMessage:"Like a post remotely"}),a=e(t,{id:"remote_interaction.favourite",defaultMessage:"Proceed to like"})):i==="DISLIKE"?(o=e(t,{id:"remote_interaction.dislike_title",defaultMessage:"Dislike a post remotely"}),a=e(t,{id:"remote_interaction.dislike",defaultMessage:"Proceed to dislike"})):i==="POLL_VOTE"?(o=e(t,{id:"remote_interaction.poll_vote_title",defaultMessage:"Vote in a poll remotely"}),a=e(t,{id:"remote_interaction.poll_vote",defaultMessage:"Proceed to vote"})):i==="JOIN"&&(o=e(t,{id:"remote_interaction.event_join_title",defaultMessage:"Join an event remotely"}),a=e(t,{id:"remote_interaction.event_join",defaultMessage:"Proceed to join"})),e(h,{title:o,onClose:l,confirmationAction:p,confirmationText:e(t,{id:"account.login",defaultMessage:"Log in"}),secondaryAction:r?M:void 0,secondaryText:r?e(t,{id:"account.register",defaultMessage:"Sign up"}):void 0},void 0,e("div",{className:"remote-interaction-modal__content"},void 0,e(V,{className:"remote-interaction-modal__fields",onSubmit:w},void 0,e(q,{placeholder:c.formatMessage(y.accountPlaceholder),name:"remote_follow[acct]",value:_,autoCorrect:"off",autoCapitalize:"off",onChange:L,required:!0}),e(B,{type:"submit",theme:"primary"},void 0,a)),e("div",{className:"remote-interaction-modal__divider"},void 0,e(d,{align:"center"},void 0,e(t,{id:"remote_interaction.divider",defaultMessage:"or"}))),r&&e(d,{size:"lg",weight:"medium"},void 0,e(t,{id:"unauthorized_modal.title",defaultMessage:"Sign up for {site_title}",values:{site_title:m.title}}))))};return i&&g.remoteInteractions&&g.federating?O():e(h,{title:e(t,{id:"unauthorized_modal.title",defaultMessage:"Sign up for {site_title}",values:{site_title:m.title}}),onClose:l,confirmationAction:p,confirmationText:e(t,{id:"account.login",defaultMessage:"Log in"}),secondaryAction:r?M:void 0,secondaryText:r?e(t,{id:"account.register",defaultMessage:"Sign up"}):void 0},void 0,e(H,{},void 0,e(d,{},void 0,e(t,{id:"unauthorized_modal.text",defaultMessage:"You need to be logged in to do that."}))))};export{W as default};
