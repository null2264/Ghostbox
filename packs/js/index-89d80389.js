import{r as p,cG as B,a as e,H as j,q as y,b7 as I,N as P,a3 as g,y as s,d5 as S,b5 as f,bD as T,b6 as E,W as A,hC as G,cB as H,u as O,d as q,j7 as U,t as W,g as X,ax as k,j8 as $,X as J,o as K,j9 as Q}from"../index-8e73ebc4.js";import{L as V}from"./load-more-7c38aeef.js";var h=function(t){var r=t.name,c=t.value,n=t.checked,o=t.onChange,a=t.label,d=p.useMemo(function(){return"radio-".concat(B())},[]);return e(j,{alignItems:"center",space:3},void 0,e("input",{type:"radio",name:r,id:d,value:c,checked:n,onChange:o,className:"h-4 w-4 border-gray-300 text-primary-600 focus:ring-primary-500"}),e("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700"},void 0,a))},Y=function(t){var r,c=t.id,n=y(function(l){return l.me}),o=I(c),a=o.account,d=y(function(l){return P(l).get("autoPlayGif")});if(!a)return null;var b=n!==a.id&&((r=a.relationship)===null||r===void 0?void 0:r.followed_by);return e("div",{className:"flex flex-col divide-y divide-gray-200 rounded-lg bg-white text-center shadow dark:divide-primary-700 dark:bg-primary-800"},void 0,e("div",{className:"relative"},void 0,b&&e("div",{className:"absolute left-2.5 top-2.5"},void 0,e(G,{slug:"opaque",title:"Follows you",id:"account-Status--follows-you"})),e("div",{className:"absolute bottom-2.5 right-2.5"},void 0,e(H,{account:a,small:!0})),e("img",{src:d?a.header:a.header_static,alt:"",className:"h-32 w-full rounded-t-lg object-cover"})),e(g,{space:4,className:"p-3"},void 0,e(E,{account:a,withRelationship:!1}),e(s,{truncate:!0,align:"left",className:A("[&_br]:hidden [&_p:first-child]:inline [&_p:first-child]:truncate [&_p]:hidden"),dangerouslySetInnerHTML:{__html:a.note_emojified||"&nbsp;"}})),e("div",{className:"grid grid-cols-3 gap-1 py-4"},void 0,e(g,{},void 0,e(s,{theme:"primary",size:"md",weight:"medium"},void 0,S(a.statuses_count)),e(f,{id:"account-Label--posts"},void 0,e(s,{theme:"muted",size:"sm"},void 0,"Posts"))),e(g,{},void 0,e(s,{theme:"primary",size:"md",weight:"medium"},void 0,S(a.followers_count)),e(f,{id:"account-Label--followers"},void 0,e(s,{theme:"muted",size:"sm"},void 0,"Followers"))),e(g,{},void 0,e(s,{theme:"primary",size:"md",weight:"medium"},void 0,a.last_status_at?e(T,{theme:"inherit",timestamp:a.last_status_at}):e(f,{id:"account-Status--never-active"},void 0,e("span",{},void 0,"Never"))),e(f,{id:"account-Status--last-status"},void 0,e(s,{theme:"muted",size:"sm"},void 0,"Last active")))))},m=K({title:{id:"column.directory",defaultMessage:"Browse profiles"},recentlyActive:{id:"directory.recently_active",defaultMessage:"Recently active"},newArrivals:{id:"directory.new_arrivals",defaultMessage:"New arrivals"},local:{id:"directory.local",defaultMessage:"From {domain} only"},federated:{id:"directory.federated",defaultMessage:"From known fediverse"}}),ae=function(){var t=O(),r=q(),c=U(),n=c.search,o=new URLSearchParams(n),a=W(),d=X(),b=y(function(i){return i.user_lists.directory.items}),l=y(function(i){return i.user_lists.directory.isLoading}),x=p.useState(o.get("order")||"active"),N=k(x,2),u=N[0],F=N[1],D=p.useState(!!o.get("local")),L=k(D,2),v=L[0],R=L[1];p.useEffect(function(){r($({order:u||"active",local:v||!1}))},[u,v]);var M=function(w){F(w.target.value)},C=function(w){R(w.target.value==="1")},z=function(){r(Q({order:u||"active",local:v||!1}))};return e(J,{label:t.formatMessage(m.title)},void 0,e(g,{space:4},void 0,e("div",{className:"grid grid-cols-2 gap-2"},void 0,e("div",{},void 0,e(s,{weight:"medium"},void 0,"Display filter"),e("fieldset",{className:"mt-3"},void 0,e("legend",{className:"sr-only"},void 0,"Display filter"),e("div",{className:"space-y-2"},void 0,e(h,{name:"order",value:"active",label:t.formatMessage(m.recentlyActive),checked:u==="active",onChange:M}),e(h,{name:"order",value:"new",label:t.formatMessage(m.newArrivals),checked:u==="new",onChange:M})))),d.federating&&e("div",{},void 0,e(s,{weight:"medium"},void 0,"Fediverse filter"),e("fieldset",{className:"mt-3"},void 0,e("legend",{className:"sr-only"},void 0,"Fediverse filter"),e("div",{className:"space-y-2"},void 0,e(h,{name:"local",value:"1",label:t.formatMessage(m.local,{domain:a.title}),checked:v,onChange:C}),e(h,{name:"local",value:"0",label:t.formatMessage(m.federated),checked:!v,onChange:C}))))),e("div",{className:A({"grid grid-cols-1 sm:grid-cols-2 gap-2.5":!0,"opacity-30":l})},void 0,b.map(function(i){return e(Y,{id:i},i)})),e(V,{onClick:z,disabled:l})))};export{ae as default};
