import{d as V,r,aP as H,q as N,aY as G,f as Y,ax as M,de as w,eu as $,a as e,R as o,F as u,y as l,a3 as d,H as c,A as g,hF as j,hE as B,d9 as y,hG as Q,aG as U,cM as J,gP as K,bU as O,kf as W,aH as X}from"../index-7e6328d1.js";var te=function(x){var v=x.params,m=V(),k=r.useCallback(H(),[]),a=N(function(i){return k(i,{id:v.statusId})}),D=G(),I=D.tileServer,E=Y(),f=E.get("showSensitiveMedia"),F=r.useState(!!a),p=M(F,2),C=p[0],h=p[1],q=r.useState(w(a,f)),S=M(q,2),_=S[0],b=S[1];r.useEffect(function(){m($(v.statusId)).then(function(){h(!0)}).catch(function(){h(!0)}),b(w(a,f))},[v.statusId]);var R=function(){b(!_)},T=function(t){t.preventDefault(),m(X("EVENT_MAP",{statusId:a.id}))},P=r.useCallback(function(){var i,t=a.event;if(!t.location)return null;var n=[e(o.Fragment,{},"event-name",t.location.get("name"))];(i=t.location.get("street"))!==null&&i!==void 0&&i.trim()&&n.push(e(o.Fragment,{},"event-street",e("br",{}),t.location.get("street")));var s=[t.location.get("postalCode"),t.location.get("locality"),t.location.get("country")].filter(function(L){return L}).join(", ");return s&&n.push(e(o.Fragment,{},"event-address",e("br",{}),s)),I&&t.location.get("latitude")&&n.push(e(o.Fragment,{},"event-map",e("br",{}),e("a",{href:"#",className:"text-primary-600 hover:underline dark:text-accent-blue",onClick:T},void 0,e(u,{id:"event.show_on_map",defaultMessage:"Show on map"})))),t.location&&e(d,{space:1},void 0,e(l,{size:"xl",weight:"bold"},void 0,e(u,{id:"event.location",defaultMessage:"Location"})),e(c,{space:2,alignItems:"center"},void 0,e(g,{src:j}),e(l,{},void 0,n)))},[a]),z=r.useCallback(function(){var i=a.event;if(!i.start_time)return null;var t=new Date(i.start_time),n=i.end_time&&new Date(i.end_time),s=n&&t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear();return e(d,{space:1},void 0,e(l,{size:"xl",weight:"bold"},void 0,e(u,{id:"event.date",defaultMessage:"Date"})),e(c,{space:2,alignItems:"center"},void 0,e(g,{src:B}),e(l,{},void 0,e(y,{value:t,year:"numeric",month:"long",day:"2-digit",weekday:"long",hour:"2-digit",minute:"2-digit"}),n&&o.createElement(o.Fragment,null," - ",e(y,{value:n,year:s?void 0:"numeric",month:s?void 0:"long",day:s?void 0:"2-digit",weekday:s?void 0:"long",hour:"2-digit",minute:"2-digit"})))))},[a]),A=r.useCallback(function(){var i;return(i=a.event)!==null&&i!==void 0&&i.links.size?e(d,{space:1},void 0,e(l,{size:"xl",weight:"bold"},void 0,e(u,{id:"event.website",defaultMessage:"External links"})),a.event.links.map(function(t){return e(c,{space:2,alignItems:"center"},void 0,e(g,{src:Q}),e("a",{href:t.remote_url||t.url,className:"text-primary-600 hover:underline dark:text-accent-blue",target:"_blank"},void 0,(t.remote_url||t.url).replace(/^https?:\/\//,"")))})):null},[a]);return!a&&C?e(U,{}):a?e(d,{className:"mt-4 sm:p-2",space:2},void 0,!!a.contentHtml.trim()&&e(d,{space:1},void 0,e(l,{size:"xl",weight:"bold"},void 0,e(u,{id:"event.description",defaultMessage:"Description"})),e(O,{status:a,collapsable:!1,translatable:!0}),e(W,{status:a})),e(K,{status:a,showMedia:_,onToggleVisibility:R}),a.quote&&a.pleroma.get("quote_visible",!0)&&e(J,{statusId:a.quote}),P(),z(),A()):null};export{te as default};
