import{d as F,a7 as N,u as $,r as v,at as k,q as f,b3 as q,Z as z,iF as T,iG as g,R as U,av as j,W as G,a as e,a_ as J,a2 as W,hM as Z,iH as K,cA as O,cg as Q,H as V,A as X,hD as Y,y as h,F as i,hB as u,a$ as ee,iI as ae}from"../index-9e17f5e3.js";import{u as te}from"./usePopper-648ce11e.js";import{u as oe}from"./usePatronUser-b54a9672.js";var re=function(t,r){var s=[];return t!=null&&t.admin?s.push(e(u,{slug:"admin",title:e(i,{id:"account_moderation_modal.roles.admin",defaultMessage:"Admin"})},"admin")):t!=null&&t.moderator&&s.push(e(u,{slug:"moderator",title:e(i,{id:"account_moderation_modal.roles.moderator",defaultMessage:"Moderator"})},"moderator")),r!=null&&r.is_patron&&s.push(e(u,{slug:"patron",title:e(i,{id:"account.patron",defaultMessage:"Patron"})},"patron")),s},se=function(t){return function(){t(ae())}},ne=function(t){return function(){t(g(!0))}},de=function(t){var r,s=t.visible,p=s===void 0?!0:s,n=F(),y=N(),M=$(),b=v.useState(null),m=k(b,2),P=m[0],w=m[1],E=f(function(o){return o.me}),l=f(function(o){return o.profile_hover_card.accountId||void 0}),H=q(l,{withRelationship:!0}),a=H.account,A=oe(a==null?void 0:a.url),B=A.patronUser,C=f(function(o){var c;return(c=o.profile_hover_card.ref)===null||c===void 0?void 0:c.current}),x=re(a,B);v.useEffect(function(){l&&n(z([l]))},[n,l]),v.useEffect(function(){var o=y.listen(function(){T.cancel(),n(g())});return function(){o()}},[]);var _=te(C,P),I=_.styles,R=_.attributes;if(!a)return null;var S={__html:a.note_emojified},L=M.formatDate(a.created_at,{month:"long",year:"numeric"}),D=E!==a.id&&((r=a.relationship)===null||r===void 0?void 0:r.followed_by)===!0;return U.createElement("div",j({className:G({"absolute transition-opacity w-[320px] z-[101] top-0 left-0":!0,"opacity-100":p,"opacity-0 pointer-events-none":!p}),ref:w,style:I.popper},R.popper,{onMouseEnter:se(n),onMouseLeave:ne(n)}),e(ee,{variant:"rounded",className:"relative isolate overflow-hidden"},void 0,e(J,{},void 0,e(W,{space:2},void 0,e(Z,{fetchComponent:K},void 0,function(o){return e(o,{accountId:a.id,action:e(O,{account:a,small:!0}),badges:x})}),Q(a)?e(V,{alignItems:"center",space:.5},void 0,e(X,{src:Y,className:"h-4 w-4 text-gray-800 dark:text-gray-200"}),e(h,{size:"sm"},void 0,e(i,{id:"account.member_since",defaultMessage:"Joined {date}",values:{date:L}}))):null,a.note.length>0&&e(h,{size:"sm",dangerouslySetInnerHTML:S})),D&&e("div",{className:"absolute left-2 top-2"},void 0,e(u,{slug:"opaque",title:e(i,{id:"account.follows_you",defaultMessage:"Follows you"})})))))};export{de as ProfileHoverCard,de as default};
